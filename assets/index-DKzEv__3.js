const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quiz-DveEP1Pv.js","assets/useRedirect-DCg5YG1u.js","assets/dashboard-CdQUwAwS.js"])))=>i.map(i=>d[i]);
var _x=Object.defineProperty;var j_=d=>{throw TypeError(d)};var Ex=(d,e,t)=>e in d?_x(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var Tt=(d,e,t)=>Ex(d,typeof e!="symbol"?e+"":e,t),Kv=(d,e,t)=>e.has(d)||j_("Cannot "+t);var u=(d,e,t)=>(Kv(d,e,"read from private field"),t?t.call(d):e.get(d)),C=(d,e,t)=>e.has(d)?j_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(d):e.set(d,t),E=(d,e,t,n)=>(Kv(d,e,"write to private field"),n?n.call(d,t):e.set(d,t),t),w=(d,e,t)=>(Kv(d,e,"access private method"),t);var yi=(d,e,t,n)=>({set _(r){E(d,e,r,t)},get _(){return u(d,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function wx(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Qv={exports:{}},lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function Tx(){if(q_)return lh;q_=1;var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:d,type:n,key:c,ref:r!==void 0?r:null,props:o}}return lh.Fragment=e,lh.jsx=t,lh.jsxs=t,lh}var G_;function Cx(){return G_||(G_=1,Qv.exports=Tx()),Qv.exports}var ut=Cx(),$v={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function xx(){if(V_)return Lt;V_=1;var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function M(D,V,at){this.props=D,this.context=V,this.refs=T,this.updater=at||S}M.prototype.isReactComponent={},M.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function R(){}R.prototype=M.prototype;function N(D,V,at){this.props=D,this.context=V,this.refs=T,this.updater=at||S}var k=N.prototype=new R;k.constructor=N,_(k,M.prototype),k.isPureReactComponent=!0;var B=Array.isArray,U={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function G(D,V,at,nt,st,gt){return at=gt.ref,{$$typeof:d,type:D,key:V,ref:at!==void 0?at:null,props:gt}}function H(D,V){return G(D.type,V,void 0,void 0,void 0,D.props)}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===d}function K(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(at){return V[at]})}var Z=/\/+/g;function et(D,V){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):V.toString(36)}function it(){}function dt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(it,it):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function rt(D,V,at,nt,st){var gt=typeof D;(gt==="undefined"||gt==="boolean")&&(D=null);var lt=!1;if(D===null)lt=!0;else switch(gt){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(D.$$typeof){case d:case e:lt=!0;break;case m:return lt=D._init,rt(lt(D._payload),V,at,nt,st)}}if(lt)return st=st(D),lt=nt===""?"."+et(D,0):nt,B(st)?(at="",lt!=null&&(at=lt.replace(Z,"$&/")+"/"),rt(st,V,at,"",function(wt){return wt})):st!=null&&(O(st)&&(st=H(st,at+(st.key==null||D&&D.key===st.key?"":(""+st.key).replace(Z,"$&/")+"/")+lt)),V.push(st)),1;lt=0;var mt=nt===""?".":nt+":";if(B(D))for(var ft=0;ft<D.length;ft++)nt=D[ft],gt=mt+et(nt,ft),lt+=rt(nt,V,at,gt,st);else if(ft=b(D),typeof ft=="function")for(D=ft.call(D),ft=0;!(nt=D.next()).done;)nt=nt.value,gt=mt+et(nt,ft++),lt+=rt(nt,V,at,gt,st);else if(gt==="object"){if(typeof D.then=="function")return rt(dt(D),V,at,nt,st);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return lt}function X(D,V,at){if(D==null)return D;var nt=[],st=0;return rt(D,nt,"","",function(gt){return V.call(at,gt,st++)}),nt}function $(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(at){(D._status===0||D._status===-1)&&(D._status=1,D._result=at)},function(at){(D._status===0||D._status===-1)&&(D._status=2,D._result=at)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var J=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function St(){}return Lt.Children={map:X,forEach:function(D,V,at){X(D,function(){V.apply(this,arguments)},at)},count:function(D){var V=0;return X(D,function(){V++}),V},toArray:function(D){return X(D,function(V){return V})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Lt.Component=M,Lt.Fragment=t,Lt.Profiler=r,Lt.PureComponent=N,Lt.StrictMode=n,Lt.Suspense=p,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Lt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Lt.cache=function(D){return function(){return D.apply(null,arguments)}},Lt.cloneElement=function(D,V,at){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var nt=_({},D.props),st=D.key,gt=void 0;if(V!=null)for(lt in V.ref!==void 0&&(gt=void 0),V.key!==void 0&&(st=""+V.key),V)!P.call(V,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&V.ref===void 0||(nt[lt]=V[lt]);var lt=arguments.length-2;if(lt===1)nt.children=at;else if(1<lt){for(var mt=Array(lt),ft=0;ft<lt;ft++)mt[ft]=arguments[ft+2];nt.children=mt}return G(D.type,st,void 0,void 0,gt,nt)},Lt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Lt.createElement=function(D,V,at){var nt,st={},gt=null;if(V!=null)for(nt in V.key!==void 0&&(gt=""+V.key),V)P.call(V,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(st[nt]=V[nt]);var lt=arguments.length-2;if(lt===1)st.children=at;else if(1<lt){for(var mt=Array(lt),ft=0;ft<lt;ft++)mt[ft]=arguments[ft+2];st.children=mt}if(D&&D.defaultProps)for(nt in lt=D.defaultProps,lt)st[nt]===void 0&&(st[nt]=lt[nt]);return G(D,gt,void 0,void 0,null,st)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(D){return{$$typeof:h,render:D}},Lt.isValidElement=O,Lt.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:$}},Lt.memo=function(D,V){return{$$typeof:g,type:D,compare:V===void 0?null:V}},Lt.startTransition=function(D){var V=U.T,at={};U.T=at;try{var nt=D(),st=U.S;st!==null&&st(at,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(St,J)}catch(gt){J(gt)}finally{U.T=V}},Lt.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Lt.use=function(D){return U.H.use(D)},Lt.useActionState=function(D,V,at){return U.H.useActionState(D,V,at)},Lt.useCallback=function(D,V){return U.H.useCallback(D,V)},Lt.useContext=function(D){return U.H.useContext(D)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(D,V){return U.H.useDeferredValue(D,V)},Lt.useEffect=function(D,V){return U.H.useEffect(D,V)},Lt.useId=function(){return U.H.useId()},Lt.useImperativeHandle=function(D,V,at){return U.H.useImperativeHandle(D,V,at)},Lt.useInsertionEffect=function(D,V){return U.H.useInsertionEffect(D,V)},Lt.useLayoutEffect=function(D,V){return U.H.useLayoutEffect(D,V)},Lt.useMemo=function(D,V){return U.H.useMemo(D,V)},Lt.useOptimistic=function(D,V){return U.H.useOptimistic(D,V)},Lt.useReducer=function(D,V,at){return U.H.useReducer(D,V,at)},Lt.useRef=function(D){return U.H.useRef(D)},Lt.useState=function(D){return U.H.useState(D)},Lt.useSyncExternalStore=function(D,V,at){return U.H.useSyncExternalStore(D,V,at)},Lt.useTransition=function(){return U.H.useTransition()},Lt.version="19.0.0",Lt}var X_;function Zd(){return X_||(X_=1,$v.exports=xx()),$v.exports}var Et=Zd();const Rx=Et.createContext({}),Mx="modulepreload",Lx=function(d){return"/quiz-concorso/"+d},Y_={},ao=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(t.map(p=>{if(p=Lx(p),p in Y_)return;Y_[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":Mx,g||(y.as="script"),y.crossOrigin="",y.href=p,h&&y.setAttribute("nonce",h),document.head.appendChild(y),g)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};var Dh={};Dh.d=(d,e)=>{for(var t in e)Dh.o(e,t)&&!Dh.o(d,t)&&Object.defineProperty(d,t,{enumerable:!0,get:e[t]})};Dh.o=(d,e)=>Object.prototype.hasOwnProperty.call(d,e);var Rt=globalThis.pdfjsLib={};Dh.d(Rt,{AbortException:()=>hl,AnnotationEditorLayer:()=>R0,AnnotationEditorParamsType:()=>Ct,AnnotationEditorType:()=>Dt,AnnotationEditorUIManager:()=>rl,AnnotationLayer:()=>RM,AnnotationMode:()=>Qa,ColorPicker:()=>ng,DOMSVGFactory:()=>$0,DrawLayer:()=>O0,FeatureTest:()=>_i,GlobalWorkerOptions:()=>fa,ImageKind:()=>Ep,InvalidPDFException:()=>NE,MissingPDFException:()=>ul,OPS:()=>Os,OutputScale:()=>_y,PDFDataRangeTransport:()=>M1,PDFDateString:()=>q0,PDFWorker:()=>oc,PasswordResponses:()=>kx,PermissionFlag:()=>Nx,PixelsPerInch:()=>wr,RenderingCancelledException:()=>U0,TextLayer:()=>Ph,UnexpectedResponseException:()=>Ng,Util:()=>yt,VerbosityLevel:()=>Lg,XfaLayer:()=>D1,build:()=>lM,createValidAbsoluteUrl:()=>Hx,fetchData:()=>Pg,getDocument:()=>JR,getFilenameFromUrl:()=>Yx,getPdfFilenameFromUrl:()=>Kx,getXfaPageViewport:()=>Qx,isDataScheme:()=>Fg,isPdfFile:()=>j0,noContextMenu:()=>Ts,normalizeUnicode:()=>Gx,setLayerDimensions:()=>al,shadow:()=>It,version:()=>oM});const di=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),OE=[1,0,0,1,0,0],yy=[.001,0,0,.001,0,0],Dx=1e7,Wv=1.35,Ji={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ox="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Nx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ri={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ep={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ne={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},ch={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Lg={ERRORS:0,WARNINGS:1,INFOS:5},Os={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},kx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Dg=Lg.WARNINGS;function Px(d){Number.isInteger(d)&&(Dg=d)}function Fx(){return Dg}function Og(d){Dg>=Lg.INFOS&&console.log(`Info: ${d}`)}function kt(d){Dg>=Lg.WARNINGS&&console.log(`Warning: ${d}`)}function re(d){throw new Error(d)}function He(d,e){d||re(e)}function zx(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Hx(d,e=null,t=null){if(!d)return null;try{if(t&&typeof d=="string"){if(t.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(t.tryConvertEncoding)try{d=qx(d)}catch{}}const n=e?new URL(d,e):new URL(d);if(zx(n))return n}catch{}return null}function It(d,e,t,n=!1){return Object.defineProperty(d,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Mr=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class by extends Mr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ay extends Mr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class NE extends Mr{constructor(e){super(e,"InvalidPDFException")}}class ul extends Mr{constructor(e){super(e,"MissingPDFException")}}class Ng extends Mr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Bx extends Mr{constructor(e){super(e,"FormatError")}}class hl extends Mr{constructor(e){super(e,"AbortException")}}function kE(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&re("Invalid argument for bytesToString");const e=d.length,t=8192;if(e<t)return String.fromCharCode.apply(null,d);const n=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),c=d.subarray(r,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function kg(d){typeof d!="string"&&re("Invalid argument for stringToBytes");const e=d.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=d.charCodeAt(n)&255;return t}function Ix(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function B0(d){const e=Object.create(null);for(const[t,n]of d)e[t]=n;return e}function Ux(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function jx(){try{return new Function(""),!0}catch{return!1}}class _i{static get isLittleEndian(){return It(this,"isLittleEndian",Ux())}static get isEvalSupported(){return It(this,"isEvalSupported",jx())}static get isOffscreenCanvasSupported(){return It(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?It(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):It(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return It(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Zv=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var va,wp,Sy;class yt{static makeHexColor(e,t,n){return`#${Zv[e]}${Zv[t]}${Zv[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),c=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],o[0],c[0]),Math.min(n[1],r[1],o[1],c[1]),Math.max(n[0],r[0],o[0],c[0]),Math.max(n[1],r[1],o[1],c[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],c=e[2]*t[1]+e[3]*t[3],h=(n+c)/2,p=Math.sqrt((n+c)**2-4*(n*c-o*r))/2,g=h+p||1,m=h-p||1;return[Math.sqrt(g),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[n,o,r,c]}static bezierBoundingBox(e,t,n,r,o,c,h,p,g){return g?(g[0]=Math.min(g[0],e,h),g[1]=Math.min(g[1],t,p),g[2]=Math.max(g[2],e,h),g[3]=Math.max(g[3],t,p)):g=[Math.min(e,h),Math.min(t,p),Math.max(e,h),Math.max(t,p)],w(this,va,Sy).call(this,e,n,o,h,t,r,c,p,3*(-e+3*(n-o)+h),6*(e-2*n+o),3*(n-e),g),w(this,va,Sy).call(this,e,n,o,h,t,r,c,p,3*(-t+3*(r-c)+p),6*(t-2*r+c),3*(r-t),g),g}}va=new WeakSet,wp=function(e,t,n,r,o,c,h,p,g,m){if(g<=0||g>=1)return;const y=1-g,b=g*g,S=b*g,_=y*(y*(y*e+3*g*t)+3*b*n)+S*r,T=y*(y*(y*o+3*g*c)+3*b*h)+S*p;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],T),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],T)},Sy=function(e,t,n,r,o,c,h,p,g,m,y,b){if(Math.abs(g)<1e-12){Math.abs(m)>=1e-12&&w(this,va,wp).call(this,e,t,n,r,o,c,h,p,-y/m,b);return}const S=m**2-4*y*g;if(S<0)return;const _=Math.sqrt(S),T=2*g;w(this,va,wp).call(this,e,t,n,r,o,c,h,p,(-m+_)/T,b),w(this,va,wp).call(this,e,t,n,r,o,c,h,p,(-m-_)/T,b)},C(yt,va);function qx(d){return decodeURIComponent(escape(d))}let Jv=null,K_=null;function Gx(d){return Jv||(Jv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,K_=new Map([["ﬅ","ſt"]])),d.replaceAll(Jv,(e,t,n)=>t?t.normalize("NFKC"):K_.get(n))}function Vx(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const d=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(d);else for(let e=0;e<32;e++)d[e]=Math.floor(Math.random()*255);return kE(d)}const I0="pdfjs_internal_id_",Hn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Xx(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(kE(d))}const In="http://www.w3.org/2000/svg",so=class so{};Tt(so,"CSS",96),Tt(so,"PDF",72),Tt(so,"PDF_TO_CSS_UNITS",so.CSS/so.PDF);let wr=so;async function Pg(d,e="text"){if(fh(d,document.baseURI)){const t=await fetch(d);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Jd{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=o;const h=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let g,m,y,b;switch(n%=360,n<0&&(n+=360),n){case 180:g=-1,m=0,y=0,b=1;break;case 90:g=0,m=1,y=1,b=0;break;case 270:g=0,m=-1,y=-1,b=0;break;case 0:g=1,m=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,b=-b);let S,_,T,M;g===0?(S=Math.abs(p-e[1])*t+r,_=Math.abs(h-e[0])*t+o,T=(e[3]-e[1])*t,M=(e[2]-e[0])*t):(S=Math.abs(h-e[0])*t+r,_=Math.abs(p-e[1])*t+o,T=(e[2]-e[0])*t,M=(e[3]-e[1])*t),this.transform=[g*t,m*t,y*t,b*t,S-g*t*h-y*t*p,_-m*t*h-b*t*p],this.width=T,this.height=M}get rawDims(){const{viewBox:e}=this;return It(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Jd({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return yt.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=yt.applyTransform([e[0],e[1]],this.transform),n=yt.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return yt.applyInverseTransform([e,t],this.transform)}}class U0 extends Mr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Fg(d){const e=d.length;let t=0;for(;t<e&&d[t].trim()==="";)t++;return d.substring(t,t+5).toLowerCase()==="data:"}function j0(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function Yx(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function Kx(d,e="document.pdf"){if(typeof d!="string")return e;if(Fg(d))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(d);let o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Q_{constructor(){Tt(this,"started",Object.create(null));Tt(this,"times",[])}time(e){e in this.started&&kt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||kt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}}function fh(d,e){try{const{protocol:t}=e?new URL(d,e):new URL(d);return t==="http:"||t==="https:"}catch{return!1}}function Ts(d){d.preventDefault()}function $_(d){console.log("Deprecated API usage: "+d)}var zh;class q0{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,zh)||E(this,zh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,zh).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let p=parseInt(t[6],10);p=p>=0&&p<=59?p:0;const g=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,g==="-"?(c+=m,h+=y):g==="+"&&(c-=m,h-=y),new Date(Date.UTC(n,r,o,c,h,p))}}zh=new WeakMap,C(q0,zh);function Qx(d,{scale:e=1,rotation:t=0}){const{width:n,height:r}=d.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Jd({viewBox:o,scale:e,rotation:t})}function G0(d){if(d.startsWith("#")){const e=parseInt(d.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(e=>parseInt(e)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(kt(`Not a valid color format: "${d}"`),[0,0,0])}function $x(d){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of d.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;d.set(t,G0(n))}e.remove()}function pe(d){const{a:e,b:t,c:n,d:r,e:o,f:c}=d.getTransform();return[e,t,n,r,o,c]}function Bn(d){const{a:e,b:t,c:n,d:r,e:o,f:c}=d.getTransform().invertSelf();return[e,t,n,r,o,c]}function al(d,e,t=!1,n=!0){if(e instanceof Jd){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:c}=d,h=_i.isCSSRoundSupported,p=`var(--scale-factor) * ${r}px`,g=`var(--scale-factor) * ${o}px`,m=h?`round(down, ${p}, var(--scale-round-x, 1px))`:`calc(${p})`,y=h?`round(down, ${g}, var(--scale-round-y, 1px))`:`calc(${g})`;!t||e.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}n&&d.setAttribute("data-main-rotation",e.rotation)}class _y{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var $a,lo,Ns,co,Hh,Bh,fg,PE,Ei,FE,zE,Tp,HE,wy;const Un=class Un{constructor(e){C(this,Ei);C(this,$a,null);C(this,lo,null);C(this,Ns);C(this,co,null);C(this,Hh,null);E(this,Ns,e),u(Un,Bh)||E(Un,Bh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=E(this,$a,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Ns)._uiManager._signal;e.addEventListener("contextmenu",Ts,{signal:t}),e.addEventListener("pointerdown",w(Un,fg,PE),{signal:t});const n=E(this,co,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,Ns).toolbarPosition;if(r){const{style:o}=e,c=u(this,Ns)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,Ei,HE).call(this),e}get div(){return u(this,$a)}hide(){var e;u(this,$a).classList.add("hidden"),(e=u(this,lo))==null||e.hideDropdown()}show(){var e;u(this,$a).classList.remove("hidden"),(e=u(this,Hh))==null||e.shown()}async addAltText(e){const t=await e.render();w(this,Ei,Tp).call(this,t),u(this,co).prepend(t,u(this,Ei,wy)),E(this,Hh,e)}addColorPicker(e){E(this,lo,e);const t=e.renderButton();w(this,Ei,Tp).call(this,t),u(this,co).prepend(t,u(this,Ei,wy))}remove(){var e;u(this,$a).remove(),(e=u(this,lo))==null||e.destroy(),E(this,lo,null)}};$a=new WeakMap,lo=new WeakMap,Ns=new WeakMap,co=new WeakMap,Hh=new WeakMap,Bh=new WeakMap,fg=new WeakSet,PE=function(e){e.stopPropagation()},Ei=new WeakSet,FE=function(e){u(this,Ns)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},zE=function(e){u(this,Ns)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Tp=function(e){const t=u(this,Ns)._uiManager._signal;e.addEventListener("focusin",w(this,Ei,FE).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",w(this,Ei,zE).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ts,{signal:t})},HE=function(){const{editorType:e,_uiManager:t}=u(this,Ns),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Un,Bh)[e]),w(this,Ei,Tp).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,co).append(n)},wy=function(){const e=document.createElement("div");return e.className="divider",e},C(Un,fg),C(Un,Bh,null);let Ey=Un;var Ih,uo,ho,xr,BE,IE,UE;class Wx{constructor(e){C(this,xr);C(this,Ih,null);C(this,uo,null);C(this,ho);E(this,ho,e)}show(e,t,n){const[r,o]=w(this,xr,IE).call(this,t,n),{style:c}=u(this,uo)||E(this,uo,w(this,xr,BE).call(this));e.append(u(this,uo)),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,uo).remove()}}Ih=new WeakMap,uo=new WeakMap,ho=new WeakMap,xr=new WeakSet,BE=function(){const e=E(this,uo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ts,{signal:u(this,ho)._signal});const t=E(this,Ih,document.createElement("div"));return t.className="buttons",e.append(t),w(this,xr,UE).call(this),e},IE=function(e,t){let n=0,r=0;for(const o of e){const c=o.y+o.height;if(c<n)continue;const h=o.x+(t?o.width:0);if(c>n){r=h,n=c;continue}t?h>r&&(r=h):h<r&&(r=h)}return[t?1-r:r,n]},UE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,ho)._signal;e.addEventListener("contextmenu",Ts,{signal:n}),e.addEventListener("click",()=>{u(this,ho).highlightSelection("floating_button")},{signal:n}),u(this,Ih).append(e)};function eg(d,e,t){for(const n of t)e.addEventListener(n,d[n].bind(d))}function Zx(d){return Math.round(Math.min(255,Math.max(1,255*d))).toString(16).padStart(2,"0")}var pg;class Jx{constructor(){C(this,pg,0)}get id(){return`${Ox}${yi(this,pg)._++}`}}pg=new WeakMap;var dc,Uh,li,fc,Cp;const nb=class nb{constructor(){C(this,fc);C(this,dc,Vx());C(this,Uh,0);C(this,li,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return It(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:o}=e;return w(this,fc,Cp).call(this,`${t}_${n}_${r}_${o}`,e)}async getFromUrl(e){return w(this,fc,Cp).call(this,e,e)}async getFromBlob(e,t){const n=await t;return w(this,fc,Cp).call(this,e,n)}async getFromId(e){u(this,li)||E(this,li,new Map);const t=u(this,li).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,li)||E(this,li,new Map);let n=u(this,li).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,dc)}_${yi(this,Uh)._++}`,refCounter:1,isSvg:!1},u(this,li).set(e,n),u(this,li).set(n.id,n),n}getSvgUrl(e){const t=u(this,li).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,li)||E(this,li,new Map);const t=u(this,li).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,dc)}_`)}};dc=new WeakMap,Uh=new WeakMap,li=new WeakMap,fc=new WeakSet,Cp=async function(e,t){u(this,li)||E(this,li,new Map);let n=u(this,li).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,dc)}_${yi(this,Uh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Pg(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=nb._isSVGFittingCanvas,c=new FileReader,h=new Image,p=new Promise((g,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,g()},c.onload=async()=>{const y=n.svgUrl=c.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=m});c.readAsDataURL(r),await p}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){console.error(r),n=null}return u(this,li).set(e,n),n&&u(this,li).set(n.id,n),n};let Ty=nb;var Ge,Wa,jh,Ve;class tR{constructor(e=128){C(this,Ge,[]);C(this,Wa,!1);C(this,jh);C(this,Ve,-1);E(this,jh,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(r&&e(),u(this,Wa))return;const p={cmd:e,undo:t,post:n,type:o};if(u(this,Ve)===-1){u(this,Ge).length>0&&(u(this,Ge).length=0),E(this,Ve,0),u(this,Ge).push(p);return}if(c&&u(this,Ge)[u(this,Ve)].type===o){h&&(p.undo=u(this,Ge)[u(this,Ve)].undo),u(this,Ge)[u(this,Ve)]=p;return}const g=u(this,Ve)+1;g===u(this,jh)?u(this,Ge).splice(0,1):(E(this,Ve,g),g<u(this,Ge).length&&u(this,Ge).splice(g)),u(this,Ge).push(p)}undo(){if(u(this,Ve)===-1)return;E(this,Wa,!0);const{undo:e,post:t}=u(this,Ge)[u(this,Ve)];e(),t==null||t(),E(this,Wa,!1),E(this,Ve,u(this,Ve)-1)}redo(){if(u(this,Ve)<u(this,Ge).length-1){E(this,Ve,u(this,Ve)+1),E(this,Wa,!0);const{cmd:e,post:t}=u(this,Ge)[u(this,Ve)];e(),t==null||t(),E(this,Wa,!1)}}hasSomethingToUndo(){return u(this,Ve)!==-1}hasSomethingToRedo(){return u(this,Ve)<u(this,Ge).length-1}destroy(){E(this,Ge,null)}}Ge=new WeakMap,Wa=new WeakMap,jh=new WeakMap,Ve=new WeakMap;var gg,jE;class tf{constructor(e){C(this,gg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=_i.platform;for(const[n,r,o={}]of e)for(const c of n){const h=c.startsWith("mac+");t&&h?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!h&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(w(this,gg,jE).call(this,t));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:h=null}}=n;h&&!h(e,t)||(r.bind(e,...c,t)(),o||(t.stopPropagation(),t.preventDefault()))}}gg=new WeakSet,jE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const mg=class mg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $x(e),It(this,"_colors",e)}convert(e){const t=G0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((o,c)=>o===t[c]))return mg._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?yt.makeHexColor(...t):e}};Tt(mg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Cy=mg;var pc,Vi,Pe,Je,gc,qn,mc,ks,Za,vc,fo,tn,Ps,po,qh,Gh,yc,Vh,en,Ja,bc,tr,sn,vg,er,Xh,ir,go,Yh,Kh,Xe,Kt,Gn,mo,Qh,$h,sr,nn,Vn,Wh,ms,ct,xp,xy,qE,GE,Rp,VE,XE,YE,Ry,KE,My,Ly,QE,bi,Xa,$E,WE,Dy,ZE,ph,Oy;const ac=class ac{constructor(e,t,n,r,o,c,h,p,g,m,y){C(this,ct);C(this,pc,new AbortController);C(this,Vi,null);C(this,Pe,new Map);C(this,Je,new Map);C(this,gc,null);C(this,qn,null);C(this,mc,null);C(this,ks,new tR);C(this,Za,null);C(this,vc,0);C(this,fo,new Set);C(this,tn,null);C(this,Ps,null);C(this,po,new Set);C(this,qh,!1);C(this,Gh,!1);C(this,yc,!1);C(this,Vh,null);C(this,en,null);C(this,Ja,null);C(this,bc,null);C(this,tr,!1);C(this,sn,null);C(this,vg,new Jx);C(this,er,!1);C(this,Xh,!1);C(this,ir,null);C(this,go,null);C(this,Yh,null);C(this,Kh,null);C(this,Xe,Dt.NONE);C(this,Kt,new Set);C(this,Gn,null);C(this,mo,null);C(this,Qh,null);C(this,$h,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,sr,[0,0]);C(this,nn,null);C(this,Vn,null);C(this,Wh,null);C(this,ms,null);const b=this._signal=u(this,pc).signal;E(this,Vn,e),E(this,Wh,t),E(this,gc,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:b}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),r._on("setpreference",this.onSetPreference.bind(this),{signal:b}),r._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:b}),w(this,ct,VE).call(this),w(this,ct,QE).call(this),w(this,ct,Ry).call(this),E(this,qn,o.annotationStorage),E(this,Vh,o.filterFactory),E(this,mo,c),E(this,bc,h||null),E(this,qh,p),E(this,Gh,g),E(this,yc,m),E(this,Kh,y||null),this.viewParameters={realScale:wr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ac.prototype,t=c=>u(c,Vn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:p}=h;return p!=="text"&&p!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return It(this,"_keyboardManager",new tf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&u(c,Vn).contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&u(c,Vn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,n,r;(e=u(this,ms))==null||e.resolve(),E(this,ms,null),(t=u(this,pc))==null||t.abort(),E(this,pc,null),this._signal=null;for(const o of u(this,Je).values())o.destroy();u(this,Je).clear(),u(this,Pe).clear(),u(this,po).clear(),E(this,Vi,null),u(this,Kt).clear(),u(this,ks).destroy(),(n=u(this,gc))==null||n.destroy(),(r=u(this,sn))==null||r.hide(),E(this,sn,null),u(this,en)&&(clearTimeout(u(this,en)),E(this,en,null)),u(this,nn)&&(clearTimeout(u(this,nn)),E(this,nn,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Kh)}get useNewAltTextFlow(){return u(this,Gh)}get useNewAltTextWhenAddingImage(){return u(this,yc)}get hcmFilter(){return It(this,"hcmFilter",u(this,mo)?u(this,Vh).addHCMFilter(u(this,mo).foreground,u(this,mo).background):"none")}get direction(){return It(this,"direction",getComputedStyle(u(this,Vn)).direction)}get highlightColors(){return It(this,"highlightColors",u(this,bc)?new Map(u(this,bc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return It(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){E(this,Yh,e)}editAltText(e,t=!1){var n;(n=u(this,gc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,yc,t);break}}onPageChanging({pageNumber:e}){E(this,vc,e-1)}focusMainContainer(){u(this,Vn).focus()}findParent(e,t){for(const n of u(this,Je).values()){const{x:r,y:o,width:c,height:h}=n.div.getBoundingClientRect();if(e>=r&&e<=r+c&&t>=o&&t<=o+h)return n}return null}disableUserSelect(e=!1){u(this,Wh).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,po).add(e)}removeShouldRescale(e){u(this,po).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*wr.PDF_TO_CSS_UNITS;for(const t of u(this,po))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:c}=t,h=t.toString(),g=w(this,ct,xp).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;t.empty();const y=w(this,ct,xy).call(this,g),b=u(this,Xe)===Dt.NONE,S=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:c,text:h}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(Dt.HIGHLIGHT,S);return}S()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,qn)&&!u(this,qn).has(e.id)&&u(this,qn).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,tr)&&(E(this,tr,!1),w(this,ct,Rp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Kt))if(t.div.contains(e)){E(this,go,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,go))return;const[e,t]=u(this,go);E(this,go,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){w(this,ct,Ry).call(this),w(this,ct,My).call(this)}removeEditListeners(){w(this,ct,KE).call(this),w(this,ct,Ly).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Ps))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Ps))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,Vi))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Kt)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of u(this,Ps))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){kt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const p of n){const g=await r.deserialize(p);if(!g)return;o.push(g)}const c=()=>{for(const p of o)w(this,ct,Dy).call(this,p);w(this,ct,Oy).call(this,o)},h=()=>{for(const p of o)p.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(o){kt(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Xe)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&ac._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,tr)&&(E(this,tr,!1),w(this,ct,Rp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(w(this,ct,XE).call(this),w(this,ct,My).call(this),w(this,ct,bi).call(this,{isEditing:u(this,Xe)!==Dt.NONE,isEmpty:w(this,ct,ph).call(this),hasSomethingToUndo:u(this,ks).hasSomethingToUndo(),hasSomethingToRedo:u(this,ks).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,ct,YE).call(this),w(this,ct,Ly).call(this),w(this,ct,bi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Ps)){E(this,Ps,e);for(const t of u(this,Ps))w(this,ct,Xa).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,vg).id}get currentLayer(){return u(this,Je).get(u(this,vc))}getLayer(e){return u(this,Je).get(e)}get currentPageIndex(){return u(this,vc)}addLayer(e){u(this,Je).set(e.pageIndex,e),u(this,er)?e.enable():e.disable()}removeLayer(e){u(this,Je).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(u(this,Xe)!==e&&!(u(this,ms)&&(await u(this,ms).promise,!u(this,ms)))){if(E(this,ms,Promise.withResolvers()),E(this,Xe,e),e===Dt.NONE){this.setEditingState(!1),w(this,ct,WE).call(this),u(this,ms).resolve();return}this.setEditingState(!0),await w(this,ct,$E).call(this),this.unselectAll();for(const r of u(this,Je).values())r.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,ms).resolve();return}for(const r of u(this,Pe).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();u(this,ms).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,Xe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(u(this,Ps)){switch(e){case Ct.CREATE:this.currentLayer.addNewEditor();return;case Ct.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Yh))==null||n.updateColor(t);break;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Qh)||E(this,Qh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of u(this,Kt))r.updateParams(e,t);for(const r of u(this,Ps))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var o;for(const c of u(this,Pe).values())c.editorType===e&&c.show(t);(((o=u(this,Qh))==null?void 0:o.get(Ct.HIGHLIGHT_SHOW_ALL))??!0)!==t&&w(this,ct,Xa).call(this,[[Ct.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Xh)!==e){E(this,Xh,e);for(const t of u(this,Je).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,Pe).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,Pe).get(e)}addEditor(e){u(this,Pe).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,en)&&clearTimeout(u(this,en)),E(this,en,setTimeout(()=>{this.focusMainContainer(),E(this,en,null)},0))),u(this,Pe).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,fo).has(e.annotationElementId))&&((t=u(this,qn))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,fo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,fo).has(e)}removeDeletedAnnotationElement(e){u(this,fo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Vi)!==e&&(E(this,Vi,e),e&&w(this,ct,Xa).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ct,ZE)===e&&w(this,ct,Xa).call(this,e.propertiesToUpdate)}toggleSelected(e){if(u(this,Kt).has(e)){u(this,Kt).delete(e),e.unselect(),w(this,ct,bi).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Kt).add(e),e.select(),w(this,ct,Xa).call(this,e.propertiesToUpdate),w(this,ct,bi).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of u(this,Kt))t!==e&&t.unselect();u(this,Kt).clear(),u(this,Kt).add(e),e.select(),w(this,ct,Xa).call(this,e.propertiesToUpdate),w(this,ct,bi).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Kt).has(e)}get firstSelectedEditor(){return u(this,Kt).values().next().value}unselect(e){e.unselect(),u(this,Kt).delete(e),w(this,ct,bi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Kt).size!==0}get isEnterHandled(){return u(this,Kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,ks).undo(),w(this,ct,bi).call(this,{hasSomethingToUndo:u(this,ks).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,ct,ph).call(this)})}redo(){u(this,ks).redo(),w(this,ct,bi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,ks).hasSomethingToRedo(),isEmpty:w(this,ct,ph).call(this)})}addCommands(e){u(this,ks).add(e),w(this,ct,bi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,ct,ph).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...u(this,Kt)],t=()=>{for(const r of e)r.remove()},n=()=>{for(const r of e)w(this,ct,Dy).call(this,r)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Vi))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Vi)||this.hasSelection}selectAll(){for(const e of u(this,Kt))e.commit();w(this,ct,Oy).call(this,u(this,Pe).values())}unselectAll(){if(!(u(this,Vi)&&(u(this,Vi).commitOrRemove(),u(this,Xe)!==Dt.NONE))&&this.hasSelection){for(const e of u(this,Kt))e.unselect();u(this,Kt).clear(),w(this,ct,bi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,sr)[0]+=e,u(this,sr)[1]+=t;const[r,o]=u(this,sr),c=[...u(this,Kt)],h=1e3;u(this,nn)&&clearTimeout(u(this,nn)),E(this,nn,setTimeout(()=>{E(this,nn,null),u(this,sr)[0]=u(this,sr)[1]=0,this.addCommands({cmd:()=>{for(const p of c)u(this,Pe).has(p.id)&&p.translateInPage(r,o)},undo:()=>{for(const p of c)u(this,Pe).has(p.id)&&p.translateInPage(-r,-o)},mustExec:!1})},h));for(const p of c)p.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,tn,new Map);for(const e of u(this,Kt))u(this,tn).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,tn))return!1;this.disableUserSelect(!1);const e=u(this,tn);E(this,tn,null);let t=!1;for(const[{x:r,y:o,pageIndex:c},h]of e)h.newX=r,h.newY=o,h.newPageIndex=c,t||(t=r!==h.savedX||o!==h.savedY||c!==h.savedPageIndex);if(!t)return!1;const n=(r,o,c,h)=>{if(u(this,Pe).has(r.id)){const p=u(this,Je).get(h);p?r._setParentAndPosition(p,o,c):(r.pageIndex=h,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:h}]of e)n(r,o,c,h)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:h}]of e)n(r,o,c,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,tn))for(const n of u(this,tn).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Vi)===e}getActive(){return u(this,Vi)}getMode(){return u(this,Xe)}get imageManager(){return It(this,"imageManager",new Ty)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let g=0,m=t.rangeCount;g<m;g++)if(!e.contains(t.getRangeAt(g).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:c}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(g,m,y,b)=>({x:(m-r)/c,y:1-(g+y-n)/o,width:b/c,height:y/o});break;case"180":h=(g,m,y,b)=>({x:1-(g+y-n)/o,y:1-(m+b-r)/c,width:y/o,height:b/c});break;case"270":h=(g,m,y,b)=>({x:1-(m+b-r)/c,y:(g-n)/o,width:b/c,height:y/o});break;default:h=(g,m,y,b)=>({x:(g-n)/o,y:(m-r)/c,width:y/o,height:b/c});break}const p=[];for(let g=0,m=t.rangeCount;g<m;g++){const y=t.getRangeAt(g);if(!y.collapsed)for(const{x:b,y:S,width:_,height:T}of y.getClientRects())_===0||T===0||p.push(h(b,S,_,T))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,mc)||E(this,mc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,mc))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,mc))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,qn).getRawValue(t);n&&(u(this,Xe)===Dt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};pc=new WeakMap,Vi=new WeakMap,Pe=new WeakMap,Je=new WeakMap,gc=new WeakMap,qn=new WeakMap,mc=new WeakMap,ks=new WeakMap,Za=new WeakMap,vc=new WeakMap,fo=new WeakMap,tn=new WeakMap,Ps=new WeakMap,po=new WeakMap,qh=new WeakMap,Gh=new WeakMap,yc=new WeakMap,Vh=new WeakMap,en=new WeakMap,Ja=new WeakMap,bc=new WeakMap,tr=new WeakMap,sn=new WeakMap,vg=new WeakMap,er=new WeakMap,Xh=new WeakMap,ir=new WeakMap,go=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,Xe=new WeakMap,Kt=new WeakMap,Gn=new WeakMap,mo=new WeakMap,Qh=new WeakMap,$h=new WeakMap,sr=new WeakMap,nn=new WeakMap,Vn=new WeakMap,Wh=new WeakMap,ms=new WeakMap,ct=new WeakSet,xp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,Je).values())if(n.hasTextLayer(e))return n;return null},qE=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=w(this,ct,xp).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,sn)||E(this,sn,new Wx(this)),u(this,sn).show(n,r,this.direction==="ltr"))},GE=function(){var o,c,h;const e=document.getSelection();if(!e||e.isCollapsed){u(this,Gn)&&((o=u(this,sn))==null||o.hide(),E(this,Gn,null),w(this,ct,bi).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,Gn))return;const r=w(this,ct,xp).call(this,e).closest(".textLayer");if(!r){u(this,Gn)&&((c=u(this,sn))==null||c.hide(),E(this,Gn,null),w(this,ct,bi).call(this,{hasSelectedText:!1}));return}if((h=u(this,sn))==null||h.hide(),E(this,Gn,t),w(this,ct,bi).call(this,{hasSelectedText:!0}),!(u(this,Xe)!==Dt.HIGHLIGHT&&u(this,Xe)!==Dt.NONE)&&(u(this,Xe)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,tr,this.isShiftKeyDown),!this.isShiftKeyDown)){const p=u(this,Xe)===Dt.HIGHLIGHT?w(this,ct,xy).call(this,r):null;p==null||p.toggleDrawing();const g=new AbortController,m=this.combinedSignal(g),y=b=>{b.type==="pointerup"&&b.button!==0||(g.abort(),p==null||p.toggleDrawing(!0),b.type==="pointerup"&&w(this,ct,Rp).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}},Rp=function(e=""){u(this,Xe)===Dt.HIGHLIGHT?this.highlightSelection(e):u(this,qh)&&w(this,ct,qE).call(this)},VE=function(){document.addEventListener("selectionchange",w(this,ct,GE).bind(this),{signal:this._signal})},XE=function(){if(u(this,Ja))return;E(this,Ja,new AbortController);const e=this.combinedSignal(u(this,Ja));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},YE=function(){var e;(e=u(this,Ja))==null||e.abort(),E(this,Ja,null)},Ry=function(){if(u(this,ir))return;E(this,ir,new AbortController);const e=this.combinedSignal(u(this,ir));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},KE=function(){var e;(e=u(this,ir))==null||e.abort(),E(this,ir,null)},My=function(){if(u(this,Za))return;E(this,Za,new AbortController);const e=this.combinedSignal(u(this,Za));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ly=function(){var e;(e=u(this,Za))==null||e.abort(),E(this,Za,null)},QE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},bi=function(e){Object.entries(e).some(([n,r])=>u(this,$h)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,$h),e)}),u(this,Xe)===Dt.HIGHLIGHT&&e.hasSelectedEditor===!1&&w(this,ct,Xa).call(this,[[Ct.HIGHLIGHT_FREE,!0]]))},Xa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},$E=async function(){if(!u(this,er)){E(this,er,!0);const e=[];for(const t of u(this,Je).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Pe).values())t.enable()}},WE=function(){if(this.unselectAll(),u(this,er)){E(this,er,!1);for(const e of u(this,Je).values())e.disable();for(const e of u(this,Pe).values())e.disable()}},Dy=function(e){const t=u(this,Je).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},ZE=function(){let e=null;for(e of u(this,Kt));return e},ph=function(){if(u(this,Pe).size===0)return!0;if(u(this,Pe).size===1)for(const e of u(this,Pe).values())return e.isEmpty();return!1},Oy=function(e){for(const t of u(this,Kt))t.unselect();u(this,Kt).clear();for(const t of e)t.isEmpty()||(u(this,Kt).add(t),t.select());w(this,ct,bi).call(this,{hasSelectedEditor:this.hasSelection})},Tt(ac,"TRANSLATE_SMALL",1),Tt(ac,"TRANSLATE_BIG",10);let rl=ac;var Ye,an,Fs,Ac,rn,Xi,Sc,on,Li,Xn,vo,ln,nr,Ys,gh,Mp;const Ai=class Ai{constructor(e){C(this,Ys);C(this,Ye,null);C(this,an,!1);C(this,Fs,null);C(this,Ac,null);C(this,rn,null);C(this,Xi,null);C(this,Sc,!1);C(this,on,null);C(this,Li,null);C(this,Xn,null);C(this,vo,null);C(this,ln,!1);E(this,Li,e),E(this,ln,e._uiManager.useNewAltTextFlow),u(Ai,nr)||E(Ai,nr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ai._l10n??(Ai._l10n=e)}async render(){const e=E(this,Fs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,Ac,document.createElement("span"));e.append(t),u(this,ln)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Ai,nr).missing),t.setAttribute("data-l10n-id",u(Ai,nr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,Li)._uiManager._signal;e.addEventListener("contextmenu",Ts,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),u(this,Li)._uiManager.editAltText(u(this,Li)),u(this,ln)&&u(this,Li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Ys,gh)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(E(this,Sc,!0),r(o))},{signal:n}),await w(this,Ys,Mp).call(this),e}finish(){u(this,Fs)&&(u(this,Fs).focus({focusVisible:u(this,Sc)}),E(this,Sc,!1))}isEmpty(){return u(this,ln)?u(this,Ye)===null:!u(this,Ye)&&!u(this,an)}hasData(){return u(this,ln)?u(this,Ye)!==null||!!u(this,Xn):this.isEmpty()}get guessedText(){return u(this,Xn)}async setGuessedText(e){u(this,Ye)===null&&(E(this,Xn,e),E(this,vo,await Ai._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),w(this,Ys,Mp).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,ln)||u(this,Ye)){(t=u(this,on))==null||t.remove(),E(this,on,null);return}if(!u(this,on)){const n=E(this,on,document.createElement("div"));n.className="noAltTextBadge",u(this,Li).div.append(n)}u(this,on).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Ye);return!e&&u(this,Xn)===t&&(t=u(this,vo)),{altText:t,decorative:u(this,an),guessedText:u(this,Xn),textWithDisclaimer:u(this,vo)}}get data(){return{altText:u(this,Ye),decorative:u(this,an)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(E(this,Xn,n),E(this,vo,r)),!(u(this,Ye)===e&&u(this,an)===t)&&(o||(E(this,Ye,e),E(this,an,t)),w(this,Ys,Mp).call(this))}toggle(e=!1){u(this,Fs)&&(!e&&u(this,Xi)&&(clearTimeout(u(this,Xi)),E(this,Xi,null)),u(this,Fs).disabled=!e)}shown(){u(this,Li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Ys,gh)}})}destroy(){var e,t;(e=u(this,Fs))==null||e.remove(),E(this,Fs,null),E(this,Ac,null),E(this,rn,null),(t=u(this,on))==null||t.remove(),E(this,on,null)}};Ye=new WeakMap,an=new WeakMap,Fs=new WeakMap,Ac=new WeakMap,rn=new WeakMap,Xi=new WeakMap,Sc=new WeakMap,on=new WeakMap,Li=new WeakMap,Xn=new WeakMap,vo=new WeakMap,ln=new WeakMap,nr=new WeakMap,Ys=new WeakSet,gh=function(){return u(this,Ye)&&"added"||u(this,Ye)===null&&this.guessedText&&"review"||"missing"},Mp=async function(){var r,o,c;const e=u(this,Fs);if(!e)return;if(u(this,ln)){if(e.classList.toggle("done",!!u(this,Ye)),e.setAttribute("data-l10n-id",u(Ai,nr)[u(this,Ys,gh)]),(r=u(this,Ac))==null||r.setAttribute("data-l10n-id",u(Ai,nr)[`${u(this,Ys,gh)}-label`]),!u(this,Ye)){(o=u(this,rn))==null||o.remove();return}}else{if(!u(this,Ye)&&!u(this,an)){e.classList.remove("done"),(c=u(this,rn))==null||c.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,rn);if(!t){E(this,rn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Li).id}`;const h=100,p=u(this,Li)._uiManager._signal;p.addEventListener("abort",()=>{clearTimeout(u(this,Xi)),E(this,Xi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,Xi,setTimeout(()=>{E(this,Xi,null),u(this,rn).classList.add("show"),u(this,Li)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:p}),e.addEventListener("mouseleave",()=>{var g;u(this,Xi)&&(clearTimeout(u(this,Xi)),E(this,Xi,null)),(g=u(this,rn))==null||g.classList.remove("show")},{signal:p})}u(this,an)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Ye)),t.parentNode||e.append(t);const n=u(this,Li).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},C(Ai,nr,null),Tt(Ai,"_l10n",null);let ig=Ai;var yo,zs,de,_c,bo,ti,Ao,ar,Zh,So,rr,Jh,_o,Yn,cn,Ec,wc,vs,td,yg,Ot,Ny,ed,ky,Py,JE,t1,Fy,zy,Hy,e1,By,i1,s1,n1,Iy,mh;const Yt=class Yt{constructor(e){C(this,Ot);C(this,yo,null);C(this,zs,null);C(this,de,null);C(this,_c,!1);C(this,bo,!1);C(this,ti,null);C(this,Ao,null);C(this,ar,null);C(this,Zh,"");C(this,So,!1);C(this,rr,null);C(this,Jh,!1);C(this,_o,!1);C(this,Yn,!1);C(this,cn,null);C(this,Ec,0);C(this,wc,0);C(this,vs,null);Tt(this,"_editToolbar",null);Tt(this,"_initialOptions",Object.create(null));Tt(this,"_initialData",null);Tt(this,"_isVisible",!0);Tt(this,"_uiManager",null);Tt(this,"_focusEventsAllowed",!0);C(this,td,!1);C(this,yg,Yt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,c];const[h,p]=this.parentDimensions;this.x=e.x/h,this.y=e.y/p,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Yt.prototype._resizeWithKeyboard,t=rl.TRANSLATE_SMALL,n=rl.TRANSLATE_BIG;return It(this,"_resizerKeyboardManager",new tf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Yt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return It(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new eR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Yt._l10n??(Yt._l10n=e),Yt._l10nResizer||(Yt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Yt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Yt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,td)}set _isDraggable(e){var t;E(this,td,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,yg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):w(this,Ot,mh).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,So)?E(this,So,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[o,c]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/c,this.fixAndSetPosition()}translate(e,t){w(this,Ot,Ny).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,rr)||E(this,rr,[this.x,this.y]),w(this,Ot,Ny).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,rr)||E(this,rr,[this.x,this.y]);const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[h,p]=this.getBaseTranslation();o+=h,c+=p,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,rr)&&(u(this,rr)[0]!==this.x||u(this,rr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Yt,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:r,y:o,width:c,height:h}=this;if(c*=t,h*=n,r*=t,o*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-c,r)),o=Math.max(0,Math.min(n-h,o));break;case 90:r=Math.max(0,Math.min(t-h,r)),o=Math.min(n,Math.max(c,o));break;case 180:r=Math.min(t,Math.max(c,r)),o=Math.min(n,Math.max(h,o));break;case 270:r=Math.min(t,Math.max(h,r)),o=Math.max(0,Math.min(n-c,o));break}this.x=r/=t,this.y=o/=n;const[p,g]=this.getBaseTranslation();r+=p,o+=g;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return w(n=Yt,ed,ky).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return w(n=Yt,ed,ky).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,u(this,bo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),o=!u(this,bo)&&t.endsWith("%");if(r&&o)return;const[c,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!u(this,bo)&&!o&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=u(this,de))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,_o)?this._editToolbar:(this._editToolbar=new Ey(this),this.div.append(this._editToolbar.render()),u(this,de)&&await this._editToolbar.addAltText(u(this,de)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,de))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,de)||(ig.initialize(Yt._l10n),E(this,de,new ig(this)),u(this,yo)&&(u(this,de).data=u(this,yo),E(this,yo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,de))==null?void 0:e.data}set altTextData(e){u(this,de)&&(u(this,de).data=e)}get guessedAltText(){var e;return(e=u(this,de))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,de))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,de))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,de)&&!u(this,de).isEmpty()}hasAltTextData(){var e;return((e=u(this,de))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,_c)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),w(this,Ot,By).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),eg(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=_i.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,So,!0),this._isDraggable){w(this,Ot,e1).call(this,e);return}w(this,Ot,Hy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){u(this,cn)&&clearTimeout(u(this,cn)),E(this,cn,setTimeout(()=>{var e;E(this,cn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[h,p]=this.pageTranslation,g=e/r,m=t/r,y=this.x*o,b=this.y*c,S=this.width*o,_=this.height*c;switch(n){case 0:return[y+g+h,c-b-m-_+p,y+g+S+h,c-b-m+p];case 90:return[y+m+h,c-b+g+p,y+m+_+h,c-b+g+S+p];case 180:return[y-g-S+h,c-b+m+p,y-g+h,c-b+m+_+p];case 270:return[y-m-_+h,c-b-g-S+p,y-m+h,c-b-g+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,o,c]=e,h=o-n,p=c-r;switch(this.rotation){case 0:return[n,t-c,h,p];case 90:return[n,t-r,p,h];case 180:return[o,t-r,h,p];case 270:return[o,t-c,p,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){E(this,_o,!0)}disableEditMode(){E(this,_o,!1)}isInEditMode(){return u(this,_o)}shouldGetKeyboardEvents(){return u(this,Yn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){w(this,Ot,By).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){re("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,E(r,yo,e.accessibilityData);const[o,c]=r.pageDimensions,[h,p,g,m]=r.getRectInCurrentCoords(e.rect,c);return r.x=h/o,r.y=p/c,r.width=g/o,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=u(this,ar))==null||e.abort(),E(this,ar,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,cn)&&(clearTimeout(u(this,cn)),E(this,cn,null)),w(this,Ot,mh).call(this),this.removeEditToolbar(),u(this,vs)){for(const t of u(this,vs).values())clearTimeout(t);E(this,vs,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,Ot,JE).call(this),u(this,ti).classList.remove("hidden"),eg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Ao,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,ti).children;if(!u(this,zs)){E(this,zs,Array.from(t));const c=w(this,Ot,i1).bind(this),h=w(this,Ot,s1).bind(this),p=this._uiManager._signal;for(const g of u(this,zs)){const m=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",c,{signal:p}),g.addEventListener("blur",h,{signal:p}),g.addEventListener("focus",w(this,Ot,n1).bind(this,m),{signal:p}),g.setAttribute("data-l10n-id",Yt._l10nResizer[m])}}const n=u(this,zs)[0];let r=0;for(const c of t){if(c===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(u(this,zs).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)u(this,ti).append(u(this,ti).firstChild);else if(o>r)for(let h=0;h<o-r;h++)u(this,ti).firstChild.before(u(this,ti).lastChild);let c=0;for(const h of t){const g=u(this,zs)[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Yt._l10nResizer[g])}}w(this,Ot,Iy).call(this,0),E(this,Yn,!0),u(this,ti).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Yn)&&w(this,Ot,zy).call(this,u(this,Zh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){w(this,Ot,mh).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,de))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,o;(e=u(this,ti))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=u(this,de))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,Jh)}set isEditing(e){E(this,Jh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,bo,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,vs)||E(this,vs,new Map);const{action:n}=e;let r=u(this,vs).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,vs).delete(n),u(this,vs).size===0&&E(this,vs,null)},Yt._telemetryTimeout),u(this,vs).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,_c,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,_c,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};yo=new WeakMap,zs=new WeakMap,de=new WeakMap,_c=new WeakMap,bo=new WeakMap,ti=new WeakMap,Ao=new WeakMap,ar=new WeakMap,Zh=new WeakMap,So=new WeakMap,rr=new WeakMap,Jh=new WeakMap,_o=new WeakMap,Yn=new WeakMap,cn=new WeakMap,Ec=new WeakMap,wc=new WeakMap,vs=new WeakMap,td=new WeakMap,yg=new WeakMap,Ot=new WeakSet,Ny=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this.fixAndSetPosition()},ed=new WeakSet,ky=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Py=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},JE=function(){if(u(this,ti))return;E(this,ti,document.createElement("div")),u(this,ti).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,ti).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",w(this,Ot,t1).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Ts,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,ti))},t1=function(e,t){var _;t.preventDefault();const{isMac:n}=_i.platform;if(t.button!==0||t.ctrlKey&&n)return;(_=u(this,de))==null||_.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,Ot,zy).bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",Ts,{signal:c});const h=this.x,p=this.y,g=this.width,m=this.height,y=this.parent.div.style.cursor,b=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const S=()=>{var T;o.abort(),this.parent.togglePointerEvents(!0),(T=u(this,de))==null||T.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=b,w(this,Ot,Fy).call(this,h,p,g,m)};window.addEventListener("pointerup",S,{signal:c}),window.addEventListener("blur",S,{signal:c})},Fy=function(e,t,n,r){const o=this.x,c=this.y,h=this.width,p=this.height;o===e&&c===t&&h===n&&p===r||this.addCommands({cmd:()=>{this.width=h,this.height=p,this.x=o,this.y=c;const[g,m]=this.parentDimensions;this.setDims(g*h,m*p),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[g,m]=this.parentDimensions;this.setDims(g*n,m*r),this.fixAndSetPosition()},mustExec:!0})},zy=function(e,t){const[n,r]=this.parentDimensions,o=this.x,c=this.y,h=this.width,p=this.height,g=Yt.MIN_SIZE/n,m=Yt.MIN_SIZE/r,y=$=>Math.round($*1e4)/1e4,b=w(this,Ot,Py).call(this,this.rotation),S=($,J)=>[b[0]*$+b[2]*J,b[1]*$+b[3]*J],_=w(this,Ot,Py).call(this,360-this.rotation),T=($,J)=>[_[0]*$+_[2]*J,_[1]*$+_[3]*J];let M,R,N=!1,k=!1;switch(e){case"topLeft":N=!0,M=($,J)=>[0,0],R=($,J)=>[$,J];break;case"topMiddle":M=($,J)=>[$/2,0],R=($,J)=>[$/2,J];break;case"topRight":N=!0,M=($,J)=>[$,0],R=($,J)=>[0,J];break;case"middleRight":k=!0,M=($,J)=>[$,J/2],R=($,J)=>[0,J/2];break;case"bottomRight":N=!0,M=($,J)=>[$,J],R=($,J)=>[0,0];break;case"bottomMiddle":M=($,J)=>[$/2,J],R=($,J)=>[$/2,0];break;case"bottomLeft":N=!0,M=($,J)=>[0,J],R=($,J)=>[$,0];break;case"middleLeft":k=!0,M=($,J)=>[0,J/2],R=($,J)=>[$,J/2];break}const B=M(h,p),U=R(h,p);let P=S(...U);const G=y(o+P[0]),H=y(c+P[1]);let O=1,K=1,[Z,et]=this.screenToPageTranslation(t.movementX,t.movementY);if([Z,et]=T(Z/n,et/r),N){const $=Math.hypot(h,p);O=K=Math.max(Math.min(Math.hypot(U[0]-B[0]-Z,U[1]-B[1]-et)/$,1/h,1/p),g/h,m/p)}else k?O=Math.max(g,Math.min(1,Math.abs(U[0]-B[0]-Z)))/h:K=Math.max(m,Math.min(1,Math.abs(U[1]-B[1]-et)))/p;const it=y(h*O),dt=y(p*K);P=S(...R(it,dt));const rt=G-P[0],X=H-P[1];this.width=it,this.height=dt,this.x=rt,this.y=X,this.setDims(n*it,r*dt),this.fixAndSetPosition()},Hy=function(e){const{isMac:t}=_i.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},e1=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,r=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),E(this,Ec,e.clientX),E(this,wc,e.clientY);const c=h=>{const{clientX:p,clientY:g}=h,[m,y]=this.screenToPageTranslation(p-u(this,Ec),g-u(this,wc));E(this,Ec,p),E(this,wc,g),this._uiManager.dragSelectedEditors(m,y)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const o=()=>{n.abort(),t&&this.div.classList.remove("moving"),E(this,So,!1),this._uiManager.endDragSession()||w(this,Ot,Hy).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},By=function(){if(u(this,ar)||!this.div)return;E(this,ar,new AbortController);const e=this._uiManager.combinedSignal(u(this,ar));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},i1=function(e){Yt._resizerKeyboardManager.exec(this,e)},s1=function(e){var t;u(this,Yn)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,ti)&&w(this,Ot,mh).call(this)},n1=function(e){E(this,Zh,u(this,Yn)?e:"")},Iy=function(e){if(u(this,zs))for(const t of u(this,zs))t.tabIndex=e},mh=function(){if(E(this,Yn,!1),w(this,Ot,Iy).call(this,-1),u(this,Ao)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,Ao);w(this,Ot,Fy).call(this,e,t,n,r),E(this,Ao,null)}},C(Yt,ed),Tt(Yt,"_l10n",null),Tt(Yt,"_l10nResizer",null),Tt(Yt,"_borderLineWidth",-1),Tt(Yt,"_colorManager",new Cy),Tt(Yt,"_zIndex",1),Tt(Yt,"_telemetryTimeout",1e3);let $t=Yt;class eR extends $t{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const W_=3285377520,ps=4294901760,Js=65535;class a1{constructor(e){this.h1=e?e&4294967295:W_,this.h2=e?e&4294967295:W_}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let T=0,M=e.length;T<M;T++){const R=e.charCodeAt(T);R<=255?t[n++]=R:(t[n++]=R>>>8,t[n++]=R&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,c=new Uint32Array(t.buffer,0,r);let h=0,p=0,g=this.h1,m=this.h2;const y=3432918353,b=461845907,S=y&Js,_=b&Js;for(let T=0;T<r;T++)T&1?(h=c[T],h=h*y&ps|h*S&Js,h=h<<15|h>>>17,h=h*b&ps|h*_&Js,g^=h,g=g<<13|g>>>19,g=g*5+3864292196):(p=c[T],p=p*y&ps|p*S&Js,p=p<<15|p>>>17,p=p*b&ps|p*_&Js,m^=p,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,o){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*y&ps|h*S&Js,h=h<<15|h>>>17,h=h*b&ps|h*_&Js,r&1?g^=h:m^=h}this.h1=g,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ps|e*36045&Js,t=t*4283543511&ps|((t<<16|e>>>16)*2950163797&ps)>>>16,e^=t>>>1,e=e*444984403&ps|e*60499&Js,t=t*3301882366&ps|((t<<16|e>>>16)*3120437893&ps)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Uy=Object.freeze({map:null,hash:"",transfer:void 0});var Eo,wo,Ke,bg,r1;class V0{constructor(){C(this,bg);C(this,Eo,!1);C(this,wo,null);C(this,Ke,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Ke).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Ke).get(e)}remove(e){if(u(this,Ke).delete(e),u(this,Ke).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,Ke).values())if(t instanceof $t)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Ke).get(e);let r=!1;if(n!==void 0)for(const[o,c]of Object.entries(t))n[o]!==c&&(r=!0,n[o]=c);else r=!0,u(this,Ke).set(e,t);r&&w(this,bg,r1).call(this),t instanceof $t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,Ke).has(e)}getAll(){return u(this,Ke).size>0?B0(u(this,Ke)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return u(this,Ke).size}resetModified(){u(this,Eo)&&(E(this,Eo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o1(this)}get serializable(){if(u(this,Ke).size===0)return Uy;const e=new Map,t=new a1,n=[],r=Object.create(null);let o=!1;for(const[c,h]of u(this,Ke)){const p=h instanceof $t?h.serialize(!1,r):h;p&&(e.set(c,p),t.update(`${c}:${JSON.stringify(p)}`),o||(o=!!p.bitmap))}if(o)for(const c of e.values())c.bitmap&&n.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Uy}get editorStats(){let e=null;const t=new Map;for(const n of u(this,Ke).values()){if(!(n instanceof $t))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[h,p]of Object.entries(r)){if(h==="type")continue;let g=c.get(h);g||(g=new Map,c.set(h,g));const m=g.get(p)??0;g.set(p,m+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){E(this,wo,null)}get modifiedIds(){if(u(this,wo))return u(this,wo);const e=[];for(const t of u(this,Ke).values())!(t instanceof $t)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,wo,{ids:new Set(e),hash:e.join(",")})}}Eo=new WeakMap,wo=new WeakMap,Ke=new WeakMap,bg=new WeakSet,r1=function(){u(this,Eo)||(E(this,Eo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var id;class o1 extends V0{constructor(t){super();C(this,id);const{map:n,hash:r,transfer:o}=t.serializable,c=structuredClone(n,o?{transfer:o}:null);E(this,id,{map:c,hash:r,transfer:o})}get print(){re("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,id)}get modifiedIds(){return It(this,"modifiedIds",{ids:new Set,hash:""})}}id=new WeakMap;var Tc;class iR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Tc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Tc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,Tc).has(e.loadedName))){if(He(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=e,c=new FontFace(n,r,o);this.addNativeFontFace(c);try{await c.load(),u(this,Tc).add(n),t==null||t(e)}catch{kt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw kt(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return It(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(di||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),It(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(He(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return It(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(B,U){return B.charCodeAt(U)<<24|B.charCodeAt(U+1)<<16|B.charCodeAt(U+2)<<8|B.charCodeAt(U+3)&255}function r(B,U,P,G){const H=B.substring(0,U),O=B.substring(U+P);return H+G+O}let o,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const p=h.getContext("2d");let g=0;function m(B,U){if(++g>30){kt("Load test font never loaded."),U();return}if(p.font="30px "+B,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(m.bind(null,B,U))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const _=16,T=1482184792;let M=n(b,_);for(o=0,c=y.length-3;o<c;o+=4)M=M-T+n(y,o)|0;o<y.length&&(M=M-T+n(y+"XXX",o)|0),b=r(b,_,4,Ix(M));const R=`url(data:font/opentype;base64,${btoa(b)});`,N=`@font-face {font-family:"${y}";src:${R}}`;this.insertRule(N);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const B of[e.loadedName,y]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=B,k.append(U)}this._document.body.append(k),m(y,()=>{k.remove(),t.complete()})}}Tc=new WeakMap;class sR{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Xx(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(o){kt(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(o,c){};const r=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case Hn.BEZIER_CURVE_TO:{const[h,p,g,m,y,b]=n.slice(o,o+6);r.push(S=>S.bezierCurveTo(h,p,g,m,y,b)),o+=6}break;case Hn.MOVE_TO:{const[h,p]=n.slice(o,o+2);r.push(g=>g.moveTo(h,p)),o+=2}break;case Hn.LINE_TO:{const[h,p]=n.slice(o,o+2);r.push(g=>g.lineTo(h,p)),o+=2}break;case Hn.QUADRATIC_CURVE_TO:{const[h,p,g,m]=n.slice(o,o+4);r.push(y=>y.quadraticCurveTo(h,p,g,m)),o+=4}break;case Hn.RESTORE:r.push(h=>h.restore());break;case Hn.SAVE:r.push(h=>h.save());break;case Hn.SCALE:He(r.length===2,"Scale command is only valid at the third position.");break;case Hn.TRANSFORM:{const[h,p,g,m,y,b]=n.slice(o,o+6);r.push(S=>S.transform(h,p,g,m,y,b)),o+=6}break;case Hn.TRANSLATE:{const[h,p]=n.slice(o,o+2);r.push(g=>g.translate(h,p)),o+=2}break}return this.compiledGlyphs[t]=function(c,h){r[0](c),r[1](c),c.scale(h,-h);for(let p=2,g=r.length;p<g;p++)r[p](c)}}}var sd;class l1{constructor({enableHWA:e=!1}){C(this,sd,!1);E(this,sd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,sd)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){re("Abstract method `_createCanvas` called.")}}sd=new WeakMap;class nR extends l1{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class c1{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){re("Abstract method `_fetch` called.")}}class u1 extends c1{async _fetch(e){const t=await Pg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):kg(t)}}class h1{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}}var To,Co,un,Kn,ci,Ag,xo,ht,oi,Kl,Ql,Lp,$l,d1,jy,Wl,vh,yh,qy,bh;class aR extends h1{constructor({docId:t,ownerDocument:n=globalThis.document}){super();C(this,ht);C(this,To);C(this,Co);C(this,un);C(this,Kn);C(this,ci);C(this,Ag);C(this,xo,0);E(this,Kn,t),E(this,ci,n)}addFilter(t){if(!t)return"none";let n=u(this,ht,oi).get(t);if(n)return n;const[r,o,c]=w(this,ht,Lp).call(this,t),h=t.length===1?r:`${r}${o}${c}`;if(n=u(this,ht,oi).get(h),n)return u(this,ht,oi).set(t,n),n;const p=`g_${u(this,Kn)}_transfer_map_${yi(this,xo)._++}`,g=w(this,ht,$l).call(this,p);u(this,ht,oi).set(t,g),u(this,ht,oi).set(h,g);const m=w(this,ht,Wl).call(this,p);return w(this,ht,yh).call(this,r,o,c,m),g}addHCMFilter(t,n){var _;const r=`${t}-${n}`,o="base";let c=u(this,ht,Kl).get(o);if((c==null?void 0:c.key)===r||(c?((_=c.filter)==null||_.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},u(this,ht,Kl).set(o,c)),!t||!n))return c.url;const h=w(this,ht,bh).call(this,t);t=yt.makeHexColor(...h);const p=w(this,ht,bh).call(this,n);if(n=yt.makeHexColor(...p),u(this,ht,Ql).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return c.url;const g=new Array(256);for(let T=0;T<=255;T++){const M=T/255;g[T]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=g.join(","),y=`g_${u(this,Kn)}_hcm_filter`,b=c.filter=w(this,ht,Wl).call(this,y);w(this,ht,yh).call(this,m,m,m,b),w(this,ht,jy).call(this,b);const S=(T,M)=>{const R=h[T]/255,N=p[T]/255,k=new Array(M+1);for(let B=0;B<=M;B++)k[B]=R+B/M*(N-R);return k.join(",")};return w(this,ht,yh).call(this,S(0,5),S(1,5),S(2,5),b),c.url=w(this,ht,$l).call(this,y),c.url}addAlphaFilter(t){let n=u(this,ht,oi).get(t);if(n)return n;const[r]=w(this,ht,Lp).call(this,[t]),o=`alpha_${r}`;if(n=u(this,ht,oi).get(o),n)return u(this,ht,oi).set(t,n),n;const c=`g_${u(this,Kn)}_alpha_map_${yi(this,xo)._++}`,h=w(this,ht,$l).call(this,c);u(this,ht,oi).set(t,h),u(this,ht,oi).set(o,h);const p=w(this,ht,Wl).call(this,c);return w(this,ht,qy).call(this,r,p),h}addLuminosityFilter(t){let n=u(this,ht,oi).get(t||"luminosity");if(n)return n;let r,o;if(t?([r]=w(this,ht,Lp).call(this,[t]),o=`luminosity_${r}`):o="luminosity",n=u(this,ht,oi).get(o),n)return u(this,ht,oi).set(t,n),n;const c=`g_${u(this,Kn)}_luminosity_map_${yi(this,xo)._++}`,h=w(this,ht,$l).call(this,c);u(this,ht,oi).set(t,h),u(this,ht,oi).set(o,h);const p=w(this,ht,Wl).call(this,c);return w(this,ht,d1).call(this,p),t&&w(this,ht,qy).call(this,r,p),h}addHighlightHCMFilter(t,n,r,o,c){var N;const h=`${n}-${r}-${o}-${c}`;let p=u(this,ht,Kl).get(t);if((p==null?void 0:p.key)===h||(p?((N=p.filter)==null||N.remove(),p.key=h,p.url="none",p.filter=null):(p={key:h,url:"none",filter:null},u(this,ht,Kl).set(t,p)),!n||!r))return p.url;const[g,m]=[n,r].map(w(this,ht,bh).bind(this));let y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),b=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,_]=[o,c].map(w(this,ht,bh).bind(this));b<y&&([y,b,S,_]=[b,y,_,S]),u(this,ht,Ql).style.color="";const T=(k,B,U)=>{const P=new Array(256),G=(b-y)/U,H=k/255,O=(B-k)/(255*U);let K=0;for(let Z=0;Z<=U;Z++){const et=Math.round(y+Z*G),it=H+Z*O;for(let dt=K;dt<=et;dt++)P[dt]=it;K=et+1}for(let Z=K;Z<256;Z++)P[Z]=P[K-1];return P.join(",")},M=`g_${u(this,Kn)}_hcm_${t}_filter`,R=p.filter=w(this,ht,Wl).call(this,M);return w(this,ht,jy).call(this,R),w(this,ht,yh).call(this,T(S[0],_[0],5),T(S[1],_[1],5),T(S[2],_[2],5),R),p.url=w(this,ht,$l).call(this,M),p.url}destroy(t=!1){t&&u(this,ht,Kl).size!==0||(u(this,un)&&(u(this,un).parentNode.parentNode.remove(),E(this,un,null)),u(this,Co)&&(u(this,Co).clear(),E(this,Co,null)),E(this,xo,0))}}To=new WeakMap,Co=new WeakMap,un=new WeakMap,Kn=new WeakMap,ci=new WeakMap,Ag=new WeakMap,xo=new WeakMap,ht=new WeakSet,oi=function(){return u(this,Co)||E(this,Co,new Map)},Kl=function(){return u(this,Ag)||E(this,Ag,new Map)},Ql=function(){if(!u(this,un)){const t=u(this,ci).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,ci).createElementNS(In,"svg");r.setAttribute("width",0),r.setAttribute("height",0),E(this,un,u(this,ci).createElementNS(In,"defs")),t.append(r),r.append(u(this,un)),u(this,ci).body.append(t)}return u(this,un)},Lp=function(t){if(t.length===1){const g=t[0],m=new Array(256);for(let b=0;b<256;b++)m[b]=g[b]/255;const y=m.join(",");return[y,y,y]}const[n,r,o]=t,c=new Array(256),h=new Array(256),p=new Array(256);for(let g=0;g<256;g++)c[g]=n[g]/255,h[g]=r[g]/255,p[g]=o[g]/255;return[c.join(","),h.join(","),p.join(",")]},$l=function(t){if(u(this,To)===void 0){E(this,To,"");const n=u(this,ci).URL;n!==u(this,ci).baseURI&&(Fg(n)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,To,n.split("#",1)[0]))}return`url(${u(this,To)}#${t})`},d1=function(t){const n=u(this,ci).createElementNS(In,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},jy=function(t){const n=u(this,ci).createElementNS(In,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Wl=function(t){const n=u(this,ci).createElementNS(In,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,ht,Ql).append(n),n},vh=function(t,n,r){const o=u(this,ci).createElementNS(In,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},yh=function(t,n,r,o){const c=u(this,ci).createElementNS(In,"feComponentTransfer");o.append(c),w(this,ht,vh).call(this,c,"feFuncR",t),w(this,ht,vh).call(this,c,"feFuncG",n),w(this,ht,vh).call(this,c,"feFuncB",r)},qy=function(t,n){const r=u(this,ci).createElementNS(In,"feComponentTransfer");n.append(r),w(this,ht,vh).call(this,r,"feFuncA",t)},bh=function(t){return u(this,ht,Ql).style.color=t,G0(getComputedStyle(u(this,ht,Ql)).getPropertyValue("color"))};class f1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){re("Abstract method `_fetch` called.")}}class p1 extends f1{async _fetch(e){const t=await Pg(e,"arraybuffer");return new Uint8Array(t)}}if(di){var Gy=Promise.withResolvers(),Oh=null;(async()=>{const e=await ao(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await ao(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await ao(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await ao(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:o,path2d:c}))})().then(e=>{Oh=e,Gy.resolve()},e=>{kt(`loadPackages: ${e}`),Oh=new Map,Gy.resolve()})}class Tr{static get promise(){return Gy.promise}static get(e){return Oh==null?void 0:Oh.get(e)}}async function g1(d){const t=await Tr.get("fs").promises.readFile(d);return new Uint8Array(t)}class rR extends h1{}class oR extends l1{_createCanvas(e,t){return Tr.get("canvas").createCanvas(e,t)}}class lR extends c1{async _fetch(e){return g1(e)}}class cR extends f1{async _fetch(e){return g1(e)}}const Si={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vy(d,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),d.clip(r)}class X0{getPattern(){re("Abstract method `getPattern` called.")}}class uR extends X0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===Si.STROKE||r===Si.FILL){const c=t.current.getClippedPathBoundingBox(r,pe(e))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,p=Math.ceil(c[3]-c[1])||1,g=t.cachedCanvases.getCanvas("pattern",h,p),m=g.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),n=yt.transform(n,[1,0,0,1,c[0],c[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Vy(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=e.createPattern(g.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else Vy(e,this._bbox),o=this._createGradient(e);return o}}function ty(d,e,t,n,r,o,c,h){const p=e.coords,g=e.colors,m=d.data,y=d.width*4;let b;p[t+1]>p[n+1]&&(b=t,t=n,n=b,b=o,o=c,c=b),p[n+1]>p[r+1]&&(b=n,n=r,r=b,b=c,c=h,h=b),p[t+1]>p[n+1]&&(b=t,t=n,n=b,b=o,o=c,c=b);const S=(p[t]+e.offsetX)*e.scaleX,_=(p[t+1]+e.offsetY)*e.scaleY,T=(p[n]+e.offsetX)*e.scaleX,M=(p[n+1]+e.offsetY)*e.scaleY,R=(p[r]+e.offsetX)*e.scaleX,N=(p[r+1]+e.offsetY)*e.scaleY;if(_>=N)return;const k=g[o],B=g[o+1],U=g[o+2],P=g[c],G=g[c+1],H=g[c+2],O=g[h],K=g[h+1],Z=g[h+2],et=Math.round(_),it=Math.round(N);let dt,rt,X,$,J,St,D,V;for(let at=et;at<=it;at++){if(at<M){const mt=at<_?0:(_-at)/(_-M);dt=S-(S-T)*mt,rt=k-(k-P)*mt,X=B-(B-G)*mt,$=U-(U-H)*mt}else{let mt;at>N?mt=1:M===N?mt=0:mt=(M-at)/(M-N),dt=T-(T-R)*mt,rt=P-(P-O)*mt,X=G-(G-K)*mt,$=H-(H-Z)*mt}let nt;at<_?nt=0:at>N?nt=1:nt=(_-at)/(_-N),J=S-(S-R)*nt,St=k-(k-O)*nt,D=B-(B-K)*nt,V=U-(U-Z)*nt;const st=Math.round(Math.min(dt,J)),gt=Math.round(Math.max(dt,J));let lt=y*at+st*4;for(let mt=st;mt<=gt;mt++)nt=(dt-mt)/(dt-J),nt<0?nt=0:nt>1&&(nt=1),m[lt++]=rt-(rt-St)*nt|0,m[lt++]=X-(X-D)*nt|0,m[lt++]=$-($-V)*nt|0,m[lt++]=255}}function hR(d,e,t){const n=e.coords,r=e.colors;let o,c;switch(e.type){case"lattice":const h=e.verticesPerRow,p=Math.floor(n.length/h)-1,g=h-1;for(o=0;o<p;o++){let m=o*h;for(let y=0;y<g;y++,m++)ty(d,t,n[m],n[m+1],n[m+h],r[m],r[m+1],r[m+h]),ty(d,t,n[m+h+1],n[m+1],n[m+h],r[m+h+1],r[m+1],r[m+h])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)ty(d,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class dR extends X0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const h=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-p,y=Math.min(Math.ceil(Math.abs(g*e[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),S=g/y,_=m/b,T={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-p,scaleX:1/S,scaleY:1/_},M=y+2*2,R=b+2*2,N=n.getCanvas("mesh",M,R),k=N.context,B=k.createImageData(y,b);if(t){const P=B.data;for(let G=0,H=P.length;G<H;G+=4)P[G]=t[0],P[G+1]=t[1],P[G+2]=t[2],P[G+3]=255}for(const P of this._figures)hR(B,P,T);return k.putImageData(B,2,2),{canvas:N.canvas,offsetX:h-2*S,offsetY:p-2*_,scaleX:S,scaleY:_}}getPattern(e,t,n,r){Vy(e,this._bbox);let o;if(r===Si.SHADING)o=yt.singularValueDecompose2dScale(pe(e));else if(o=yt.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=yt.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const c=this._createMeshCanvas(o,r===Si.SHADING?null:this._background,t.cachedCanvases);return r!==Si.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class fR extends X0{getPattern(){return"hotpink"}}function pR(d){switch(d[0]){case"RadialAxial":return new uR(d);case"Mesh":return new dR(d);case"Dummy":return new fR}throw new Error(`Unknown IR type: ${d[0]}`)}const Z_={COLORED:1,UNCOLORED:2},Sg=class Sg{constructor(e,t,n,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:g}=this;p=Math.abs(p),g=Math.abs(g),Og("TilingType: "+o);const m=t[0],y=t[1],b=t[2],S=t[3],_=b-m,T=S-y,M=yt.singularValueDecompose2dScale(this.matrix),R=yt.singularValueDecompose2dScale(this.baseTransform),N=M[0]*R[0],k=M[1]*R[1];let B=_,U=T,P=!1,G=!1;const H=Math.ceil(p*N),O=Math.ceil(g*k),K=Math.ceil(_*N),Z=Math.ceil(T*k);H>=K?B=p:P=!0,O>=Z?U=g:G=!0;const et=this.getSizeAndScale(B,this.ctx.canvas.width,N),it=this.getSizeAndScale(U,this.ctx.canvas.height,k),dt=e.cachedCanvases.getCanvas("pattern",et.size,it.size),rt=dt.context,X=h.createCanvasGraphics(rt);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,r,c),rt.translate(-et.scale*m,-it.scale*y),X.transform(et.scale,0,0,it.scale,0,0),rt.save(),this.clipBbox(X,m,y,b,S),X.baseTransform=pe(X.ctx),X.executeOperatorList(n),X.endDrawing(),rt.restore(),P||G){const $=dt.canvas;P&&(B=p),G&&(U=g);const J=this.getSizeAndScale(B,this.ctx.canvas.width,N),St=this.getSizeAndScale(U,this.ctx.canvas.height,k),D=J.size,V=St.size,at=e.cachedCanvases.getCanvas("pattern-workaround",D,V),nt=at.context,st=P?Math.floor(_/p):0,gt=G?Math.floor(T/g):0;for(let lt=0;lt<=st;lt++)for(let mt=0;mt<=gt;mt++)nt.drawImage($,D*lt,V*mt,D,V,0,0,D,V);return{canvas:at.canvas,scaleX:J.scale,scaleY:St.scale,offsetX:m,offsetY:y}}return{canvas:dt.canvas,scaleX:et.scale,scaleY:it.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,t,n){const r=Math.max(Sg.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=r?o=r:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,r,o){const c=r-t,h=o-n;e.ctx.rect(t,n,c,h),e.current.updateRectMinMax(pe(e.ctx),[t,n,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,o=e.current;switch(t){case Z_.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case Z_.UNCOLORED:const h=yt.makeHexColor(n[0],n[1],n[2]);r.fillStyle=h,r.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new Bx(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let o=n;r!==Si.SHADING&&(o=yt.transform(o,t.baseTransform),this.matrix&&(o=yt.transform(o,this.matrix)));const c=this.createPatternCanvas(t);let h=new DOMMatrix(o);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const p=e.createPattern(c.canvas,"repeat");return p.setTransform(h),p}};Tt(Sg,"MAX_PATTERN_SIZE",3e3);let Xy=Sg;function gR({src:d,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const h=_i.isLittleEndian?4278190080:255,[p,g]=c?[o,h]:[h,o],m=n>>3,y=n&7,b=d.length;t=new Uint32Array(t.buffer);let S=0;for(let _=0;_<r;_++){for(const M=e+m;e<M;e++){const R=e<b?d[e]:255;t[S++]=R&128?g:p,t[S++]=R&64?g:p,t[S++]=R&32?g:p,t[S++]=R&16?g:p,t[S++]=R&8?g:p,t[S++]=R&4?g:p,t[S++]=R&2?g:p,t[S++]=R&1?g:p}if(y===0)continue;const T=e<b?d[e++]:255;for(let M=0;M<y;M++)t[S++]=T&1<<7-M?g:p}return{srcPos:e,destPos:S}}const J_=16,tE=100,mR=15,eE=10,iE=1e3,Ni=16;function vR(d,e){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){e.save(),this.__originalSave()},d.restore=function(){e.restore(),this.__originalRestore()},d.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},d.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},d.transform=function(n,r,o,c,h,p){e.transform(n,r,o,c,h,p),this.__originalTransform(n,r,o,c,h,p)},d.setTransform=function(n,r,o,c,h,p){e.setTransform(n,r,o,c,h,p),this.__originalSetTransform(n,r,o,c,h,p)},d.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},d.rotate=function(n){e.rotate(n),this.__originalRotate(n)},d.clip=function(n){e.clip(n),this.__originalClip(n)},d.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},d.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},d.bezierCurveTo=function(t,n,r,o,c,h){e.bezierCurveTo(t,n,r,o,c,h),this.__originalBezierCurveTo(t,n,r,o,c,h)},d.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},d.closePath=function(){e.closePath(),this.__originalClosePath()},d.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class yR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function gp(d,e,t,n,r,o,c,h,p,g){const[m,y,b,S,_,T]=pe(d);if(y===0&&b===0){const N=c*m+_,k=Math.round(N),B=h*S+T,U=Math.round(B),P=(c+p)*m+_,G=Math.abs(Math.round(P)-k)||1,H=(h+g)*S+T,O=Math.abs(Math.round(H)-U)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(S),k,U),d.drawImage(e,t,n,r,o,0,0,G,O),d.setTransform(m,y,b,S,_,T),[G,O]}if(m===0&&S===0){const N=h*b+_,k=Math.round(N),B=c*y+T,U=Math.round(B),P=(h+g)*b+_,G=Math.abs(Math.round(P)-k)||1,H=(c+p)*y+T,O=Math.abs(Math.round(H)-U)||1;return d.setTransform(0,Math.sign(y),Math.sign(b),0,k,U),d.drawImage(e,t,n,r,o,0,0,O,G),d.setTransform(m,y,b,S,_,T),[O,G]}d.drawImage(e,t,n,r,o,c,h,p,g);const M=Math.hypot(m,y),R=Math.hypot(b,S);return[M*p,R*g]}function bR(d){const{width:e,height:t}=d;if(e>iE||t>iE)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let c=new Uint8Array(o*(t+1)),h,p,g;const m=e+7&-8;let y=new Uint8Array(m*t),b=0;for(const R of d.data){let N=128;for(;N>0;)y[b++]=R&N?0:255,N>>=1}let S=0;for(b=0,y[b]!==0&&(c[0]=1,++S),p=1;p<e;p++)y[b]!==y[b+1]&&(c[p]=y[b]?2:1,++S),b++;for(y[b]!==0&&(c[p]=2,++S),h=1;h<t;h++){b=h*m,g=h*o,y[b-m]!==y[b]&&(c[g]=y[b]?1:8,++S);let R=(y[b]?4:0)+(y[b-m]?8:0);for(p=1;p<e;p++)R=(R>>2)+(y[b+1]?4:0)+(y[b-m+1]?8:0),r[R]&&(c[g+p]=r[R],++S),b++;if(y[b-m]!==y[b]&&(c[g+p]=y[b]?2:4,++S),S>n)return null}for(b=m*(t-1),g=h*o,y[b]!==0&&(c[g]=8,++S),p=1;p<e;p++)y[b]!==y[b+1]&&(c[g+p]=y[b]?4:8,++S),b++;if(y[b]!==0&&(c[g+p]=4,++S),S>n)return null;const _=new Int32Array([0,o,-1,0,-o,0,0,0,1]),T=new Path2D;for(h=0;S&&h<=t;h++){let R=h*o;const N=R+e;for(;R<N&&!c[R];)R++;if(R===N)continue;T.moveTo(R%o,h);const k=R;let B=c[R];do{const U=_[B];do R+=U;while(!c[R]);const P=c[R];P!==5&&P!==10?(B=P,c[R]=0):(B=P&51*B>>4,c[R]&=B>>2|B<<2),T.lineTo(R%o,R/o|0),c[R]||--S}while(k!==R);--h}return y=null,c=null,function(R){R.save(),R.scale(1/e,-1/t),R.translate(0,-t),R.fill(T),R.beginPath(),R.restore()}}class sE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=OE,this.textMatrixScale=1,this.fontMatrix=yy,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ri.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=yt.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=yt.applyTransform(t,e),r=yt.applyTransform(t.slice(2),e),o=yt.applyTransform([t[0],t[3]],e),c=yt.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],r[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],r[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],r[1],o[1],c[1])}updateScalingPathMinMax(e,t){yt.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,o,c,h,p,g,m){const y=yt.bezierBoundingBox(t,n,r,o,c,h,p,g,m);m||this.updateRectMinMax(e,y)}getPathBoundingBox(e=Si.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Si.STROKE){t||re("Stroke bounding box must include transform.");const r=yt.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const e=yt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Si.FILL,t=null){return yt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nE(d,e){if(typeof ImageData<"u"&&e instanceof ImageData){d.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Ni,o=(t-r)/Ni,c=r===0?o:o+1,h=d.createImageData(n,Ni);let p=0,g;const m=e.data,y=h.data;let b,S,_,T;if(e.kind===Ep.GRAYSCALE_1BPP){const M=m.byteLength,R=new Uint32Array(y.buffer,0,y.byteLength>>2),N=R.length,k=n+7>>3,B=4294967295,U=_i.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(_=b<o?Ni:r,g=0,S=0;S<_;S++){const P=M-p;let G=0;const H=P>k?n:P*8-7,O=H&-8;let K=0,Z=0;for(;G<O;G+=8)Z=m[p++],R[g++]=Z&128?B:U,R[g++]=Z&64?B:U,R[g++]=Z&32?B:U,R[g++]=Z&16?B:U,R[g++]=Z&8?B:U,R[g++]=Z&4?B:U,R[g++]=Z&2?B:U,R[g++]=Z&1?B:U;for(;G<H;G++)K===0&&(Z=m[p++],K=128),R[g++]=Z&K?B:U,K>>=1}for(;g<N;)R[g++]=0;d.putImageData(h,0,b*Ni)}}else if(e.kind===Ep.RGBA_32BPP){for(S=0,T=n*Ni*4,b=0;b<o;b++)y.set(m.subarray(p,p+T)),p+=T,d.putImageData(h,0,S),S+=Ni;b<c&&(T=n*r*4,y.set(m.subarray(p,p+T)),d.putImageData(h,0,S))}else if(e.kind===Ep.RGB_24BPP)for(_=Ni,T=n*_,b=0;b<c;b++){for(b>=o&&(_=r,T=n*_),g=0,S=T;S--;)y[g++]=m[p++],y[g++]=m[p++],y[g++]=m[p++],y[g++]=255;d.putImageData(h,0,b*Ni)}else throw new Error(`bad image kind: ${e.kind}`)}function aE(d,e){if(e.bitmap){d.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Ni,o=(t-r)/Ni,c=r===0?o:o+1,h=d.createImageData(n,Ni);let p=0;const g=e.data,m=h.data;for(let y=0;y<c;y++){const b=y<o?Ni:r;({srcPos:p}=gR({src:g,srcPos:p,dest:m,width:n,height:b,nonBlackColor:0})),d.putImageData(h,0,y*Ni)}}function uh(d,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)d[n]!==void 0&&(e[n]=d[n]);d.setLineDash!==void 0&&(e.setLineDash(d.getLineDash()),e.lineDashOffset=d.lineDashOffset)}function mp(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!di){const{filter:e}=d;e!=="none"&&e!==""&&(d.filter="none")}}function rE(d,e){if(e)return!0;const t=yt.singularValueDecompose2dScale(d);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*wr.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const AR=["butt","round","square"],SR=["miter","round","bevel"],_R={},oE={};var Rr,Yy,Ky;const ab=class ab{constructor(e,t,n,r,o,{optionalContentConfig:c,markedContentStack:h=null},p,g){C(this,Rr);this.ctx=e,this.current=new sE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new yR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=h,n){const p=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...pe(this.compositeCtx))}this.ctx.save(),mp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=pe(this.ctx)}executeOperatorList(e,t,n,r){const o=e.argsArray,c=e.fnArray;let h=t||0;const p=o.length;if(p===h)return h;const g=p-h>eE&&typeof n=="function",m=g?Date.now()+mR:0;let y=0;const b=this.commonObjs,S=this.objs;let _;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(_=c[h],_!==Os.dependency)this[_].apply(this,o[h]);else for(const T of o[h]){const M=T.startsWith("g_")?b:S;if(!M.has(T))return M.get(T,n),h}if(h++,h===p)return h;if(g&&++y>eE){if(Date.now()>m)return n(),h;y=0}}}endDrawing(){w(this,Rr,Yy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),w(this,Rr,Ky).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),h=n,p=r,g="prescale1",m,y;for(;o>2&&h>1||c>2&&p>1;){let b=h,S=p;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),c>2&&p>1&&(S=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,c/=p/S),m=this.cachedCanvases.getCanvas(g,b,S),y=m.context,y.clearRect(0,0,b,S),y.drawImage(e,0,0,h,p,0,0,b,S),e=m.canvas,h=b,p=S,g=g==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:p}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,o=this.current.fillColor,c=this.current.patternFill,h=pe(t);let p,g,m,y;if((e.bitmap||e.data)&&e.count>1){const H=e.bitmap||e.data.buffer;g=JSON.stringify(c?h:[h.slice(0,4),o]),p=this._cachedBitmapsMap.get(H),p||(p=new Map,this._cachedBitmapsMap.set(H,p));const O=p.get(g);if(O&&!c){const K=Math.round(Math.min(h[0],h[2])+h[4]),Z=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:O,offsetX:K,offsetY:Z}}m=O}m||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),aE(y.context,e));let b=yt.transform(h,[1/n,0,0,-1/r,0,0]);b=yt.transform(b,[1,0,0,1,0,-r]);const[S,_,T,M]=yt.getAxialAlignedBoundingBox([0,0,n,r],b),R=Math.round(T-S)||1,N=Math.round(M-_)||1,k=this.cachedCanvases.getCanvas("fillCanvas",R,N),B=k.context,U=S,P=_;B.translate(-U,-P),B.transform(...b),m||(m=this._scaleImage(y.canvas,Bn(B)),m=m.img,p&&c&&p.set(g,m)),B.imageSmoothingEnabled=rE(pe(B),e.interpolate),gp(B,m,0,0,m.width,m.height,0,0,n,r),B.globalCompositeOperation="source-in";const G=yt.transform(Bn(B),[1,0,0,1,-U,-P]);return B.fillStyle=c?o.getPattern(t,this,G,Si.FILL):o,B.fillRect(0,0,n,r),p&&!c&&(this.cachedCanvases.delete("fillCanvas"),p.set(g,k.canvas)),{canvas:k.canvas,offsetX:Math.round(U),offsetY:Math.round(P)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=AR[e]}setLineJoin(e){this.ctx.lineJoin=SR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...pe(this.suspendedCtx)),uh(this.suspendedCtx,o),vR(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),uh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const o=r[0],c=r[1],h=r[2]-o,p=r[3]-c;h===0||p===0||(this.genericComposeSMask(t.context,n,h,p,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,c,h,p,g,m,y){let b=e.canvas,S=p-m,_=g-y;if(c){const M=yt.makeHexColor(...c);if(S<0||_<0||S+n>b.width||_+r>b.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,r),N=R.context;N.drawImage(b,-S,-_),N.globalCompositeOperation="destination-atop",N.fillStyle=M,N.fillRect(0,0,n,r),N.globalCompositeOperation="source-over",b=R.canvas,S=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(S,_,n,r),e.clip(R),e.globalCompositeOperation="destination-atop",e.fillStyle=M,e.fillRect(S,_,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const T=new Path2D;T.rect(p,g,n,r),t.clip(T),t.globalCompositeOperation="destination-in",t.drawImage(b,S,_,n,r,p,g,n,r),t.restore()}save(){this.inSMaskMode?(uh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),uh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,o,c){this.ctx.transform(e,t,n,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,o=this.current;let c=o.x,h=o.y,p,g;const m=pe(r),y=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,b=y?n.slice(0):null;for(let S=0,_=0,T=e.length;S<T;S++)switch(e[S]|0){case Os.rectangle:c=t[_++],h=t[_++];const M=t[_++],R=t[_++],N=c+M,k=h+R;r.moveTo(c,h),M===0||R===0?r.lineTo(N,k):(r.lineTo(N,h),r.lineTo(N,k),r.lineTo(c,k)),y||o.updateRectMinMax(m,[c,h,N,k]),r.closePath();break;case Os.moveTo:c=t[_++],h=t[_++],r.moveTo(c,h),y||o.updatePathMinMax(m,c,h);break;case Os.lineTo:c=t[_++],h=t[_++],r.lineTo(c,h),y||o.updatePathMinMax(m,c,h);break;case Os.curveTo:p=c,g=h,c=t[_+4],h=t[_+5],r.bezierCurveTo(t[_],t[_+1],t[_+2],t[_+3],c,h),o.updateCurvePathMinMax(m,p,g,t[_],t[_+1],t[_+2],t[_+3],c,h,b),_+=6;break;case Os.curveTo2:p=c,g=h,r.bezierCurveTo(c,h,t[_],t[_+1],t[_+2],t[_+3]),o.updateCurvePathMinMax(m,p,g,c,h,t[_],t[_+1],t[_+2],t[_+3],b),c=t[_+2],h=t[_+3],_+=4;break;case Os.curveTo3:p=c,g=h,c=t[_+2],h=t[_+3],r.bezierCurveTo(t[_],t[_+1],c,h,c,h),o.updateCurvePathMinMax(m,p,g,t[_],t[_+1],c,h,c,h,b),_+=4;break;case Os.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(m,b),o.setCurrentPoint(c,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Bn(t),Si.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,Bn(t),Si.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_R}eoClip(){this.pendingClip=oE}beginText(){this.current.textMatrix=OE,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||yy,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&kt("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((m=n.systemFontInfo)==null?void 0:m.css)||`"${o}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const p=n.italic?"italic":"normal";let g=t;t<J_?g=J_:t>tE&&(g=tE),this.current.fontSizeScale=t/g,this.ctx.font=`${p} ${h} ${g}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,o,c){this.current.textMatrix=[e,t,n,r,o,c],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const o=this.ctx,c=this.current,h=c.font,p=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,m=p&ri.FILL_STROKE_MASK,y=!!(p&ri.ADD_TO_PATH_FLAG),b=c.patternFill&&!h.missingFile;let S;(h.disableFontFace||y||b)&&(S=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||b?(o.save(),o.translate(t,n),o.beginPath(),S(o,g),r&&o.setTransform(...r),(m===ri.FILL||m===ri.FILL_STROKE)&&o.fill(),(m===ri.STROKE||m===ri.FILL_STROKE)&&o.stroke(),o.restore()):((m===ri.FILL||m===ri.FILL_STROKE)&&o.fillText(e,t,n),(m===ri.STROKE||m===ri.FILL_STROKE)&&o.strokeText(e,t,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:pe(o),x:t,y:n,fontSize:g,addToPath:S})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return It(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,c=t.fontSizeScale,h=t.charSpacing,p=t.wordSpacing,g=t.fontDirection,m=t.textHScale*g,y=e.length,b=n.vertical,S=b?1:-1,_=n.defaultVMetrics,T=r*t.fontMatrix[0],M=t.textRenderingMode===ri.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),g>0?o.scale(m,-1):o.scale(m,1);let R;if(t.patternFill){o.save();const P=t.fillColor.getPattern(o,this,Bn(o),Si.FILL);R=pe(o),o.restore(),o.fillStyle=P}let N=t.lineWidth;const k=t.textMatrixScale;if(k===0||N===0){const P=t.textRenderingMode&ri.FILL_STROKE_MASK;(P===ri.STROKE||P===ri.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=k;if(c!==1&&(o.scale(c,c),N/=c),o.lineWidth=N,n.isInvalidPDFjsFont){const P=[];let G=0;for(const H of e)P.push(H.unicode),G+=H.width;o.fillText(P.join(""),0,0),t.x+=G*T*m,o.restore(),this.compose();return}let B=0,U;for(U=0;U<y;++U){const P=e[U];if(typeof P=="number"){B+=S*P*r/1e3;continue}let G=!1;const H=(P.isSpace?p:0)+h,O=P.fontChar,K=P.accent;let Z,et,it=P.width;if(b){const rt=P.vmetric||_,X=-(P.vmetric?rt[1]:it*.5)*T,$=rt[2]*T;it=rt?-rt[0]:it,Z=X/c,et=(B+$)/c}else Z=B/c,et=0;if(n.remeasure&&it>0){const rt=o.measureText(O).width*1e3/r*c;if(it<rt&&this.isFontSubpixelAAEnabled){const X=it/rt;G=!0,o.save(),o.scale(X,1),Z/=X}else it!==rt&&(Z+=(it-rt)/2e3*r/c)}if(this.contentVisible&&(P.isInFont||n.missingFile)){if(M&&!K)o.fillText(O,Z,et);else if(this.paintChar(O,Z,et,R),K){const rt=Z+r*K.offset.x/c,X=et-r*K.offset.y/c;this.paintChar(K.fontChar,rt,X,R)}}const dt=b?it*T-H*g:it*T+H*g;B+=dt,G&&o.restore()}b?t.y-=B:t.x+=B*m,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,o=n.fontSize,c=n.fontDirection,h=r.vertical?1:-1,p=n.charSpacing,g=n.wordSpacing,m=n.textHScale*c,y=n.fontMatrix||yy,b=e.length,S=n.textRenderingMode===ri.INVISIBLE;let _,T,M,R;if(!(S||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(m,c),_=0;_<b;++_){if(T=e[_],typeof T=="number"){R=h*T*o/1e3,this.ctx.translate(R,0),n.x+=R*m;continue}const N=(T.isSpace?g:0)+p,k=r.charProcOperatorList[T.operatorListId];if(!k){kt(`Type3 character "${T.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=T,this.save(),t.scale(o,o),t.transform(...y),this.executeOperatorList(k),this.restore()),M=yt.applyTransform([T.width,0],y)[0]*o+N,t.translate(M,0),n.x+=M*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,o,c){this.ctx.rect(n,r,o-n,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||pe(this.ctx),o={createCanvasGraphics:c=>new ab(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Xy(e,n,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=yt.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=yt.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=pR(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Bn(t),Si.SHADING);const r=Bn(t);if(r){const{width:o,height:c}=t.canvas,[h,p,g,m]=yt.getAxialAlignedBoundingBox([0,0,o,c],r);this.ctx.fillRect(h,p,g-h,m-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){re("Should not call beginInlineImage")}beginImageData(){re("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=pe(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(pe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Og("TODO: Support non-isolated groups."),e.knockout&&kt("Knockout groups not supported.");const n=pe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=yt.getAxialAlignedBoundingBox(e.bbox,pe(t));const o=[0,0,t.canvas.width,t.canvas.height];r=yt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),h=Math.floor(r[1]),p=Math.max(Math.ceil(r[2])-c,1),g=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,g]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,p,g),b=y.context;b.translate(-c,-h),b.transform(...n),e.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,h),t.save()),uh(t,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=pe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=yt.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,r,o){if(w(this,Rr,Yy).call(this),mp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],h=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=h;const[p,g]=yt.singularValueDecompose2dScale(pe(this.ctx)),{viewportScale:m}=this,y=Math.ceil(c*this.outputScaleX*m),b=Math.ceil(h*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(y,b);const{canvas:S,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(e,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(p,0,0,-g,0,h*g),mp(this.ctx)}else mp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],c,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new sE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,Rr,Ky).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=bR(e)),r.compiled)){r.compiled(n);return}const o=this._createMaskCanvas(e),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,o,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const p=pe(h);h.transform(t,n,r,o,0,0);const g=this._createMaskCanvas(e);h.setTransform(1,0,0,1,g.offsetX-p[4],g.offsetY-p[5]);for(let m=0,y=c.length;m<y;m+=2){const b=yt.transform(p,[t,n,r,o,c[m],c[m+1]]),[S,_]=yt.applyTransform([0,0],b);h.drawImage(g.canvas,S,_)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:c,width:h,height:p,transform:g}=o,m=this.cachedCanvases.getCanvas("maskCanvas",h,p),y=m.context;y.save();const b=this.getObject(c,o);aE(y,b),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,Bn(t),Si.FILL):n,y.fillRect(0,0,h,p),y.restore(),t.save(),t.transform(...g),t.scale(1,-1),gp(t,m.canvas,0,0,h,p,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){kt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){kt("Dependent image isn't ready yet");return}const c=o.width,h=o.height,p=[];for(let g=0,m=r.length;g<m;g+=2)p.push({transform:[t,0,0,n,r[g],r[g+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(o,p)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!di){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",t,n).context;nE(p,e),o=this.applyTransferMapsToCanvas(p)}const c=this._scaleImage(o,Bn(r));r.imageSmoothingEnabled=rE(pe(r),e.interpolate),gp(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,c=e.height,p=this.cachedCanvases.getCanvas("inlineImage",o,c).context;nE(p,e),r=this.applyTransferMapsToCanvas(p)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),gp(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===oE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=pe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform();let c,h;if(n===0&&r===0){const p=Math.abs(t),g=Math.abs(o);if(p===g)if(e===0)c=h=1/p;else{const m=p*e;c=h=m<1?1/m:1}else if(e===0)c=1/p,h=1/g;else{const m=p*e,y=g*e;c=m<1?1/m:1,h=y<1?1/y:1}}else{const p=Math.abs(t*o-n*r),g=Math.hypot(t,n),m=Math.hypot(r,o);if(e===0)c=m/p,h=g/p;else{const y=e*p;c=m>y?m/y:1,h=g>y?g/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&o===1){t.stroke();return}const c=t.getLineDash();if(e&&t.save(),t.scale(r,o),c.length>0){const h=Math.max(r,o);t.setLineDash(c.map(p=>p/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Rr=new WeakSet,Yy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ky=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let rc=ab;for(const d in Os)rc.prototype[d]!==void 0&&(rc.prototype[Os[d]]=rc.prototype[d]);var nd,ad;class fa{static get workerPort(){return u(this,nd)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,nd,e)}static get workerSrc(){return u(this,ad)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,ad,e)}}nd=new WeakMap,ad=new WeakMap,C(fa,nd,null),C(fa,ad,"");const vp={DATA:1,ERROR:2},Re={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Gi(d){switch(d instanceof Error||typeof d=="object"&&d!==null||re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new hl(d.message);case"MissingPDFException":return new ul(d.message);case"PasswordException":return new by(d.message,d.code);case"UnexpectedResponseException":return new Ng(d.message,d.status);case"UnknownErrorException":return new Ay(d.message,d.details);default:return new Ay(d.message,d.toString())}}var Cc,ws,m1,v1,y1,Dp;class Ah{constructor(e,t,n){C(this,ws);C(this,Cc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",w(this,ws,m1).bind(this),{signal:u(this,Cc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,n,r){const o=this.streamId++,c=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:g=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:g,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:c,targetName:h,action:e,streamId:o,data:t,desiredSize:g.desiredSize},r),m.promise},pull:g=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,p.postMessage({sourceName:c,targetName:h,stream:Re.PULL,streamId:o,desiredSize:g.desiredSize}),m.promise},cancel:g=>{He(g instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,p.postMessage({sourceName:c,targetName:h,stream:Re.CANCEL,streamId:o,reason:Gi(g)}),m.promise}},n)}destroy(){var e;(e=u(this,Cc))==null||e.abort(),E(this,Cc,null)}}Cc=new WeakMap,ws=new WeakSet,m1=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){w(this,ws,y1).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===vp.DATA)r.resolve(e.data);else if(e.callback===vp.ERROR)r.reject(Gi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,o=this.comObj;new Promise(function(c){c(t(e.data))}).then(function(c){o.postMessage({sourceName:n,targetName:r,callback:vp.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:r,callback:vp.ERROR,callbackId:e.callbackId,reason:Gi(c)})});return}if(e.streamId){w(this,ws,v1).call(this,e);return}t(e.data)},v1=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,c=this,h=this.actionHandler[e.action],p={enqueue(g,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:Re.ENQUEUE,streamId:t,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Re.CLOSE,streamId:t}),delete c.streamSinks[t])},error(g){He(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Re.ERROR,streamId:t,reason:Gi(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[t]=p,new Promise(function(g){g(h(e.data,p))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Re.START_COMPLETE,streamId:t,success:!0})},function(g){o.postMessage({sourceName:n,targetName:r,stream:Re.START_COMPLETE,streamId:t,reason:Gi(g)})})},y1=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,c=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case Re.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Gi(e.reason));break;case Re.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Gi(e.reason));break;case Re.PULL:if(!h){o.postMessage({sourceName:n,targetName:r,stream:Re.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,new Promise(function(p){var g;p((g=h.onPull)==null?void 0:g.call(h))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Re.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Re.PULL_COMPLETE,streamId:t,reason:Gi(p)})});break;case Re.ENQUEUE:if(He(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Re.CLOSE:if(He(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),w(this,ws,Dp).call(this,c,t);break;case Re.ERROR:He(c,"error should have stream controller"),c.controller.error(Gi(e.reason)),w(this,ws,Dp).call(this,c,t);break;case Re.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Gi(e.reason)),w(this,ws,Dp).call(this,c,t);break;case Re.CANCEL:if(!h)break;new Promise(function(p){var g;p((g=h.onCancel)==null?void 0:g.call(h,Gi(e.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Re.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Re.CANCEL_COMPLETE,streamId:t,reason:Gi(p)})}),h.sinkCapability.reject(Gi(e.reason)),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Dp=async function(e,t){var n,r,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Ro,rd;class ER{constructor({parsedData:e,rawData:t}){C(this,Ro);C(this,rd);E(this,Ro,e),E(this,rd,t)}getRaw(){return u(this,rd)}get(e){return u(this,Ro).get(e)??null}getAll(){return B0(u(this,Ro))}has(e){return u(this,Ro).has(e)}}Ro=new WeakMap,rd=new WeakMap;const Zl=Symbol("INTERNAL");var od,ld,cd,xc;class wR{constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){C(this,od,!1);C(this,ld,!1);C(this,cd,!1);C(this,xc,!0);E(this,od,!!(e&Ji.DISPLAY)),E(this,ld,!!(e&Ji.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(u(this,cd))return u(this,xc);if(!u(this,xc))return!1;const{print:e,view:t}=this.usage;return u(this,od)?(t==null?void 0:t.viewState)!=="OFF":u(this,ld)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Zl&&re("Internal method `_setVisible` called."),E(this,cd,n),E(this,xc,t)}}od=new WeakMap,ld=new WeakMap,cd=new WeakMap,xc=new WeakMap;var or,Qt,Rc,Mc,ud,Qy;class TR{constructor(e,t=Ji.DISPLAY){C(this,ud);C(this,or,null);C(this,Qt,new Map);C(this,Rc,null);C(this,Mc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,Mc,e.order);for(const n of e.groups)u(this,Qt).set(n.id,new wR(t,n));if(e.baseState==="OFF")for(const n of u(this,Qt).values())n._setVisible(Zl,!1);for(const n of e.on)u(this,Qt).get(n)._setVisible(Zl,!0);for(const n of e.off)u(this,Qt).get(n)._setVisible(Zl,!1);E(this,Rc,this.getHash())}}isVisible(e){if(u(this,Qt).size===0)return!0;if(!e)return Og("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Qt).has(e.id)?u(this,Qt).get(e.id).visible:(kt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return w(this,ud,Qy).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Qt).has(t))return kt(`Optional content group not found: ${t}`),!0;if(u(this,Qt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Qt).has(t))return kt(`Optional content group not found: ${t}`),!0;if(!u(this,Qt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Qt).has(t))return kt(`Optional content group not found: ${t}`),!0;if(!u(this,Qt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Qt).has(t))return kt(`Optional content group not found: ${t}`),!0;if(u(this,Qt).get(t).visible)return!1}return!0}return kt(`Unknown optional content policy ${e.policy}.`),!0}return kt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var o;const r=u(this,Qt).get(e);if(!r){kt(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const c of r.rbGroups)for(const h of c)h!==e&&((o=u(this,Qt).get(h))==null||o._setVisible(Zl,!1,!0));r._setVisible(Zl,!!t,!0),E(this,or,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=u(this,Qt).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}E(this,or,null)}get hasInitialVisibility(){return u(this,Rc)===null||this.getHash()===u(this,Rc)}getOrder(){return u(this,Qt).size?u(this,Mc)?u(this,Mc).slice():[...u(this,Qt).keys()]:null}getGroups(){return u(this,Qt).size>0?B0(u(this,Qt)):null}getGroup(e){return u(this,Qt).get(e)||null}getHash(){if(u(this,or)!==null)return u(this,or);const e=new a1;for(const[t,n]of u(this,Qt))e.update(`${t}:${n.visible}`);return E(this,or,e.hexdigest())}}or=new WeakMap,Qt=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,ud=new WeakSet,Qy=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const o=e[r];let c;if(Array.isArray(o))c=w(this,ud,Qy).call(this,o);else if(u(this,Qt).has(o))c=u(this,Qt).get(o).visible;else return kt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class CR{constructor(e,{disableRange:t=!1,disableStream:n=!1}){He(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const p=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((p,g)=>{this._onReceiveData({begin:p,chunk:g})}),e.addProgressListener((p,g)=>{this._onProgress({loaded:p,total:g})}),e.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});He(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,o;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){He(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new xR(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new RR(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class xR{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=j0(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class RR{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function MR(d){let e=!0,t=n("filename\\*","i").exec(d);if(t){t=t[1];let m=h(t);return m=unescape(m),m=p(m),m=g(m),o(m)}if(t=c(d),t){const m=g(t);return o(m)}if(t=n("filename","i").exec(d),t){t=t[1];let m=h(t);return m=g(m),o(m)}function n(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),S=kg(y);y=b.decode(S),e=!1}catch{}}return y}function o(m){return e&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),e&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let b;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=S.exec(m))!==null;){let[,T,M,R]=b;if(T=parseInt(T,10),T in y){if(T===0)break;continue}y[T]=[M,R]}const _=[];for(let T=0;T<y.length&&T in y;++T){let[M,R]=y[T];R=h(R),M&&(R=unescape(R),T===0&&(R=p(R))),_.push(R)}return _.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const S=y[b].indexOf('"');S!==-1&&(y[b]=y[b].slice(0,S),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function p(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),_=m.slice(y+1).replace(/^[^']*'/,"");return r(b,_)}function g(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,S,_){if(S==="q"||S==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,M){return String.fromCharCode(parseInt(M,16))}),r(b,_);try{_=atob(_)}catch{}return r(b,_)})}return""}function Y0(d,e){const t=new Headers;if(!d||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function K0({responseHeaders:d,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Q0(d){const e=d.get("Content-Disposition");if(e){let t=MR(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(j0(t))return t}return null}function zg(d,e){return d===404||d===0&&e.startsWith("file:")?new ul('Missing PDF "'+e+'".'):new Ng(`Unexpected server response (${d}) while retrieving PDF "${e}".`,d)}function b1(d){return d===200||d===206}function A1(d,e,t){return{method:"GET",headers:d,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function S1(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(kt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class lE{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Y0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new DR(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LR{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,A1(n,this._withCredentials,this._abortController)).then(o=>{if(!b1(o.status))throw zg(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:h,suggestedLength:p}=K0({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=p||this._contentLength,this._filename=Q0(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new hl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:S1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class DR{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const c=r.url;fetch(c,A1(o,this._withCredentials,this._abortController)).then(h=>{if(!b1(h.status))throw zg(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:S1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const ey=200,iy=206;function OR(d){const e=d.response;return typeof e!="string"?e:kg(e).buffer}class NR{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Y0(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const o in n)r[o]=n[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,c]of this.headers)t.setRequestHeader(o,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=iy):r.expectedStatus=ey,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){var p,g,m;const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(p=n.onError)==null||p.call(n,r.status);return}const o=r.status||ey;if(!(o===ey&&n.expectedStatus===iy)&&o!==n.expectedStatus){(g=n.onError)==null||g.call(n,r.status);return}const h=OR(r);if(o===iy){const y=r.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(b[1],10),chunk:h})}else h?n.onDone({begin:0,chunk:h}):(m=n.onError)==null||m.call(n,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class kR{constructor(e){this._source=e,this._manager=new NR(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return He(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PR(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new FR(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class PR{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[h,...p]=c.split(": ");return[h,p.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=K0({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Q0(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=zg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class FR{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=zg(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zR=/^[a-z][a-z0-9\-+.]+:/i;function HR(d){if(zR.test(d))return new URL(d);const e=Tr.get("url");return new URL(e.pathToFileURL(d))}function _1(d,e,t){return d.protocol==="http:"?Tr.get("http").request(d,{headers:e},t):Tr.get("https").request(d,{headers:e},t)}class BR{constructor(e){this.source=e,this.url=HR(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Y0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new jR(this):new IR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new qR(this,e,t):new UR(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class E1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new hl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class IR extends E1{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=r=>{if(r.statusCode===404){const p=new ul(`Missing PDF "${this._url}".`);this._storedError=p,this._headersCapability.reject(p);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:h}=K0({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=Q0(o)};this._request=_1(this._url,t,n),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class UR extends w1{constructor(e,t,n){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${n-1}`;const o=c=>{if(c.statusCode===404){const h=new ul(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(c)};this._request=_1(this._url,r,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class jR extends E1{constructor(e){super(e);const t=Tr.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new ul(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class qR extends w1{constructor(e,t,n){super(e);const r=Tr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}}const GR=1e5,Ri=30,VR=.8;var DE,lr,Di,hd,dd,Mo,Qn,fd,pd,Lo,Lc,Dc,cr,Oc,gd,Nc,Do,md,vd,Oo,No,yd,ur,kc,ba,T1,C1,$y,es,Op,Wy,x1,R1;const ke=class ke{constructor({textContentSource:e,container:t,viewport:n}){C(this,ba);C(this,lr,Promise.withResolvers());C(this,Di,null);C(this,hd,!1);C(this,dd,!!((DE=globalThis.FontInspector)!=null&&DE.enabled));C(this,Mo,null);C(this,Qn,null);C(this,fd,0);C(this,pd,0);C(this,Lo,null);C(this,Lc,null);C(this,Dc,0);C(this,cr,0);C(this,Oc,Object.create(null));C(this,gd,[]);C(this,Nc,null);C(this,Do,[]);C(this,md,new WeakMap);C(this,vd,null);var p;if(e instanceof ReadableStream)E(this,Nc,e);else if(typeof e=="object")E(this,Nc,new ReadableStream({start(g){g.enqueue(e),g.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Di,E(this,Lc,t)),E(this,cr,n.scale*(globalThis.devicePixelRatio||1)),E(this,Dc,n.rotation),E(this,Qn,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:c,pageY:h}=n.rawDims;E(this,vd,[1,0,0,-1,-c,h+o]),E(this,pd,r),E(this,fd,o),w(p=ke,es,x1).call(p),al(t,n),u(this,lr).promise.finally(()=>{u(ke,kc).delete(this),E(this,Qn,null),E(this,Oc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=_i.platform;return It(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Lo).read().then(({value:t,done:n})=>{if(n){u(this,lr).resolve();return}u(this,Mo)??E(this,Mo,t.lang),Object.assign(u(this,Oc),t.styles),w(this,ba,T1).call(this,t.items),e()},u(this,lr).reject)};return E(this,Lo,u(this,Nc).getReader()),u(ke,kc).add(this),e(),u(this,lr).promise}update({viewport:e,onBefore:t=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==u(this,Dc)&&(t==null||t(),E(this,Dc,r),al(u(this,Lc),{rotation:r})),n!==u(this,cr)){t==null||t(),E(this,cr,n);const c={div:null,properties:null,ctx:w(o=ke,es,Op).call(o,u(this,Mo))};for(const h of u(this,Do))c.properties=u(this,md).get(h),c.div=h,w(this,ba,$y).call(this,c)}}cancel(){var t;const e=new hl("TextLayer task cancelled.");(t=u(this,Lo))==null||t.cancel(e).catch(()=>{}),E(this,Lo,null),u(this,lr).reject(e)}get textDivs(){return u(this,Do)}get textContentItemsStr(){return u(this,gd)}static cleanup(){if(!(u(this,kc).size>0)){u(this,Oo).clear();for(const{canvas:e}of u(this,No).values())e.remove();u(this,No).clear()}}};lr=new WeakMap,Di=new WeakMap,hd=new WeakMap,dd=new WeakMap,Mo=new WeakMap,Qn=new WeakMap,fd=new WeakMap,pd=new WeakMap,Lo=new WeakMap,Lc=new WeakMap,Dc=new WeakMap,cr=new WeakMap,Oc=new WeakMap,gd=new WeakMap,Nc=new WeakMap,Do=new WeakMap,md=new WeakMap,vd=new WeakMap,Oo=new WeakMap,No=new WeakMap,yd=new WeakMap,ur=new WeakMap,kc=new WeakMap,ba=new WeakSet,T1=function(e){var r,o;if(u(this,hd))return;(o=u(this,Qn)).ctx??(o.ctx=w(r=ke,es,Op).call(r,u(this,Mo)));const t=u(this,Do),n=u(this,gd);for(const c of e){if(t.length>GR){kt("Ignoring additional textDivs for performance reasons."),E(this,hd,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const h=u(this,Di);E(this,Di,document.createElement("span")),u(this,Di).classList.add("markedContent"),c.id!==null&&u(this,Di).setAttribute("id",`${c.id}`),h.append(u(this,Di))}else c.type==="endMarkedContent"&&E(this,Di,u(this,Di).parentNode);continue}n.push(c.str),w(this,ba,C1).call(this,c)}},C1=function(e){var T;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Do).push(t);const r=yt.transform(u(this,vd),e.transform);let o=Math.atan2(r[1],r[0]);const c=u(this,Oc)[e.fontName];c.vertical&&(o+=Math.PI/2);let h=u(this,dd)&&c.fontSubstitution||c.fontFamily;h=ke.fontFamilyMap.get(h)||h;const p=Math.hypot(r[2],r[3]),g=p*w(T=ke,es,R1).call(T,h,u(this,Mo));let m,y;o===0?(m=r[4],y=r[5]-g):(m=r[4]+g*Math.sin(o),y=r[5]-g*Math.cos(o));const b="calc(var(--scale-factor)*",S=t.style;u(this,Di)===u(this,Lc)?(S.left=`${(100*m/u(this,pd)).toFixed(2)}%`,S.top=`${(100*y/u(this,fd)).toFixed(2)}%`):(S.left=`${b}${m.toFixed(2)}px)`,S.top=`${b}${y.toFixed(2)}px)`),S.fontSize=`${b}${(u(ke,ur)*p).toFixed(2)}px)`,S.fontFamily=h,n.fontSize=p,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,dd)&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const M=Math.abs(e.transform[0]),R=Math.abs(e.transform[3]);M!==R&&Math.max(M,R)/Math.min(M,R)>1.5&&(_=!0)}if(_&&(n.canvasWidth=c.vertical?e.height:e.width),u(this,md).set(t,n),u(this,Qn).div=t,u(this,Qn).properties=n,w(this,ba,$y).call(this,u(this,Qn)),n.hasText&&u(this,Di).append(t),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),u(this,Di).append(M)}},$y=function(e){var h;const{div:t,properties:n,ctx:r}=e,{style:o}=t;let c="";if(u(ke,ur)>1&&(c=`scale(${1/u(ke,ur)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:p}=o,{canvasWidth:g,fontSize:m}=n;w(h=ke,es,Wy).call(h,r,m*u(this,cr),p);const{width:y}=r.measureText(t.textContent);y>0&&(c=`scaleX(${g*u(this,cr)/y}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)},es=new WeakSet,Op=function(e=null){let t=u(this,No).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,No).set(e,t),u(this,yd).set(t,{size:0,family:""})}return t},Wy=function(e,t,n){const r=u(this,yd).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},x1=function(){if(u(this,ur)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,ur,e.getBoundingClientRect().height),e.remove()},R1=function(e,t){const n=u(this,Oo).get(e);if(n)return n;const r=w(this,es,Op).call(this,t);r.canvas.width=r.canvas.height=Ri,w(this,es,Wy).call(this,r,Ri,e);const o=r.measureText("");let c=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);if(c){const m=c/(c+h);return u(this,Oo).set(e,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Ri,Ri),r.strokeText("g",0,0);let p=r.getImageData(0,0,Ri,Ri).data;h=0;for(let m=p.length-1-3;m>=0;m-=4)if(p[m]>0){h=Math.ceil(m/4/Ri);break}r.clearRect(0,0,Ri,Ri),r.strokeText("A",0,Ri),p=r.getImageData(0,0,Ri,Ri).data,c=0;for(let m=0,y=p.length;m<y;m+=4)if(p[m]>0){c=Ri-Math.floor(m/4/Ri);break}r.canvas.width=r.canvas.height=0;const g=c?c/(c+h):VR;return u(this,Oo).set(e,g),g},C(ke,es),C(ke,Oo,new Map),C(ke,No,new Map),C(ke,yd,new WeakMap),C(ke,ur,null),C(ke,kc,new Set);let Ph=ke;class Fh{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(o){var p;if(!o)return;let c=null;const h=o.name;if(h==="#text")c=o.value;else if(Fh.shouldBuildText(h))(p=o==null?void 0:o.attributes)!=null&&p.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const g of o.children)r(g)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const XR=65536,YR=100,KR=5e3,QR=di?oR:nR,$R=di?lR:u1,WR=di?rR:aR,ZR=di?cR:p1;function JR(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const e=new Zy,{docId:t}=e,n=d.url?tM(d.url):null,r=d.data?eM(d.data):null,o=d.httpHeaders||null,c=d.withCredentials===!0,h=d.password??null,p=d.range instanceof M1?d.range:null,g=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:XR;let m=d.worker instanceof oc?d.worker:null;const y=d.verbosity,b=typeof d.docBaseUrl=="string"&&!Fg(d.docBaseUrl)?d.docBaseUrl:null,S=typeof d.cMapUrl=="string"?d.cMapUrl:null,_=d.cMapPacked!==!1,T=d.CMapReaderFactory||$R,M=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,R=d.StandardFontDataFactory||ZR,N=d.stopAtErrors!==!0,k=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,B=d.isEvalSupported!==!1,U=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!di,P=typeof d.isChrome=="boolean"?d.isChrome:!_i.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),G=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,H=typeof d.disableFontFace=="boolean"?d.disableFontFace:di,O=d.fontExtraProperties===!0,K=d.enableXfa===!0,Z=d.ownerDocument||globalThis.document,et=d.disableRange===!0,it=d.disableStream===!0,dt=d.disableAutoFetch===!0,rt=d.pdfBug===!0,X=d.CanvasFactory||QR,$=d.FilterFactory||WR,J=d.enableHWA===!0,St=p?p.length:d.length??NaN,D=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!di&&!H,V=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:T===u1&&R===p1&&S&&M&&fh(S,document.baseURI)&&fh(M,document.baseURI);d.canvasFactory&&$_("`canvasFactory`-instance option, please use `CanvasFactory` instead."),d.filterFactory&&$_("`filterFactory`-instance option, please use `FilterFactory` instead.");const at=null;Px(y);const nt={canvasFactory:new X({ownerDocument:Z,enableHWA:J}),filterFactory:new $({docId:t,ownerDocument:Z}),cMapReaderFactory:V?null:new T({baseUrl:S,isCompressed:_}),standardFontDataFactory:V?null:new R({baseUrl:M})};if(!m){const lt={verbosity:y,port:fa.workerPort};m=lt.port?oc.fromPort(lt):new oc(lt),e._worker=m}const st={docId:t,apiVersion:"4.8.69",data:r,password:h,disableAutoFetch:dt,rangeChunkSize:g,length:St,docBaseUrl:b,enableXfa:K,evaluatorOptions:{maxImageSize:k,disableFontFace:H,ignoreErrors:N,isEvalSupported:B,isOffscreenCanvasSupported:U,isChrome:P,canvasMaxAreaInBytes:G,fontExtraProperties:O,useSystemFonts:D,cMapUrl:V?S:null,standardFontDataUrl:V?M:null}},gt={disableFontFace:H,fontExtraProperties:O,ownerDocument:Z,pdfBug:rt,styleElement:at,loadingParams:{disableAutoFetch:dt,enableXfa:K}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const lt=m.messageHandler.sendWithPromise("GetDocRequest",st,r?[r.buffer]:null);let mt;if(p)mt=new CR(p,{disableRange:et,disableStream:it});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let ft;di?ft=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&fh(n)?lE:BR:ft=fh(n)?lE:kR,mt=new ft({url:n,length:St,httpHeaders:o,withCredentials:c,rangeChunkSize:g,disableRange:et,disableStream:it})}return lt.then(ft=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const wt=new Ah(t,ft,m.port),Ut=new aM(wt,e,mt,gt,nt);e._transport=Ut,wt.send("Ready",null)})}).catch(e._capability.reject),e}function tM(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(di&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function eM(d){if(di&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return kg(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cE(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var _g;const Eg=class Eg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${yi(Eg,_g)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_g=new WeakMap,C(Eg,_g,0);let Zy=Eg;class M1{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class iM{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return It(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var hr,$n,_s,Jl,Np;class sM{constructor(e,t,n,r=!1){C(this,_s);C(this,hr,null);C(this,$n,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Q_:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new L1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Jd({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return It(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Qa.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1}){var B,U;(B=this._stats)==null||B.time("Overall");const b=this._transport.getRenderingIntent(n,r,m,y),{renderingIntent:S,cacheKey:_}=b;E(this,$n,!1),w(this,_s,Np).call(this),h||(h=this._transport.getOptionalContentConfig(S));let T=this._intentStates.get(_);T||(T=Object.create(null),this._intentStates.set(_,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const M=!!(S&Ji.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(b));const R=P=>{var G;T.renderTasks.delete(N),(this._maybeCleanupAfterRender||M)&&E(this,$n,!0),w(this,_s,Jl).call(this,!M),P?(N.capability.reject(P),this._abortOperatorList({intentState:T,reason:P instanceof Error?P:new Error(P)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(G=globalThis.Stats)!=null&&G.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new t0({callback:R,params:{canvasContext:e,viewport:t,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:g});(T.renderTasks||(T.renderTasks=new Set)).add(N);const k=N.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([P,G])=>{var H;if(this.destroyed){R();return}if((H=this._stats)==null||H.time("Rendering"),!(G.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:P,optionalContentConfig:G}),N.operatorListChanged()}).catch(R),k}getOperatorList({intent:e="display",annotationMode:t=Qa.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var g;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(p))}const c=this._transport.getRenderingIntent(e,t,n,r,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let p;return h.opListReadCapability||(p=Object.create(null),p.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(p),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Fh.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function o(){c.read().then(function({value:p,done:g}){if(g){n(h);return}h.lang??(h.lang=p.lang),Object.assign(h.styles,p.styles),h.items.push(...p.items),o()},r)}const c=t.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),E(this,$n,!1),w(this,_s,Np).call(this),Promise.all(e)}cleanup(e=!1){E(this,$n,!0);const t=w(this,_s,Jl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Q_),t}_startRenderPage(e,t){var r,o;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&w(this,_s,Jl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:c}=n,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},c).getReader(),g=this._intentStates.get(t);g.streamReader=p;const m=()=>{p.read().then(({value:y,done:b})=>{if(b){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,g),m())},y=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const b of g.renderTasks)b.operatorListChanged();w(this,_s,Jl).call(this,!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else if(g.opListReadCapability)g.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof U0){let r=YR;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new hl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}hr=new WeakMap,$n=new WeakMap,_s=new WeakSet,Jl=function(e=!1){if(w(this,_s,Np).call(this),!u(this,$n)||this.destroyed)return!1;if(e)return E(this,hr,setTimeout(()=>{E(this,hr,null),w(this,_s,Jl).call(this,!1)},KR)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,$n,!1),!0},Np=function(){u(this,hr)&&(clearTimeout(u(this,hr)),E(this,hr,null))};var Wn,wg;class nM{constructor(){C(this,Wn,new Map);C(this,wg,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,wg).then(()=>{for(const[r]of u(this,Wn))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){kt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}u(this,Wn).set(t,r)}removeEventListener(e,t){const n=u(this,Wn).get(t);n==null||n(),u(this,Wn).delete(t)}terminate(){for(const[,e]of u(this,Wn))e==null||e();u(this,Wn).clear()}}Wn=new WeakMap,wg=new WeakMap;var Tg,ko,Po,Pc,kp,Fc,Pp;const oe=class oe{constructor({name:e=null,port:t=null,verbosity:n=Fx()}={}){C(this,Pc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=u(oe,Po))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(oe,Po)||E(oe,Po,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return di?Promise.all([Tr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ah("main","worker",e),this._messageHandler.on("ready",function(){}),w(this,Pc,kp).call(this)}_initialize(){if(u(oe,ko)||u(oe,Fc,Pp)){this._setupFakeWorker();return}let{workerSrc:e}=oe;try{oe._isSameOrigin(window.location.href,e)||(e=oe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ah("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,w(this,Pc,kp).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};c();return}catch{Og("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(oe,ko)||(kt("Setting up fake worker."),E(oe,ko,!0)),oe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new nM;this._port=t;const n=`fake${yi(oe,Tg)._++}`,r=new Ah(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new Ah(n,n+"_worker",t),w(this,Pc,kp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=u(oe,Po))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=u(this,Po))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new oe(e)}static get workerSrc(){if(fa.workerSrc)return fa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return It(this,"_setupFakeWorkerGlobal",(async()=>u(this,Fc,Pp)?u(this,Fc,Pp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Tg=new WeakMap,ko=new WeakMap,Po=new WeakMap,Pc=new WeakSet,kp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Fc=new WeakSet,Pp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(oe,Fc),C(oe,Tg,0),C(oe,ko,!1),C(oe,Po),di&&(E(oe,ko,!0),fa.workerSrc||(fa.workerSrc="./pdf.worker.mjs")),oe._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},oe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let oc=oe;var Zn,hn,zc,Hc,dn,Fo,Sh;class aM{constructor(e,t,n,r,o){C(this,Fo);C(this,Zn,new Map);C(this,hn,new Map);C(this,zc,new Map);C(this,Hc,new Map);C(this,dn,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new L1,this.fontLoader=new iR({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return It(this,"annotationStorage",new V0)}getRenderingIntent(e,t=Qa.ENABLE,n=null,r=!1,o=!1){let c=Ji.DISPLAY,h=Uy;switch(e){case"any":c=Ji.ANY;break;case"display":break;case"print":c=Ji.PRINT;break;default:kt(`getRenderingIntent - invalid intent: ${e}`)}const p=c&Ji.PRINT&&n instanceof o1?n:this.annotationStorage;switch(t){case Qa.DISABLE:c+=Ji.ANNOTATIONS_DISABLE;break;case Qa.ENABLE:break;case Qa.ENABLE_FORMS:c+=Ji.ANNOTATIONS_FORMS;break;case Qa.ENABLE_STORAGE:c+=Ji.ANNOTATIONS_STORAGE,h=p.serializable;break;default:kt(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(c+=Ji.IS_EDITING),o&&(c+=Ji.OPLIST);const{ids:g,hash:m}=p.modifiedIds,y=[c,h.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:g}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,dn))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,hn).values())e.push(r._destroy());u(this,hn).clear(),u(this,zc).clear(),u(this,Hc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Zn).clear(),this.filterFactory.destroy(),Ph.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new hl("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{He(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}He(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((h=t.onProgress)==null||h.call(t,this._lastProgress)),this._fullReader.onProgress=p=>{var g;(g=t.onProgress)==null||g.call(t,{loaded:p.loaded,total:p.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(n,r)=>{He(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:h}){if(h){r.close();return}He(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new iM(n,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new by(n.message,n.code);break;case"InvalidPDFException":r=new NE(n.message);break;case"MissingPDFException":r=new ul(n.message);break;case"UnexpectedResponseException":r=new Ng(n.message,n.status);break;case"UnknownErrorException":r=new Ay(n.message,n.details);break;default:re("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(E(this,dn,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?u(this,dn).reject(o):u(this,dn).resolve({password:o})};try{t.onPassword(r,n.code)}catch(o){u(this,dn).reject(o)}}else u(this,dn).reject(new by(n.message,n.code));return u(this,dn).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,hn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:h,fontExtraProperties:p,pdfBug:g}=this._params;if("error"in o){const S=o.error;kt(`Error during font loading: ${S}`),this.commonObjs.resolve(n,S);break}const m=g&&((c=globalThis.FontInspector)!=null&&c.enabled)?(S,_)=>globalThis.FontInspector.fontAdded(S,_):null,y=new sR(o,{disableFontFace:h,inspectFont:m});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:b}=o;He(b,"The imageRef must be defined.");for(const S of u(this,hn).values())for(const[,_]of S.objs)if((_==null?void 0:_.ref)===b)return _.dataLen?(this.commonObjs.resolve(n,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,c])=>{var p;if(this.destroyed)return;const h=u(this,hn).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(p=c==null?void 0:c.bitmap)==null||p.close();return}switch(o){case"Image":h.objs.resolve(n,c),(c==null?void 0:c.dataLen)>Dx&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,zc).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&u(this,Hc).set(o.refStr,e);const c=new sM(t,o,this,this._params.pdfBug);return u(this,hn).set(t,c),c});return u(this,zc).set(t,r),r}getPageIndex(e){return cE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return w(this,Fo,Sh).call(this,"GetFieldObjects")}hasJSActions(){return w(this,Fo,Sh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,Fo,Sh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return w(this,Fo,Sh).call(this,"GetOptionalContentConfig").then(t=>new TR(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Zn).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,c;return{info:r[0],metadata:r[1]?new ER(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return u(this,Zn).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,hn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Zn).clear(),this.filterFactory.destroy(!0),Ph.cleanup()}}cachedPageNumber(e){if(!cE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Hc).get(t)??null}}Zn=new WeakMap,hn=new WeakMap,zc=new WeakMap,Hc=new WeakMap,dn=new WeakMap,Fo=new WeakSet,Sh=function(e,t=null){const n=u(this,Zn).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,Zn).set(e,r),r};const yp=Symbol("INITIAL_DATA");var Hs,bd,Jy;class L1{constructor(){C(this,bd);C(this,Hs,Object.create(null))}get(e,t=null){if(t){const r=w(this,bd,Jy).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,Hs)[e];if(!n||n.data===yp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,Hs)[e];return!!t&&t.data!==yp}resolve(e,t=null){const n=w(this,bd,Jy).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,Hs)){const{data:n}=u(this,Hs)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}E(this,Hs,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Hs)){const{data:t}=u(this,Hs)[e];t!==yp&&(yield[e,t])}}}Hs=new WeakMap,bd=new WeakSet,Jy=function(e){var t;return(t=u(this,Hs))[e]||(t[e]={...Promise.withResolvers(),data:yp})};var dr;class rM{constructor(e){C(this,dr,null);E(this,dr,e),this.onContinue=null}get promise(){return u(this,dr).capability.promise}cancel(e=0){u(this,dr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,dr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,dr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}dr=new WeakMap;var fr,zo;const no=class no{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:h,canvasFactory:p,filterFactory:g,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null}){C(this,fr,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=p,this.filterFactory=g,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rM(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,p;if(this.cancelled)return;if(this._canvas){if(u(no,zo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(no,zo).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:o,background:c}=this.params;this.gfx=new rc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,fr)&&(window.cancelAnimationFrame(u(this,fr)),E(this,fr,null)),u(no,zo).delete(this._canvas),this.callback(e||new U0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,fr,window.requestAnimationFrame(()=>{E(this,fr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(no,zo).delete(this._canvas),this.callback())))}};fr=new WeakMap,zo=new WeakMap,C(no,zo,new WeakSet);let t0=no;const oM="4.8.69",lM="3634dab10";function uE(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function hh(d){return Math.max(0,Math.min(255,255*d))}class hE{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=hh(e),[e,e,e]}static G_HTML([e]){const t=uE(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(hh)}static RGB_HTML(e){return`#${e.map(uE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[hh(1-Math.min(1,e+r)),hh(1-Math.min(1,n+r)),hh(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,o=1-t,c=1-n,h=Math.min(r,o,c);return["CMYK",r,o,c,h]}}class cM{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){re("Abstract method `_createSVG` called.")}}class $0 extends cM{_createSVG(e){return document.createElementNS(In,e)}}class D1{static setupStorage(e,t,n,r,o){const c=r.getValue(t,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?e.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const h of n.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const p=h.target.options,g=p.selectedIndex===-1?"":p[p.selectedIndex].value;r.setValue(t,{value:g})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){const{attributes:c}=t,h=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[p,g]of Object.entries(c))if(g!=null)switch(p){case"class":g.length&&e.setAttribute(p,g.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",g);break;case"style":Object.assign(e.style,g);break;case"textContent":e.textContent=g;break;default:(!h||p!=="href"&&p!=="newWindow")&&e.setAttribute(p,g)}h&&o.addLinkAttributes(e,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(e,c.dataId,t,n)}static render(e){var y,b;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:n});const h=o!=="richText",p=e.div;if(p.append(c),e.viewport){const S=`matrix(${e.viewport.transform.join(",")})`;p.style.transform=S}h&&p.setAttribute("class","xfaLayer xfaFont");const g=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);c.append(S),h&&Fh.shouldBuildText(r.name)&&g.push(S)}return{textDivs:g}}const m=[[r,-1,c]];for(;m.length>0;){const[S,_,T]=m.at(-1);if(_+1===S.children.length){m.pop();continue}const M=S.children[++m.at(-1)[1]];if(M===null)continue;const{name:R}=M;if(R==="#text"){const k=document.createTextNode(M.value);g.push(k),T.append(k);continue}const N=(y=M==null?void 0:M.attributes)!=null&&y.xmlns?document.createElementNS(M.attributes.xmlns,R):document.createElement(R);if(T.append(N),M.attributes&&this.setAttributes({html:N,element:M,storage:t,intent:o,linkService:n}),((b=M.children)==null?void 0:b.length)>0)m.push([M,-1,N]);else if(M.value){const k=document.createTextNode(M.value);h&&Fh.shouldBuildText(R)&&g.push(k),N.append(k)}}for(const S of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:g}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ef=1e3,uM=9,ol=new WeakSet;function ga(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class hM{static create(e){switch(e.data.annotationType){case Ne.LINK:return new O1(e);case Ne.TEXT:return new dM(e);case Ne.WIDGET:switch(e.data.fieldType){case"Tx":return new fM(e);case"Btn":return e.data.radioButton?new P1(e):e.data.checkBox?new gM(e):new mM(e);case"Ch":return new vM(e);case"Sig":return new pM(e)}return new dl(e);case Ne.POPUP:return new i0(e);case Ne.FREETEXT:return new I1(e);case Ne.LINE:return new bM(e);case Ne.SQUARE:return new AM(e);case Ne.CIRCLE:return new SM(e);case Ne.POLYLINE:return new U1(e);case Ne.CARET:return new EM(e);case Ne.INK:return new W0(e);case Ne.POLYGON:return new _M(e);case Ne.HIGHLIGHT:return new j1(e);case Ne.UNDERLINE:return new wM(e);case Ne.SQUIGGLY:return new TM(e);case Ne.STRIKEOUT:return new CM(e);case Ne.STAMP:return new q1(e);case Ne.FILEATTACHMENT:return new xM(e);default:return new Ee(e)}}}var Ho,Bc,Ic,Ad,e0;const rb=class rb{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){C(this,Ad);C(this,Ho,null);C(this,Bc,!1);C(this,Ic,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rb._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;u(this,Ho)||E(this,Ho,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&w(this,Ad,e0).call(this,t),(n=u(this,Ic))==null||n.popup.updateEdited(e)}resetEdited(){var e;u(this,Ho)&&(w(this,Ad,e0).call(this,u(this,Ho).rect),(e=u(this,Ic))==null||e.popup.resetEdited(),E(this,Ho,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof dl||(o.tabIndex=ef);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof i0){const{rotation:T}=t;return!t.hasOwnCanvas&&T!==0&&this.setRotation(T,o),o}const{width:h,height:p}=ga(t.rect);if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const T=t.borderStyle.horizontalCornerRadius,M=t.borderStyle.verticalCornerRadius;if(T>0||M>0){const N=`calc(${T}px * var(--scale-factor)) / calc(${M}px * var(--scale-factor))`;c.borderRadius=N}else if(this instanceof P1){const N=`calc(${h}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;c.borderRadius=N}switch(t.borderStyle.style){case ch.SOLID:c.borderStyle="solid";break;case ch.DASHED:c.borderStyle="dashed";break;case ch.BEVELED:kt("Unimplemented border style: beveled");break;case ch.INSET:kt("Unimplemented border style: inset");break;case ch.UNDERLINE:c.borderBottomStyle="solid";break}const R=t.borderColor||null;R?(E(this,Bc,!0),c.borderColor=yt.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):c.borderWidth=0}const g=yt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:S}=r.rawDims;c.left=`${100*(g[0]-b)/m}%`,c.top=`${100*(g[1]-S)/y}%`;const{rotation:_}=t;return t.hasOwnCanvas||_===0?(c.width=`${100*h/m}%`,c.height=`${100*p/y}%`):this.setRotation(_,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:c}=ga(this.data.rect);let h,p;e%180===0?(h=100*o/n,p=100*c/r):(h=100*c/n,p=100*o/r),t.style.width=`${h}%`,t.style.height=`${p}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const o=r.detail[t],c=o[0],h=o.slice(1);r.target.style[n]=hE[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:hE[`${c}_rgb`](h)})};return It(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||n[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,o]of Object.entries(t)){const c=n[r];if(c){const h={detail:{[r]:o},target:e};c(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,o]=this.data.rect.map(T=>Math.fround(T));if(e.length===8){const[T,M,R,N]=e.subarray(2,6);if(r===T&&o===M&&t===R&&n===N)return}const{style:c}=this.container;let h;if(u(this,Bc)){const{borderColor:T,borderWidth:M}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const p=r-t,g=o-n,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=m.createElement("defs");y.append(b);const S=m.createElement("clipPath"),_=`clippath_${this.data.id}`;S.setAttribute("id",_),S.setAttribute("clipPathUnits","objectBoundingBox"),b.append(S);for(let T=2,M=e.length;T<M;T+=8){const R=e[T],N=e[T+1],k=e[T+2],B=e[T+3],U=m.createElement("rect"),P=(k-t)/p,G=(o-N)/g,H=(R-k)/p,O=(N-B)/g;U.setAttribute("x",P),U.setAttribute("y",G),U.setAttribute("width",H),U.setAttribute("height",O),S.append(U),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${G}" width="${H}" height="${O}"/>`)}u(this,Bc)&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:e}=this,t=E(this,Ic,new i0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){re("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:c,exportValues:h}of r){if(o===-1||c===t)continue;const p=typeof h=="string"?h:null,g=document.querySelector(`[data-element-id="${c}"]`);if(g&&!ol.has(g)){kt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:p,domElement:g})}return n}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==t&&ol.has(r)&&n.push({id:c,exportValue:o,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ho=new WeakMap,Bc=new WeakMap,Ic=new WeakMap,Ad=new WeakSet,e0=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:h,pageY:p}}}}=this;n==null||n.splice(0,4,...e);const{width:g,height:m}=ga(e);t.left=`${100*(e[0]-h)/o}%`,t.top=`${100*(c-e[3]+p)/c}%`,r===0?(t.width=`${100*g/o}%`,t.height=`${100*m/c}%`):this.setRotation(r)};let Ee=rb;var ts,Zr,N1,k1;class O1 extends Ee{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});C(this,ts);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(w(this,ts,N1).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(w(this,ts,k1).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&w(this,ts,Zr).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),w(this,ts,Zr).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=r.get(o);c&&(t[c]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),w(this,ts,Zr).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),w(this,ts,Zr).call(this),!this._fieldObjects){kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var y;r==null||r();const{fields:o,refs:c,include:h}=n,p=[];if(o.length!==0||c.length!==0){const b=new Set(c);for(const S of o){const _=this._fieldObjects[S]||[];for(const{id:T}of _)b.add(T)}for(const S of Object.values(this._fieldObjects))for(const _ of S)b.has(_.id)===h&&p.push(_)}else for(const b of Object.values(this._fieldObjects))p.push(...b);const g=this.annotationStorage,m=[];for(const b of p){const{id:S}=b;switch(m.push(S),b.type){case"text":{const T=b.defaultValue||"";g.setValue(S,{value:T});break}case"checkbox":case"radiobutton":{const T=b.defaultValue===b.exportValues;g.setValue(S,{value:T});break}case"combobox":case"listbox":{const T=b.defaultValue||"";g.setValue(S,{value:T});break}default:continue}const _=document.querySelector(`[data-element-id="${S}"]`);if(_){if(!ol.has(_)){kt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ts=new WeakSet,Zr=function(){this.container.setAttribute("data-internal-link","")},N1=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},w(this,ts,Zr).call(this)},k1=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),w(this,ts,Zr).call(this)};class dM extends Ee{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class dl extends Ee{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return _i.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,c=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(n,c=>{var h;if(n==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}}))})}_setEventListeners(e,t,n,r){var o,c,h;for(const[p,g]of n)(g==="Action"||(o=this.data.actions)!=null&&o[g])&&((g==="Focus"||g==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,p,g,r),g==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(e,t,"blur","Blur",null):g==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":yt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||uM,o=e.style;let c;const h=2,p=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(g/(Wv*r))||1,y=g/m;c=Math.min(r,p(y/Wv))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(r,p(g/Wv))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=yt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class fM extends dl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=n),o.setValue(c.id,{[r]:n})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=e.getValue(t,{value:this.data.fieldValue});let h=c.value||"";const p=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;p&&h.length>p&&(h=h.slice(0,p));let g=c.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;g&&this.data.comb&&(g=g.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:g,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=g??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",g??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ol.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=ef,this._setRequired(n,this.data.required),p&&(n.maxLength=p),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",b=>{const S=this.data.defaultFieldValue??"";n.value=m.userValue=S,m.formattedValue=null});let y=b=>{const{formattedValue:S}=m;S!=null&&(b.target.value=S),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{var T;if(m.focused)return;const{target:_}=S;m.userValue&&(_.value=m.userValue),m.lastCommittedValue=_.value,m.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(T){m.userValue=T.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),T.target.value=m.userValue},formattedValue(T){const{formattedValue:M}=T.detail;m.formattedValue=M,M!=null&&T.target!==document.activeElement&&(T.target.value=M),e.setValue(t,{formattedValue:M})},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var k;const{charLimit:M}=T.detail,{target:R}=T;if(M===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",M);let N=m.userValue;!N||N.length<=M||(N=N.slice(0,M),R.value=m.userValue=N,e.setValue(t,{value:N}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),n.addEventListener("keydown",S=>{var M;m.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(m.commitKey=3),_===-1)return;const{value:T}=S.target;m.lastCommittedValue!==T&&(m.lastCommittedValue=T,m.userValue=T,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",S=>{var T,M;if(!m.focused||!S.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(m.focused=!1);const{value:_}=S.target;m.userValue=_,m.lastCommittedValue!==_&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:m.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),b(S)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",S=>{var U;m.lastCommittedValue=null;const{data:_,target:T}=S,{value:M,selectionStart:R,selectionEnd:N}=T;let k=R,B=N;switch(S.inputType){case"deleteWordBackward":{const P=M.substring(0,R).match(/\w*[^\w]*$/);P&&(k-=P[0].length);break}case"deleteWordForward":{const P=M.substring(R).match(/^[^\w]*\w*/);P&&(B+=P[0].length);break}case"deleteContentBackward":R===N&&(k-=1);break;case"deleteContentForward":R===N&&(B+=1);break}S.preventDefault(),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,change:_||"",willCommit:!1,selStart:k,selEnd:B}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/p;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class pM extends dl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class gM extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ol.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=ef,o.addEventListener("change",c=>{const{name:h,checked:p}=c.target;for(const g of this._getElementsByName(h,n)){const m=p&&g.exportValue===t.exportValue;g.domElement&&(g.domElement.checked=m),e.setValue(g.id,{value:m})}e.setValue(n,{value:p})}),o.addEventListener("resetform",c=>{const h=t.defaultFieldValue||"Off";c.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const h={value(p){p.target.checked=p.detail.value!=="Off",e.setValue(n,{value:p.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class P1 extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const c of this._getElementsByName(t.fieldName,n))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(ol.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=ef,o.addEventListener("change",c=>{const{name:h,checked:p}=c.target;for(const g of this._getElementsByName(h,n))e.setValue(g.id,{value:!1});e.setValue(n,{value:p})}),o.addEventListener("resetform",c=>{const h=t.defaultFieldValue;c.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",h=>{const p={value:g=>{const m=c===g.detail.value;for(const y of this._getElementsByName(g.target.name)){const b=m&&y.id===n;y.domElement&&(y.domElement.checked=b),e.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(p,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class mM extends O1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class vM extends dl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");ol.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=ef;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,n.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const h=m=>{const y=m?"value":"textContent",{options:b,multiple:S}=r;return S?Array.prototype.filter.call(b,_=>_.selected).map(_=>_[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let p=h(!1);const g=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(b){c==null||c();const S=b.detail.value,_=new Set(Array.isArray(S)?S:[S]);for(const T of r.options)T.selected=_.has(T.value);e.setValue(t,{value:h(!0)}),p=h(!1)},multipleSelection(b){r.multiple=!0},remove(b){const S=r.options,_=b.detail.remove;S[_].selected=!1,r.remove(_),S.length>0&&Array.prototype.findIndex.call(S,M=>M.selected)===-1&&(S[0].selected=!0),e.setValue(t,{value:h(!0),items:g(b)}),p=h(!1)},clear(b){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),p=h(!1)},insert(b){const{index:S,displayValue:_,exportValue:T}=b.detail.insert,M=r.children[S],R=document.createElement("option");R.textContent=_,R.value=T,M?M.before(R):r.append(R),e.setValue(t,{value:h(!0),items:g(b)}),p=h(!1)},items(b){const{items:S}=b.detail;for(;r.length!==0;)r.remove(0);for(const _ of S){const{displayValue:T,exportValue:M}=_,R=document.createElement("option");R.textContent=T,R.value=M,r.append(R)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:g(b)}),p=h(!1)},indices(b){const S=new Set(b.detail.indices);for(const _ of b.target.options)_.selected=S.has(_.index);e.setValue(t,{value:h(!0)}),p=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{var S;const y=h(!0),b=h(!1);e.setValue(t,{value:y}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class i0 extends Ee{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Ee._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new yM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${I0}${n}`).join(",")),this.container}}var Uc,Cg,xg,jc,Bo,ye,Jn,qc,Sd,_d,Gc,ta,Bs,ea,Ed,ia,wd,Io,Uo,te,Fp,s0,F1,z1,H1,B1,zp,Hp,n0;class yM{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:c,richText:h,parent:p,rect:g,parentRect:m,open:y}){C(this,te);C(this,Uc,w(this,te,H1).bind(this));C(this,Cg,w(this,te,n0).bind(this));C(this,xg,w(this,te,Hp).bind(this));C(this,jc,w(this,te,zp).bind(this));C(this,Bo,null);C(this,ye,null);C(this,Jn,null);C(this,qc,null);C(this,Sd,null);C(this,_d,null);C(this,Gc,null);C(this,ta,!1);C(this,Bs,null);C(this,ea,null);C(this,Ed,null);C(this,ia,null);C(this,wd,null);C(this,Io,null);C(this,Uo,!1);var b;E(this,ye,e),E(this,wd,r),E(this,Jn,c),E(this,ia,h),E(this,_d,p),E(this,Bo,t),E(this,Ed,g),E(this,Gc,m),E(this,Sd,n),E(this,qc,q0.toDateObject(o)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",u(this,jc)),S.addEventListener("mouseenter",u(this,xg)),S.addEventListener("mouseleave",u(this,Cg)),S.classList.add("popupTriggerArea");for(const S of n)(b=S.container)==null||b.addEventListener("keydown",u(this,Uc));u(this,ye).hidden=!0,y&&w(this,te,zp).call(this)}render(){if(u(this,Bs))return;const e=E(this,Bs,document.createElement("div"));if(e.className="popup",u(this,Bo)){const o=e.style.outlineColor=yt.makeHexColor(...u(this,Bo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=yt.makeHexColor(...u(this,Bo).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=u(this,wd),e.append(t),u(this,qc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,qc).valueOf()})),t.append(o)}const r=u(this,te,Fp);if(r)D1.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(u(this,Jn));e.append(o)}u(this,ye).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const h=r[o];n.append(document.createTextNode(h)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;u(this,Io)||E(this,Io,{contentsObj:u(this,Jn),richText:u(this,ia)}),e&&E(this,ea,null),t&&(E(this,ia,w(this,te,z1).call(this,t)),E(this,Jn,null)),(n=u(this,Bs))==null||n.remove(),E(this,Bs,null)}resetEdited(){var e;u(this,Io)&&({contentsObj:yi(this,Jn)._,richText:yi(this,ia)._}=u(this,Io),E(this,Io,null),(e=u(this,Bs))==null||e.remove(),E(this,Bs,null),E(this,ea,null))}forceHide(){E(this,Uo,this.isVisible),u(this,Uo)&&(u(this,ye).hidden=!0)}maybeShow(){u(this,Uo)&&(u(this,Bs)||w(this,te,Hp).call(this),E(this,Uo,!1),u(this,ye).hidden=!1)}get isVisible(){return u(this,ye).hidden===!1}}Uc=new WeakMap,Cg=new WeakMap,xg=new WeakMap,jc=new WeakMap,Bo=new WeakMap,ye=new WeakMap,Jn=new WeakMap,qc=new WeakMap,Sd=new WeakMap,_d=new WeakMap,Gc=new WeakMap,ta=new WeakMap,Bs=new WeakMap,ea=new WeakMap,Ed=new WeakMap,ia=new WeakMap,wd=new WeakMap,Io=new WeakMap,Uo=new WeakMap,te=new WeakSet,Fp=function(){const e=u(this,ia),t=u(this,Jn);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,ia).html||null},s0=function(){var e,t,n;return((n=(t=(e=u(this,te,Fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},F1=function(){var e,t,n;return((n=(t=(e=u(this,te,Fp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},z1=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,te,F1),fontSize:u(this,te,s0)?`calc(${u(this,te,s0)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n},H1=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,ta))&&w(this,te,zp).call(this)},B1=function(){if(u(this,ea)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=u(this,_d);let c=!!u(this,Gc),h=c?u(this,Gc):u(this,Ed);for(const _ of u(this,Sd))if(!h||yt.intersect(_.data.rect,h)!==null){h=_.data.rect,c=!0;break}const p=yt.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),m=c?h[2]-h[0]+5:0,y=p[0]+m,b=p[1];E(this,ea,[100*(y-r)/t,100*(b-o)/n]);const{style:S}=u(this,ye);S.left=`${u(this,ea)[0]}%`,S.top=`${u(this,ea)[1]}%`},zp=function(){E(this,ta,!u(this,ta)),u(this,ta)?(w(this,te,Hp).call(this),u(this,ye).addEventListener("click",u(this,jc)),u(this,ye).addEventListener("keydown",u(this,Uc))):(w(this,te,n0).call(this),u(this,ye).removeEventListener("click",u(this,jc)),u(this,ye).removeEventListener("keydown",u(this,Uc)))},Hp=function(){u(this,Bs)||this.render(),this.isVisible?u(this,ta)&&u(this,ye).classList.add("focused"):(w(this,te,B1).call(this),u(this,ye).hidden=!1,u(this,ye).style.zIndex=parseInt(u(this,ye).style.zIndex)+1e3)},n0=function(){u(this,ye).classList.remove("focused"),!(u(this,ta)||!this.isVisible)&&(u(this,ye).hidden=!0,u(this,ye).style.zIndex=parseInt(u(this,ye).style.zIndex)-1e3)};class I1 extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Td;class bM extends Ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Td,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=ga(t.rect),o=this.svgFactory.create(n,r,!0),c=E(this,Td,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Td)}addHighlightArea(){this.container.classList.add("highlightArea")}}Td=new WeakMap;var Cd;class AM extends Ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Cd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=ga(t.rect),o=this.svgFactory.create(n,r,!0),c=t.borderStyle.width,h=E(this,Cd,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",c/2),h.setAttribute("y",c/2),h.setAttribute("width",n-c),h.setAttribute("height",r-c),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap;var xd;class SM extends Ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,xd,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=ga(t.rect),o=this.svgFactory.create(n,r,!0),c=t.borderStyle.width,h=E(this,xd,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-c/2),h.setAttribute("ry",r/2-c/2),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;var Rd;class U1 extends Ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Rd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:h}=ga(t),p=this.svgFactory.create(c,h,!0);let g=[];for(let y=0,b=n.length;y<b;y+=2){const S=n[y]-t[0],_=t[3]-n[y+1];g.push(`${S},${_}`)}g=g.join(" ");const m=E(this,Rd,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",g),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),p.append(m),this.container.append(p),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Rd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rd=new WeakMap;class _M extends U1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class EM extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Md;class W0 extends Ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Md,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:r,popupRef:o}}=this,{width:c,height:h}=ga(t),p=this.svgFactory.create(c,h,!0);for(const g of n){let m=[];for(let b=0,S=g.length;b<S;b+=2){const _=g[b]-t[0],T=t[3]-g[b+1];m.push(`${_},${T}`)}m=m.join(" ");const y=this.svgFactory.createElement(this.svgElementName);u(this,Md).push(y),y.setAttribute("points",m),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),p.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return u(this,Md)}addHighlightArea(){this.container.classList.add("highlightArea")}}Md=new WeakMap;class j1 extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class wM extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class TM extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class CM extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class q1 extends Ee{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ld,Dd,a0;class xM extends Ee{constructor(t){var r;super(t,{isRenderable:!0});C(this,Dd);C(this,Ld,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",w(this,Dd,a0).bind(this)),E(this,Ld,r);const{isMac:o}=_i.platform;return t.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&w(this,Dd,a0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Ld)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ld=new WeakMap,Dd=new WeakSet,a0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Od,jo,qo,Nd,ll,G1,r0;class RM{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:h}){C(this,ll);C(this,Od,null);C(this,jo,null);C(this,qo,new Map);C(this,Nd,null);this.div=e,E(this,Od,t),E(this,jo,n),E(this,Nd,h||null),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,qo).size>0}async render(e){var c;const{annotations:t}=e,n=this.div;al(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new $0,annotationStorage:e.annotationStorage||new V0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const p=h.annotationType===Ne.POPUP;if(p){const y=r.get(h.id);if(!y)continue;o.elements=y}else{const{width:y,height:b}=ga(h.rect);if(y<=0||b<=0)continue}o.data=h;const g=hM.create(o);if(!g.isRenderable)continue;if(!p&&h.popupRef){const y=r.get(h.popupRef);y?y.push(g):r.set(h.popupRef,[g])}const m=g.render();h.hidden&&(m.style.visibility="hidden"),await w(this,ll,G1).call(this,m,h.id),g._isEditable&&(u(this,qo).set(g.data.id,g),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(g))}w(this,ll,r0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,al(t,{rotation:e.rotation}),w(this,ll,r0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,qo).values())}getEditableAnnotation(e){return u(this,qo).get(e)}}Od=new WeakMap,jo=new WeakMap,qo=new WeakMap,Nd=new WeakMap,ll=new WeakSet,G1=async function(e,t){var c,h;const n=e.firstChild||e,r=n.id=`${I0}${t}`,o=await((c=u(this,Nd))==null?void 0:c.getAriaAttributes(r));if(o)for(const[p,g]of o)n.setAttribute(p,g);this.div.append(e),(h=u(this,Od))==null||h.moveElementInDOM(this.div,e,n,!1)},r0=function(){if(!u(this,jo))return;const e=this.div;for(const[t,n]of u(this,jo)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n)}u(this,jo).clear()};const bp=/\r\n?|\n/g;var Is,Yi,kd,Go,Ki,Le,V1,X1,Y1,Bp,ya,Ip,Up,K1,l0,Q1;const ne=class ne extends $t{constructor(t){super({...t,name:"freeTextEditor"});C(this,Le);C(this,Is);C(this,Yi,"");C(this,kd,`${this.id}-editor`);C(this,Go,null);C(this,Ki);E(this,Is,t.color||ne._defaultColor||$t._defaultLineColor),E(this,Ki,t.fontSize||ne._defaultFontSize)}static get _keyboardManager(){const t=ne.prototype,n=c=>c.isEmpty(),r=rl.TRANSLATE_SMALL,o=rl.TRANSLATE_BIG;return It(this,"_keyboardManager",new tf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){$t.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ct.FREETEXT_SIZE:ne._defaultFontSize=n;break;case Ct.FREETEXT_COLOR:ne._defaultColor=n;break}}updateParams(t,n){switch(t){case Ct.FREETEXT_SIZE:w(this,Le,V1).call(this,n);break;case Ct.FREETEXT_COLOR:w(this,Le,X1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,ne._defaultFontSize],[Ct.FREETEXT_COLOR,ne._defaultColor||$t._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,u(this,Ki)],[Ct.FREETEXT_COLOR,u(this,Is)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ne._internalPadding*t,-(ne._internalPadding+u(this,Ki))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Dt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,Go,new AbortController);const t=this._uiManager.combinedSignal(u(this,Go));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,kd)),this._isDraggable=!0,(t=u(this,Go))==null||t.abort(),E(this,Go,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Yi),n=E(this,Yi,w(this,Le,Y1).call(this).trimEnd());if(t===n)return;const r=o=>{if(E(this,Yi,o),!o){this.remove();return}w(this,Le,Up).call(this),this._uiManager.rebuild(this),w(this,Le,Bp).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),w(this,Le,Bp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ne._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,kd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,Ki)}px * var(--scale-factor))`,r.color=u(this,Is),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),eg(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[p,g]=this.getInitialTranslation();[p,g]=this.pageTranslationToScreen(p,g);const[m,y]=this.pageDimensions,[b,S]=this.pageTranslation;let _,T;switch(this.rotation){case 0:_=t+(h[0]-b)/m,T=n+this.height-(h[1]-S)/y;break;case 90:_=t+(h[0]-b)/m,T=n-(h[1]-S)/y,[p,g]=[g,-p];break;case 180:_=t-this.width+(h[0]-b)/m,T=n-(h[1]-S)/y,[p,g]=[-p,-g];break;case 270:_=t+(h[0]-b-this.height*y)/m,T=n+(h[1]-S-this.width*m)/y,[p,g]=[-g,p];break}this.setAt(_*o,T*c,p,g)}else this.setAt(t*o,n*c,this.width*o,this.height*c);w(this,Le,Up).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var _,T,M;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=w(_=ne,ya,l0).call(_,n.getData("text")||"").replaceAll(bp,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const h=c.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:p,startOffset:g}=h,m=[],y=[];if(p.nodeType===Node.TEXT_NODE){const R=p.parentElement;if(y.push(p.nodeValue.slice(g).replaceAll(bp,"")),R!==this.editorDiv){let N=m;for(const k of this.editorDiv.childNodes){if(k===R){N=y;continue}N.push(w(T=ne,ya,Ip).call(T,k))}}m.push(p.nodeValue.slice(0,g).replaceAll(bp,""))}else if(p===this.editorDiv){let R=m,N=0;for(const k of this.editorDiv.childNodes)N++===g&&(R=y),R.push(w(M=ne,ya,Ip).call(M,k))}E(this,Yi,`${m.join(`
`)}${o}${y.join(`
`)}`),w(this,Le,Up).call(this);const b=new Range;let S=m.reduce((R,N)=>R+N.length,0);for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const N=R.nodeValue.length;if(S<=N){b.setStart(R,S),b.setEnd(R,S);break}S-=N}c.removeAllRanges(),c.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var h;let o=null;if(t instanceof I1){const{data:{defaultAppearanceData:{fontSize:p,fontColor:g},rect:m,rotation:y,id:b,popupRef:S},textContent:_,textPosition:T,parent:{page:{pageNumber:M}}}=t;if(!_||_.length===0)return null;o=t={annotationType:Dt.FREETEXT,color:Array.from(g),fontSize:p,value:_.join(`
`),position:T,pageIndex:M-1,rect:m.slice(0),rotation:y,id:b,deleted:!1,popupRef:S}}const c=await super.deserialize(t,n,r);return E(c,Ki,t.fontSize),E(c,Is,yt.makeHexColor(...t.color)),E(c,Yi,w(h=ne,ya,l0).call(h,t.value)),c.annotationElementId=t.id||null,c._initialData=o,c}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ne._internalPadding*this.parentScale,r=this.getRect(n,n),o=$t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Is)),c={annotationType:Dt.FREETEXT,color:o,fontSize:u(this,Ki),value:w(this,Le,K1).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!w(this,Le,Q1).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${u(this,Ki)}px * var(--scale-factor))`,r.color=u(this,Is),n.replaceChildren();for(const c of u(this,Yi).split(`
`)){const h=document.createElement("div");h.append(c?document.createTextNode(c):document.createElement("br")),n.append(h)}const o=ne._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:u(this,Yi)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Is=new WeakMap,Yi=new WeakMap,kd=new WeakMap,Go=new WeakMap,Ki=new WeakMap,Le=new WeakSet,V1=function(t){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-u(this,Ki))*this.parentScale),E(this,Ki,o),w(this,Le,Bp).call(this)},r=u(this,Ki);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},X1=function(t){const n=o=>{E(this,Is,this.editorDiv.style.color=o)},r=u(this,Is);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Y1=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(w(r=ne,ya,Ip).call(r,o)),n=o);return t.join(`
`)},Bp=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,h=c.style.display,p=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=h,c.classList.toggle("hidden",p)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},ya=new WeakSet,Ip=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(bp,"")},Up=function(){if(this.editorDiv.replaceChildren(),!!u(this,Yi))for(const t of u(this,Yi).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},K1=function(){return u(this,Yi).replaceAll(" "," ")},l0=function(t){return t.replaceAll(" "," ")},Q1=function(t){const{value:n,fontSize:r,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((h,p)=>h!==o[p])||t.pageIndex!==c},C(ne,ya),Tt(ne,"_freeTextDefaultContent",""),Tt(ne,"_internalPadding",0),Tt(ne,"_defaultColor",null),Tt(ne,"_defaultFontSize",10),Tt(ne,"_type","freetext"),Tt(ne,"_editorType",Dt.FREETEXT);let o0=ne;class $1{toSVGPath(){re("Abstract method `toSVGPath` must be implemented.")}get box(){re("Abstract getter `box` must be implemented.")}serialize(e,t){re("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){re("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){re("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Qi,Us,Vc,Xc,fn,Ft,Vo,Xo,Pd,Fd,Yc,Kc,pr,zd,Rg,Mg,Be,_h,W1,Z1,J1,tw,ew,iw;const jn=class jn{constructor({x:e,y:t},n,r,o,c,h=0){C(this,Be);C(this,Qi);C(this,Us,[]);C(this,Vc);C(this,Xc);C(this,fn,[]);C(this,Ft,new Float64Array(18));C(this,Vo);C(this,Xo);C(this,Pd);C(this,Fd);C(this,Yc);C(this,Kc);C(this,pr,[]);E(this,Qi,n),E(this,Kc,o*r),E(this,Xc,c),u(this,Ft).set([NaN,NaN,NaN,NaN,e,t],6),E(this,Vc,h),E(this,Fd,u(jn,zd)*r),E(this,Pd,u(jn,Mg)*r),E(this,Yc,r),u(this,pr).push(e,t)}isEmpty(){return isNaN(u(this,Ft)[8])}add({x:e,y:t}){var O;E(this,Vo,e),E(this,Xo,t);const[n,r,o,c]=u(this,Qi);let[h,p,g,m]=u(this,Ft).subarray(8,12);const y=e-g,b=t-m,S=Math.hypot(y,b);if(S<u(this,Pd))return!1;const _=S-u(this,Fd),T=_/S,M=T*y,R=T*b;let N=h,k=p;h=g,p=m,g+=M,m+=R,(O=u(this,pr))==null||O.push(e,t);const B=-R/_,U=M/_,P=B*u(this,Kc),G=U*u(this,Kc);return u(this,Ft).set(u(this,Ft).subarray(2,8),0),u(this,Ft).set([g+P,m+G],4),u(this,Ft).set(u(this,Ft).subarray(14,18),12),u(this,Ft).set([g-P,m-G],16),isNaN(u(this,Ft)[6])?(u(this,fn).length===0&&(u(this,Ft).set([h+P,p+G],2),u(this,fn).push(NaN,NaN,NaN,NaN,(h+P-n)/o,(p+G-r)/c),u(this,Ft).set([h-P,p-G],14),u(this,Us).push(NaN,NaN,NaN,NaN,(h-P-n)/o,(p-G-r)/c)),u(this,Ft).set([N,k,h,p,g,m],6),!this.isEmpty()):(u(this,Ft).set([N,k,h,p,g,m],6),Math.abs(Math.atan2(k-p,N-h)-Math.atan2(R,M))<Math.PI/2?([h,p,g,m]=u(this,Ft).subarray(2,6),u(this,fn).push(NaN,NaN,NaN,NaN,((h+g)/2-n)/o,((p+m)/2-r)/c),[h,p,N,k]=u(this,Ft).subarray(14,18),u(this,Us).push(NaN,NaN,NaN,NaN,((N+h)/2-n)/o,((k+p)/2-r)/c),!0):([N,k,h,p,g,m]=u(this,Ft).subarray(0,6),u(this,fn).push(((N+5*h)/6-n)/o,((k+5*p)/6-r)/c,((5*h+g)/6-n)/o,((5*p+m)/6-r)/c,((h+g)/2-n)/o,((p+m)/2-r)/c),[g,m,h,p,N,k]=u(this,Ft).subarray(12,18),u(this,Us).push(((N+5*h)/6-n)/o,((k+5*p)/6-r)/c,((5*h+g)/6-n)/o,((5*p+m)/6-r)/c,((h+g)/2-n)/o,((p+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,fn),t=u(this,Us);if(isNaN(u(this,Ft)[6])&&!this.isEmpty())return w(this,Be,W1).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);w(this,Be,J1).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return w(this,Be,Z1).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,o,c){return new sw(e,t,n,r,o,c)}getOutlines(){var y;const e=u(this,fn),t=u(this,Us),n=u(this,Ft),[r,o,c,h]=u(this,Qi),p=new Float64Array((((y=u(this,pr))==null?void 0:y.length)??0)+2);for(let b=0,S=p.length-2;b<S;b+=2)p[b]=(u(this,pr)[b]-r)/c,p[b+1]=(u(this,pr)[b+1]-o)/h;if(p[p.length-2]=(u(this,Vo)-r)/c,p[p.length-1]=(u(this,Xo)-o)/h,isNaN(n[6])&&!this.isEmpty())return w(this,Be,tw).call(this,p);const g=new Float64Array(u(this,fn).length+24+u(this,Us).length);let m=e.length;for(let b=0;b<m;b+=2){if(isNaN(e[b])){g[b]=g[b+1]=NaN;continue}g[b]=e[b],g[b+1]=e[b+1]}m=w(this,Be,iw).call(this,g,m);for(let b=t.length-6;b>=6;b-=6)for(let S=0;S<6;S+=2){if(isNaN(t[b+S])){g[m]=g[m+1]=NaN,m+=2;continue}g[m]=t[b+S],g[m+1]=t[b+S+1],m+=2}return w(this,Be,ew).call(this,g,m),this.newFreeDrawOutline(g,p,u(this,Qi),u(this,Yc),u(this,Vc),u(this,Xc))}};Qi=new WeakMap,Us=new WeakMap,Vc=new WeakMap,Xc=new WeakMap,fn=new WeakMap,Ft=new WeakMap,Vo=new WeakMap,Xo=new WeakMap,Pd=new WeakMap,Fd=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,pr=new WeakMap,zd=new WeakMap,Rg=new WeakMap,Mg=new WeakMap,Be=new WeakSet,_h=function(){const e=u(this,Ft).subarray(4,6),t=u(this,Ft).subarray(16,18),[n,r,o,c]=u(this,Qi);return[(u(this,Vo)+(e[0]-t[0])/2-n)/o,(u(this,Xo)+(e[1]-t[1])/2-r)/c,(u(this,Vo)+(t[0]-e[0])/2-n)/o,(u(this,Xo)+(t[1]-e[1])/2-r)/c]},W1=function(){const[e,t,n,r]=u(this,Qi),[o,c,h,p]=w(this,Be,_h).call(this);return`M${(u(this,Ft)[2]-e)/n} ${(u(this,Ft)[3]-t)/r} L${(u(this,Ft)[4]-e)/n} ${(u(this,Ft)[5]-t)/r} L${o} ${c} L${h} ${p} L${(u(this,Ft)[16]-e)/n} ${(u(this,Ft)[17]-t)/r} L${(u(this,Ft)[14]-e)/n} ${(u(this,Ft)[15]-t)/r} Z`},Z1=function(e){const t=u(this,Us);e.push(`L${t[4]} ${t[5]} Z`)},J1=function(e){const[t,n,r,o]=u(this,Qi),c=u(this,Ft).subarray(4,6),h=u(this,Ft).subarray(16,18),[p,g,m,y]=w(this,Be,_h).call(this);e.push(`L${(c[0]-t)/r} ${(c[1]-n)/o} L${p} ${g} L${m} ${y} L${(h[0]-t)/r} ${(h[1]-n)/o}`)},tw=function(e){const t=u(this,Ft),[n,r,o,c]=u(this,Qi),[h,p,g,m]=w(this,Be,_h).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/c,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/c,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/c,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/c],0),this.newFreeDrawOutline(y,e,u(this,Qi),u(this,Yc),u(this,Vc),u(this,Xc))},ew=function(e,t){const n=u(this,Us);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},iw=function(e,t){const n=u(this,Ft).subarray(4,6),r=u(this,Ft).subarray(16,18),[o,c,h,p]=u(this,Qi),[g,m,y,b]=w(this,Be,_h).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-c)/p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-c)/p],t),t+=24},C(jn,zd,8),C(jn,Rg,2),C(jn,Mg,u(jn,zd)+u(jn,Rg));let sg=jn;var Qc,Yo,sa,Hd,$i,Bd,_e,ki,Eh,wh,nw;class sw extends $1{constructor(t,n,r,o,c,h){super();C(this,ki);C(this,Qc);C(this,Yo,null);C(this,sa);C(this,Hd);C(this,$i);C(this,Bd);C(this,_e);E(this,_e,t),E(this,$i,n),E(this,Qc,r),E(this,Bd,o),E(this,sa,c),E(this,Hd,h),w(this,ki,nw).call(this,h);const{x:p,y:g,width:m,height:y}=u(this,Yo);for(let b=0,S=t.length;b<S;b+=2)t[b]=(t[b]-p)/m,t[b+1]=(t[b+1]-g)/y;for(let b=0,S=n.length;b<S;b+=2)n[b]=(n[b]-p)/m,n[b+1]=(n[b+1]-g)/y}toSVGPath(){const t=[`M${u(this,_e)[4]} ${u(this,_e)[5]}`];for(let n=6,r=u(this,_e).length;n<r;n+=6){if(isNaN(u(this,_e)[n])){t.push(`L${u(this,_e)[n+4]} ${u(this,_e)[n+5]}`);continue}t.push(`C${u(this,_e)[n]} ${u(this,_e)[n+1]} ${u(this,_e)[n+2]} ${u(this,_e)[n+3]} ${u(this,_e)[n+4]} ${u(this,_e)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,o],c){const h=r-t,p=o-n;let g,m;switch(c){case 0:g=w(this,ki,Eh).call(this,u(this,_e),t,o,h,-p),m=w(this,ki,Eh).call(this,u(this,$i),t,o,h,-p);break;case 90:g=w(this,ki,wh).call(this,u(this,_e),t,n,h,p),m=w(this,ki,wh).call(this,u(this,$i),t,n,h,p);break;case 180:g=w(this,ki,Eh).call(this,u(this,_e),r,n,-h,p),m=w(this,ki,Eh).call(this,u(this,$i),r,n,-h,p);break;case 270:g=w(this,ki,wh).call(this,u(this,_e),r,o,-h,-p),m=w(this,ki,wh).call(this,u(this,$i),r,o,-h,-p);break}return{outline:Array.from(g),points:[Array.from(m)]}}get box(){return u(this,Yo)}newOutliner(t,n,r,o,c,h=0){return new sg(t,n,r,o,c,h)}getNewOutline(t,n){const{x:r,y:o,width:c,height:h}=u(this,Yo),[p,g,m,y]=u(this,Qc),b=c*m,S=h*y,_=r*m+p,T=o*y+g,M=this.newOutliner({x:u(this,$i)[0]*b+_,y:u(this,$i)[1]*S+T},u(this,Qc),u(this,Bd),t,u(this,Hd),n??u(this,sa));for(let R=2;R<u(this,$i).length;R+=2)M.add({x:u(this,$i)[R]*b+_,y:u(this,$i)[R+1]*S+T});return M.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Qc=new WeakMap,Yo=new WeakMap,sa=new WeakMap,Hd=new WeakMap,$i=new WeakMap,Bd=new WeakMap,_e=new WeakMap,ki=new WeakSet,Eh=function(t,n,r,o,c){const h=new Float64Array(t.length);for(let p=0,g=t.length;p<g;p+=2)h[p]=n+t[p]*o,h[p+1]=r+t[p+1]*c;return h},wh=function(t,n,r,o,c){const h=new Float64Array(t.length);for(let p=0,g=t.length;p<g;p+=2)h[p]=n+t[p+1]*o,h[p+1]=r+t[p]*c;return h},nw=function(t){const n=u(this,_e);let r=n[4],o=n[5],c=r,h=o,p=r,g=o,m=r,y=o;const b=t?Math.max:Math.min;for(let R=6,N=n.length;R<N;R+=6){if(isNaN(n[R]))c=Math.min(c,n[R+4]),h=Math.min(h,n[R+5]),p=Math.max(p,n[R+4]),g=Math.max(g,n[R+5]),y<n[R+5]?(m=n[R+4],y=n[R+5]):y===n[R+5]&&(m=b(m,n[R+4]));else{const k=yt.bezierBoundingBox(r,o,...n.slice(R,R+6));c=Math.min(c,k[0]),h=Math.min(h,k[1]),p=Math.max(p,k[2]),g=Math.max(g,k[3]),y<k[3]?(m=k[2],y=k[3]):y===k[3]&&(m=b(m,k[2]))}r=n[R+4],o=n[R+5]}const S=c-u(this,sa),_=h-u(this,sa),T=p-c+2*u(this,sa),M=g-h+2*u(this,sa);E(this,Yo,{x:S,y:_,width:T,height:M,lastPoint:[m,y]})};var Id,gr,js,wi,aw,jp,rw,ow,c0;class dE{constructor(e,t=0,n=0,r=!0){C(this,wi);C(this,Id);C(this,gr,[]);C(this,js,[]);let o=1/0,c=-1/0,h=1/0,p=-1/0;const g=10**-4;for(const{x:M,y:R,width:N,height:k}of e){const B=Math.floor((M-t)/g)*g,U=Math.ceil((M+N+t)/g)*g,P=Math.floor((R-t)/g)*g,G=Math.ceil((R+k+t)/g)*g,H=[B,P,G,!0],O=[U,P,G,!1];u(this,gr).push(H,O),o=Math.min(o,B),c=Math.max(c,U),h=Math.min(h,P),p=Math.max(p,G)}const m=c-o+2*n,y=p-h+2*n,b=o-n,S=h-n,_=u(this,gr).at(r?-1:-2),T=[_[0],_[2]];for(const M of u(this,gr)){const[R,N,k]=M;M[0]=(R-b)/m,M[1]=(N-S)/y,M[2]=(k-S)/y}E(this,Id,{x:b,y:S,width:m,height:y,lastPoint:T})}getOutlines(){u(this,gr).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,gr))t[3]?(e.push(...w(this,wi,c0).call(this,t)),w(this,wi,rw).call(this,t)):(w(this,wi,ow).call(this,t),e.push(...w(this,wi,c0).call(this,t)));return w(this,wi,aw).call(this,e)}}Id=new WeakMap,gr=new WeakMap,js=new WeakMap,wi=new WeakSet,aw=function(e){const t=[],n=new Set;for(const c of e){const[h,p,g]=c;t.push([h,p,c],[h,g,c])}t.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=t.length;c<h;c+=2){const p=t[c][2],g=t[c+1][2];p.push(g),g.push(p),n.add(p),n.add(g)}const r=[];let o;for(;n.size>0;){const c=n.values().next().value;let[h,p,g,m,y]=c;n.delete(c);let b=h,S=p;for(o=[h,g],r.push(o);;){let _;if(n.has(m))_=m;else if(n.has(y))_=y;else break;n.delete(_),[h,p,g,m,y]=_,b!==h&&(o.push(b,S,h,S===p?p:g),b=h),S=S===p?g:p}o.push(b,S)}return new MM(r,u(this,Id))},jp=function(e){const t=u(this,js);let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>1,c=t[o][0];if(c===e)return o;c<e?n=o+1:r=o-1}return r+1},rw=function([,e,t]){const n=w(this,wi,jp).call(this,e);u(this,js).splice(n,0,[e,t])},ow=function([,e,t]){const n=w(this,wi,jp).call(this,e);for(let r=n;r<u(this,js).length;r++){const[o,c]=u(this,js)[r];if(o!==e)break;if(o===e&&c===t){u(this,js).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,c]=u(this,js)[r];if(o!==e)break;if(o===e&&c===t){u(this,js).splice(r,1);return}}},c0=function(e){const[t,n,r]=e,o=[[t,n,r]],c=w(this,wi,jp).call(this,r);for(let h=0;h<c;h++){const[p,g]=u(this,js)[h];for(let m=0,y=o.length;m<y;m++){const[,b,S]=o[m];if(!(g<=b||S<=p)){if(b>=p){if(S>g)o[m][1]=g;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=p,S>g&&o.push([t,g,S])}}}return o};var Ud,$c;class MM extends $1{constructor(t,n){super();C(this,Ud);C(this,$c);E(this,$c,t),E(this,Ud,n)}toSVGPath(){const t=[];for(const n of u(this,$c)){let[r,o]=n;t.push(`M${r} ${o}`);for(let c=2;c<n.length;c+=2){const h=n[c],p=n[c+1];h===r?(t.push(`V${p}`),o=p):p===o&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")}serialize([t,n,r,o],c){const h=[],p=r-t,g=o-n;for(const m of u(this,$c)){const y=new Array(m.length);for(let b=0;b<m.length;b+=2)y[b]=t+m[b]*p,y[b+1]=o-m[b+1]*g;h.push(y)}return h}get box(){return u(this,Ud)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Ud=new WeakMap,$c=new WeakMap;class u0 extends sg{newFreeDrawOutline(e,t,n,r,o,c){return new LM(e,t,n,r,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class LM extends sw{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,r,o,c=0){return new u0(e,t,n,r,o,c)}}var qs,Ko,Wc,Fe,jd,Zc,qd,Gd,mr,Gs,Jc,Vd,Jt,h0,d0,f0,Jr,lw,Ya;const Mi=class Mi{constructor({editor:e=null,uiManager:t=null}){C(this,Jt);C(this,qs,null);C(this,Ko,null);C(this,Wc);C(this,Fe,null);C(this,jd,!1);C(this,Zc,!1);C(this,qd,null);C(this,Gd);C(this,mr,null);C(this,Gs,null);C(this,Jc);var n;e?(E(this,Zc,!1),E(this,Jc,Ct.HIGHLIGHT_COLOR),E(this,qd,e)):(E(this,Zc,!0),E(this,Jc,Ct.HIGHLIGHT_DEFAULT_COLOR)),E(this,Gs,(e==null?void 0:e._uiManager)||t),E(this,Gd,u(this,Gs)._eventBus),E(this,Wc,(e==null?void 0:e.color)||((n=u(this,Gs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Mi,Vd)||E(Mi,Vd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return It(this,"_keyboardManager",new tf([[["Escape","mac+Escape"],Mi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mi.prototype._moveToPrevious],[["Home","mac+Home"],Mi.prototype._moveToBeginning],[["End","mac+End"],Mi.prototype._moveToEnd]]))}renderButton(){const e=E(this,qs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,Gs)._signal;e.addEventListener("click",w(this,Jt,Jr).bind(this),{signal:t}),e.addEventListener("keydown",w(this,Jt,f0).bind(this),{signal:t});const n=E(this,Ko,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,Wc),e.append(n),e}renderMainDropdown(){const e=E(this,Fe,w(this,Jt,h0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,qs)){w(this,Jt,Jr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&w(this,Jt,d0).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,Jt,Ya)){w(this,Jt,Jr).call(this,e);return}if(e.target===u(this,qs)){(t=u(this,Fe).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,Fe))==null?void 0:t.firstChild)||e.target===u(this,qs)){u(this,Jt,Ya)&&this._hideDropdownFromKeyboard();return}u(this,Jt,Ya)||w(this,Jt,Jr).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,Jt,Ya)){w(this,Jt,Jr).call(this,e);return}(t=u(this,Fe).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Jt,Ya)){w(this,Jt,Jr).call(this,e);return}(t=u(this,Fe).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Fe))==null||e.classList.add("hidden"),(t=u(this,mr))==null||t.abort(),E(this,mr,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Zc)){if(!u(this,Jt,Ya)){(e=u(this,qd))==null||e.unselect();return}this.hideDropdown(),u(this,qs).focus({preventScroll:!0,focusVisible:u(this,jd)})}}updateColor(e){if(u(this,Ko)&&(u(this,Ko).style.backgroundColor=e),!u(this,Fe))return;const t=u(this,Gs).highlightColors.values();for(const n of u(this,Fe).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,qs))==null||e.remove(),E(this,qs,null),E(this,Ko,null),(t=u(this,Fe))==null||t.remove(),E(this,Fe,null)}};qs=new WeakMap,Ko=new WeakMap,Wc=new WeakMap,Fe=new WeakMap,jd=new WeakMap,Zc=new WeakMap,qd=new WeakMap,Gd=new WeakMap,mr=new WeakMap,Gs=new WeakMap,Jc=new WeakMap,Vd=new WeakMap,Jt=new WeakSet,h0=function(){const e=document.createElement("div"),t=u(this,Gs)._signal;e.addEventListener("contextmenu",Ts,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of u(this,Gs).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",u(Mi,Vd)[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===u(this,Wc)),o.addEventListener("click",w(this,Jt,d0).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",w(this,Jt,f0).bind(this),{signal:t}),e},d0=function(e,t){t.stopPropagation(),u(this,Gd).dispatch("switchannotationeditorparams",{source:this,type:u(this,Jc),value:e})},f0=function(e){Mi._keyboardManager.exec(this,e)},Jr=function(e){if(u(this,Jt,Ya)){this.hideDropdown();return}if(E(this,jd,e.detail===0),u(this,mr)||(E(this,mr,new AbortController),window.addEventListener("pointerdown",w(this,Jt,lw).bind(this),{signal:u(this,Gs).combinedSignal(u(this,mr))})),u(this,Fe)){u(this,Fe).classList.remove("hidden");return}const t=E(this,Fe,w(this,Jt,h0).call(this));u(this,qs).append(t)},lw=function(e){var t;(t=u(this,Fe))!=null&&t.contains(e.target)||this.hideDropdown()},Ya=function(){return u(this,Fe)&&!u(this,Fe).classList.contains("hidden")},C(Mi,Vd,null);let ng=Mi;var tu,Xd,na,Qo,eu,ys,Yd,Kd,$o,Vs,ui,Oi,iu,aa,ze,su,bs,Qd,Mt,p0,qp,cw,uw,hw,g0,to,Es,tc,dw,Gp,Th,fw,pw,gw,mw,vw;const Xt=class Xt extends $t{constructor(t){super({...t,name:"highlightEditor"});C(this,Mt);C(this,tu,null);C(this,Xd,0);C(this,na);C(this,Qo,null);C(this,eu,null);C(this,ys,null);C(this,Yd,null);C(this,Kd,0);C(this,$o,null);C(this,Vs,null);C(this,ui,null);C(this,Oi,!1);C(this,iu,null);C(this,aa);C(this,ze,null);C(this,su,"");C(this,bs);C(this,Qd,"");this.color=t.color||Xt._defaultColor,E(this,bs,t.thickness||Xt._defaultThickness),E(this,aa,t.opacity||Xt._defaultOpacity),E(this,na,t.boxes||null),E(this,Qd,t.methodOfCreation||""),E(this,su,t.text||""),this._isDraggable=!1,t.highlightId>-1?(E(this,Oi,!0),w(this,Mt,qp).call(this,t),w(this,Mt,to).call(this)):u(this,na)&&(E(this,tu,t.anchorNode),E(this,Xd,t.anchorOffset),E(this,Yd,t.focusNode),E(this,Kd,t.focusOffset),w(this,Mt,p0).call(this),w(this,Mt,to).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Xt.prototype;return It(this,"_keyboardManager",new tf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Oi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,bs),methodOfCreation:u(this,Qd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;$t.initialize(t,n),Xt._defaultColor||(Xt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ct.HIGHLIGHT_DEFAULT_COLOR:Xt._defaultColor=n;break;case Ct.HIGHLIGHT_THICKNESS:Xt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,iu)}updateParams(t,n){switch(t){case Ct.HIGHLIGHT_COLOR:w(this,Mt,cw).call(this,n);break;case Ct.HIGHLIGHT_THICKNESS:w(this,Mt,uw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_DEFAULT_COLOR,Xt._defaultColor],[Ct.HIGHLIGHT_THICKNESS,Xt._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||Xt._defaultColor],[Ct.HIGHLIGHT_THICKNESS,u(this,bs)||Xt._defaultThickness],[Ct.HIGHLIGHT_FREE,u(this,Oi)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(E(this,eu,new ng({editor:this})),t.addColorPicker(u(this,eu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,Mt,Th).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,w(this,Mt,Th).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){w(this,Mt,g0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,Mt,to).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?w(this,Mt,g0).call(this):t&&(w(this,Mt,to).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,c,h;const{drawLayer:n}=this.parent;let r;u(this,Oi)?(t=(t-this.rotation+360)%360,r=w(o=Xt,Es,tc).call(o,u(this,Vs).box,t)):r=w(c=Xt,Es,tc).call(c,this,t),n.rotate(u(this,ui),t),n.rotate(u(this,ze),t),n.updateBox(u(this,ui),r),n.updateBox(u(this,ze),w(h=Xt,Es,tc).call(h,u(this,ys).box,t))}render(){if(this.div)return this.div;const t=super.render();u(this,su)&&(t.setAttribute("aria-label",u(this,su)),t.setAttribute("role","mark")),u(this,Oi)?t.classList.add("free"):this.div.addEventListener("keydown",w(this,Mt,dw).bind(this),{signal:this._uiManager._signal});const n=E(this,$o,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Qo);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),eg(this,u(this,$o),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(u(this,ze),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(u(this,ze),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:w(this,Mt,Gp).call(this,!0);break;case 1:case 3:w(this,Mt,Gp).call(this,!1);break}}select(){var t,n;super.select(),u(this,ze)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,ze),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(u(this,ze),"selected"))}unselect(){var t;super.unselect(),u(this,ze)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,ze),"selected"),u(this,Oi)||w(this,Mt,Gp).call(this,!1))}get _mustFixPosition(){return!u(this,Oi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(u(this,ui),t),this.parent.drawLayer.show(u(this,ze),t))}static startHighlighting(t,n,{target:r,x:o,y:c}){const{x:h,y:p,width:g,height:m}=r.getBoundingClientRect(),y=new AbortController,b=t.combinedSignal(y),S=T=>{T.preventDefault(),T.stopPropagation()},_=T=>{y.abort(),w(this,Es,mw).call(this,t,T)};window.addEventListener("blur",_,{signal:b}),window.addEventListener("pointerup",_,{signal:b}),window.addEventListener("pointerdown",S,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ts,{signal:b}),r.addEventListener("pointermove",w(this,Es,gw).bind(this,t),{signal:b}),this._freeHighlight=new u0({x:o,y:c},[h,p,g,m],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,r){var T,M,R,N;let o=null;if(t instanceof j1){const{data:{quadPoints:k,rect:B,rotation:U,id:P,color:G,opacity:H,popupRef:O},parent:{page:{pageNumber:K}}}=t;o=t={annotationType:Dt.HIGHLIGHT,color:Array.from(G),opacity:H,quadPoints:k,boxes:null,pageIndex:K-1,rect:B.slice(0),rotation:U,id:P,deleted:!1,popupRef:O}}else if(t instanceof W0){const{data:{inkLists:k,rect:B,rotation:U,id:P,color:G,borderStyle:{rawWidth:H},popupRef:O},parent:{page:{pageNumber:K}}}=t;o=t={annotationType:Dt.HIGHLIGHT,color:Array.from(G),thickness:H,inkLists:k,boxes:null,pageIndex:K-1,rect:B.slice(0),rotation:U,id:P,deleted:!1,popupRef:O}}const{color:c,quadPoints:h,inkLists:p,opacity:g}=t,m=await super.deserialize(t,n,r);m.color=yt.makeHexColor(...c),E(m,aa,g||1),p&&E(m,bs,t.thickness),m.annotationElementId=t.id||null,m._initialData=o;const[y,b]=m.pageDimensions,[S,_]=m.pageTranslation;if(h){const k=E(m,na,[]);for(let B=0;B<h.length;B+=8)k.push({x:(h[B]-S)/y,y:1-(h[B+1]-_)/b,width:(h[B+2]-h[B])/y,height:(h[B+1]-h[B+5])/b});w(T=m,Mt,p0).call(T),w(M=m,Mt,to).call(M),m.rotate(m.rotation)}else if(p){E(m,Oi,!0);const k=p[0],B={x:k[0]-S,y:b-(k[1]-_)},U=new u0(B,[0,0,y,b],1,u(m,bs)/2,!0,.001);for(let H=0,O=k.length;H<O;H+=2)B.x=k[H]-S,B.y=b-(k[H+1]-_),U.add(B);const{id:P,clipPathId:G}=n.drawLayer.draw(U,m.color,m._defaultOpacity,!0);w(R=m,Mt,qp).call(R,{highlightOutlines:U.getOutlines(),highlightId:P,clipPathId:G}),w(N=m,Mt,to).call(N)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=$t._colorManager.convert(this.color),o={annotationType:Dt.HIGHLIGHT,color:r,opacity:u(this,aa),thickness:u(this,bs),quadPoints:w(this,Mt,fw).call(this),outlines:w(this,Mt,pw).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:w(this,Mt,Th).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,Mt,vw).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};tu=new WeakMap,Xd=new WeakMap,na=new WeakMap,Qo=new WeakMap,eu=new WeakMap,ys=new WeakMap,Yd=new WeakMap,Kd=new WeakMap,$o=new WeakMap,Vs=new WeakMap,ui=new WeakMap,Oi=new WeakMap,iu=new WeakMap,aa=new WeakMap,ze=new WeakMap,su=new WeakMap,bs=new WeakMap,Qd=new WeakMap,Mt=new WeakSet,p0=function(){const t=new dE(u(this,na),.001);E(this,Vs,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,Vs).box;const n=new dE(u(this,na),.0025,.001,this._uiManager.direction==="ltr");E(this,ys,n.getOutlines());const{lastPoint:r}=u(this,ys).box;E(this,iu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},qp=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var y,b;if(E(this,Vs,t),E(this,ys,t.getNewOutline(u(this,bs)/2+1.5,.0025)),n>=0)E(this,ui,n),E(this,Qo,r),this.parent.drawLayer.finalizeLine(n,t),E(this,ze,this.parent.drawLayer.drawOutline(u(this,ys)));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,ui),t),this.parent.drawLayer.updateBox(u(this,ui),w(y=Xt,Es,tc).call(y,u(this,Vs).box,(S-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,ze),u(this,ys)),this.parent.drawLayer.updateBox(u(this,ze),w(b=Xt,Es,tc).call(b,u(this,ys).box,S))}const{x:c,y:h,width:p,height:g}=t.box;switch(this.rotation){case 0:this.x=c,this.y=h,this.width=p,this.height=g;break;case 90:{const[S,_]=this.parentDimensions;this.x=h,this.y=1-c,this.width=p*_/S,this.height=g*S/_;break}case 180:this.x=1-c,this.y=1-h,this.width=p,this.height=g;break;case 270:{const[S,_]=this.parentDimensions;this.x=1-h,this.y=c,this.width=p*_/S,this.height=g*S/_;break}}const{lastPoint:m}=u(this,ys).box;E(this,iu,[(m[0]-c)/p,(m[1]-h)/g])},cw=function(t){const n=(c,h)=>{var p,g,m;this.color=c,(p=this.parent)==null||p.drawLayer.changeColor(u(this,ui),c),(g=u(this,eu))==null||g.updateColor(c),E(this,aa,h),(m=this.parent)==null||m.drawLayer.changeOpacity(u(this,ui),h)},r=this.color,o=u(this,aa);this.addCommands({cmd:n.bind(this,t,Xt._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},uw=function(t){const n=u(this,bs),r=o=>{E(this,bs,o),w(this,Mt,hw).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},hw=function(t){if(!u(this,Oi))return;w(this,Mt,qp).call(this,{highlightOutlines:u(this,Vs).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},g0=function(){u(this,ui)===null||!this.parent||(this.parent.drawLayer.remove(u(this,ui)),E(this,ui,null),this.parent.drawLayer.remove(u(this,ze)),E(this,ze,null))},to=function(t=this.parent){u(this,ui)===null&&({id:yi(this,ui)._,clipPathId:yi(this,Qo)._}=t.drawLayer.draw(u(this,Vs),this.color,u(this,aa)),E(this,ze,t.drawLayer.drawOutline(u(this,ys))),u(this,$o)&&(u(this,$o).style.clipPath=u(this,Qo)))},Es=new WeakSet,tc=function({x:t,y:n,width:r,height:o},c){switch(c){case 90:return{x:1-n-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-n-o,width:r,height:o};case 270:return{x:n,y:1-t-r,width:o,height:r}}return{x:t,y:n,width:r,height:o}},dw=function(t){Xt._keyboardManager.exec(this,t)},Gp=function(t){if(!u(this,tu))return;const n=window.getSelection();t?n.setPosition(u(this,tu),u(this,Xd)):n.setPosition(u(this,Yd),u(this,Kd))},Th=function(){return u(this,Oi)?this.rotation:0},fw=function(){if(u(this,Oi))return null;const[t,n]=this.pageDimensions,[r,o]=this.pageTranslation,c=u(this,na),h=new Float32Array(c.length*8);let p=0;for(const{x:g,y:m,width:y,height:b}of c){const S=g*t+r,_=(1-m-b)*n+o;h[p]=h[p+4]=S,h[p+1]=h[p+3]=_,h[p+2]=h[p+6]=S+y*t,h[p+5]=h[p+7]=_+b*n,p+=8}return h},pw=function(t){return u(this,Vs).serialize(t,w(this,Mt,Th).call(this))},gw=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},mw=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},vw=function(t){const{color:n}=this._initialData;return t.color.some((r,o)=>r!==n[o])},C(Xt,Es),Tt(Xt,"_defaultColor",null),Tt(Xt,"_defaultOpacity",1),Tt(Xt,"_defaultThickness",12),Tt(Xt,"_type","highlight"),Tt(Xt,"_editorType",Dt.HIGHLIGHT),Tt(Xt,"_freeHighlightId",-1),Tt(Xt,"_freeHighlight",null),Tt(Xt,"_freeHighlightClipId","");let ag=Xt;var Wo,Zo,pn,ra,As,Jo,tl,el,oa,nu,il,sl,vr,ot,yw,bw,Aw,Sw,v0,_w,y0,Ew,ww,Tw,Cw,xw,eo,b0,A0,S0,Vp,Xp,ec,_0,Yp,Aa,Rw,E0,Mw,Lw,w0,Kp,Ch;const he=class he extends $t{constructor(t){super({...t,name:"inkEditor"});C(this,ot);C(this,Wo,0);C(this,Zo,0);C(this,pn,null);C(this,ra,new Path2D);C(this,As,!1);C(this,Jo,null);C(this,tl,!1);C(this,el,!1);C(this,oa,null);C(this,nu,null);C(this,il,0);C(this,sl,0);C(this,vr,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){$t.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case Ct.INK_THICKNESS:he._defaultThickness=n;break;case Ct.INK_COLOR:he._defaultColor=n;break;case Ct.INK_OPACITY:he._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case Ct.INK_THICKNESS:w(this,ot,yw).call(this,n);break;case Ct.INK_COLOR:w(this,ot,bw).call(this,n);break;case Ct.INK_OPACITY:w(this,ot,Aw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ct.INK_THICKNESS,he._defaultThickness],[Ct.INK_COLOR,he._defaultColor||$t._defaultLineColor],[Ct.INK_OPACITY,Math.round(he._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ct.INK_THICKNESS,this.thickness||he._defaultThickness],[Ct.INK_COLOR,this.color||he._defaultColor||$t._defaultLineColor],[Ct.INK_OPACITY,Math.round(100*(this.opacity??he._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,ot,Vp).call(this),w(this,ot,Xp).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,ot,ec).call(this)),w(this,ot,Ch).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,pn)&&(clearTimeout(u(this,pn)),E(this,pn,null)),(t=u(this,oa))==null||t.disconnect(),E(this,oa,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,r=this.width*t,o=this.height*n;this.setDimensions(r,o)}enableEditMode(){u(this,As)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,w(this,ot,b0).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),w(this,ot,A0).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,As)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),E(this,As,!0),this.div.classList.add("disabled"),w(this,ot,Ch).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||u(this,As)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),w(this,ot,_w).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),w(this,ot,y0).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),w(this,ot,S0).call(this,t)}canvasPointerleave(t){w(this,ot,S0).call(this,t)}get isResizable(){return!this.isEmpty()&&u(this,As)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,c,h]=w(this,ot,Sw).call(this);if(this.setAt(r,o,0,0),this.setDims(c,h),w(this,ot,Vp).call(this),this.width){const[p,g]=this.parentDimensions;this.setAspectRatio(this.width*p,this.height*g),this.setAt(t*p,n*g,this.width*p,this.height*g),E(this,el,!0),w(this,ot,ec).call(this),this.setDims(this.width*p,this.height*g),w(this,ot,eo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,ot,Xp).call(this),this.div}setDimensions(t,n){const r=Math.round(t),o=Math.round(n);if(u(this,il)===r&&u(this,sl)===o)return;E(this,il,r),E(this,sl,o),this.canvas.style.visibility="hidden";const[c,h]=this.parentDimensions;this.width=t/c,this.height=n/h,this.fixAndSetPosition(),u(this,As)&&w(this,ot,_0).call(this,t,n),w(this,ot,ec).call(this),w(this,ot,eo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,r){var M,R,N;if(t instanceof W0)return null;const o=await super.deserialize(t,n,r);o.thickness=t.thickness,o.color=yt.makeHexColor(...t.color),o.opacity=t.opacity;const[c,h]=o.pageDimensions,p=o.width*c,g=o.height*h,m=o.parentScale,y=t.thickness/2;E(o,As,!0),E(o,il,Math.round(p)),E(o,sl,Math.round(g));const{paths:b,rect:S,rotation:_}=t;for(let{bezier:k}of b){k=w(M=he,Aa,Mw).call(M,k,S,_);const B=[];o.paths.push(B);let U=m*(k[0]-y),P=m*(k[1]-y);for(let H=2,O=k.length;H<O;H+=6){const K=m*(k[H]-y),Z=m*(k[H+1]-y),et=m*(k[H+2]-y),it=m*(k[H+3]-y),dt=m*(k[H+4]-y),rt=m*(k[H+5]-y);B.push([[U,P],[K,Z],[et,it],[dt,rt]]),U=dt,P=rt}const G=w(this,Aa,Rw).call(this,B);o.bezierPath2D.push(G)}const T=w(R=o,ot,w0).call(R);return E(o,Zo,Math.max($t.MIN_SIZE,T[2]-T[0])),E(o,Wo,Math.max($t.MIN_SIZE,T[3]-T[1])),w(N=o,ot,_0).call(N,p,g),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=$t._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Dt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:w(this,ot,Lw).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Wo=new WeakMap,Zo=new WeakMap,pn=new WeakMap,ra=new WeakMap,As=new WeakMap,Jo=new WeakMap,tl=new WeakMap,el=new WeakMap,oa=new WeakMap,nu=new WeakMap,il=new WeakMap,sl=new WeakMap,vr=new WeakMap,ot=new WeakSet,yw=function(t){const n=o=>{this.thickness=o,w(this,ot,Ch).call(this)},r=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},bw=function(t){const n=o=>{this.color=o,w(this,ot,eo).call(this)},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Aw=function(t){const n=o=>{this.opacity=o,w(this,ot,eo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Sw=function(){const{parentRotation:t,parentDimensions:[n,r]}=this;switch(t){case 90:return[0,r,r,n];case 180:return[n,r,n,r];case 270:return[n,0,r,n];default:return[0,0,n,r]}},v0=function(){const{ctx:t,color:n,opacity:r,thickness:o,parentScale:c,scaleFactor:h}=this;t.lineWidth=o*c/h,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${Zx(r)}`},_w=function(t,n){this.canvas.addEventListener("contextmenu",Ts,{signal:this._uiManager._signal}),w(this,ot,A0).call(this),E(this,Jo,new AbortController);const r=this._uiManager.combinedSignal(u(this,Jo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,u(this,el)||(E(this,el,!0),w(this,ot,ec).call(this),this.thickness||(this.thickness=he._defaultThickness),this.color||(this.color=he._defaultColor||$t._defaultLineColor),this.opacity??(this.opacity=he._defaultOpacity)),this.currentPath.push([t,n]),E(this,tl,!1),w(this,ot,v0).call(this),E(this,vr,()=>{w(this,ot,Tw).call(this),u(this,vr)&&window.requestAnimationFrame(u(this,vr))}),window.requestAnimationFrame(u(this,vr))},y0=function(t,n){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&n===o)return;const c=this.currentPath;let h=u(this,ra);if(c.push([t,n]),E(this,tl,!0),c.length<=2){h.moveTo(...c[0]),h.lineTo(t,n);return}c.length===3&&(E(this,ra,h=new Path2D),h.moveTo(...c[0])),w(this,ot,Cw).call(this,h,...c.at(-3),...c.at(-2),t,n)},Ew=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);u(this,ra).lineTo(...t)},ww=function(t,n){E(this,vr,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),w(this,ot,y0).call(this,t,n),w(this,ot,Ew).call(this);let r;if(this.currentPath.length!==1)r=w(this,ot,xw).call(this);else{const g=[t,n];r=[[g,g.slice(),g.slice(),g]]}const o=u(this,ra),c=this.currentPath;this.currentPath=[],E(this,ra,new Path2D);const h=()=>{this.allRawPaths.push(c),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},p=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,ot,Vp).call(this),w(this,ot,Xp).call(this)),w(this,ot,Ch).call(this))};this.addCommands({cmd:h,undo:p,mustExec:!0})},Tw=function(){if(!u(this,tl))return;E(this,tl,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),r=n.map(h=>h[0]),o=n.map(h=>h[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)c.stroke(h);c.stroke(u(this,ra)),c.restore()},Cw=function(t,n,r,o,c,h,p){const g=(n+o)/2,m=(r+c)/2,y=(o+h)/2,b=(c+p)/2;t.bezierCurveTo(g+2*(o-g)/3,m+2*(c-m)/3,y+2*(o-y)/3,b+2*(c-b)/3,y,b)},xw=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let r,[o,c]=t[0];for(r=1;r<t.length-2;r++){const[S,_]=t[r],[T,M]=t[r+1],R=(S+T)/2,N=(_+M)/2,k=[o+2*(S-o)/3,c+2*(_-c)/3],B=[R+2*(S-R)/3,N+2*(_-N)/3];n.push([[o,c],k,B,[R,N]]),[o,c]=[R,N]}const[h,p]=t[r],[g,m]=t[r+1],y=[o+2*(h-o)/3,c+2*(p-c)/3],b=[g+2*(h-g)/3,m+2*(p-m)/3];return n.push([[o,c],y,b,[g,m]]),n},eo=function(){if(this.isEmpty()){w(this,ot,Yp).call(this);return}w(this,ot,v0).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),w(this,ot,Yp).call(this);for(const r of this.bezierPath2D)n.stroke(r)},b0=function(){if(u(this,nu))return;E(this,nu,new AbortController);const t=this._uiManager.combinedSignal(u(this,nu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},A0=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},S0=function(t){var n;(n=u(this,Jo))==null||n.abort(),E(this,Jo,null),w(this,ot,b0).call(this),u(this,pn)&&clearTimeout(u(this,pn)),E(this,pn,setTimeout(()=>{E(this,pn,null),this.canvas.removeEventListener("contextmenu",Ts)},10)),w(this,ot,ww).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Vp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Xp=function(){E(this,oa,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),u(this,oa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,oa))==null||t.disconnect(),E(this,oa,null)},{once:!0})},ec=function(){if(!u(this,el))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),w(this,ot,Yp).call(this)},_0=function(t,n){const r=w(this,ot,Kp).call(this),o=(t-r)/u(this,Zo),c=(n-r)/u(this,Wo);this.scaleFactor=Math.min(o,c)},Yp=function(){const t=w(this,ot,Kp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Aa=new WeakSet,Rw=function(t){const n=new Path2D;for(let r=0,o=t.length;r<o;r++){const[c,h,p,g]=t[r];r===0&&n.moveTo(...c),n.bezierCurveTo(h[0],h[1],p[0],p[1],g[0],g[1])}return n},E0=function(t,n,r){const[o,c,h,p]=n;switch(r){case 0:for(let g=0,m=t.length;g<m;g+=2)t[g]+=o,t[g+1]=p-t[g+1];break;case 90:for(let g=0,m=t.length;g<m;g+=2){const y=t[g];t[g]=t[g+1]+o,t[g+1]=y+c}break;case 180:for(let g=0,m=t.length;g<m;g+=2)t[g]=h-t[g],t[g+1]+=c;break;case 270:for(let g=0,m=t.length;g<m;g+=2){const y=t[g];t[g]=h-t[g+1],t[g+1]=p-y}break;default:throw new Error("Invalid rotation")}return t},Mw=function(t,n,r){const[o,c,h,p]=n;switch(r){case 0:for(let g=0,m=t.length;g<m;g+=2)t[g]-=o,t[g+1]=p-t[g+1];break;case 90:for(let g=0,m=t.length;g<m;g+=2){const y=t[g];t[g]=t[g+1]-c,t[g+1]=y-o}break;case 180:for(let g=0,m=t.length;g<m;g+=2)t[g]=h-t[g],t[g+1]-=c;break;case 270:for(let g=0,m=t.length;g<m;g+=2){const y=t[g];t[g]=p-t[g+1],t[g+1]=h-y}break;default:throw new Error("Invalid rotation")}return t},Lw=function(t,n,r,o){var m,y;const c=[],h=this.thickness/2,p=t*n+h,g=t*r+h;for(const b of this.paths){const S=[],_=[];for(let T=0,M=b.length;T<M;T++){const[R,N,k,B]=b[T];if(R[0]===B[0]&&R[1]===B[1]&&M===1){const it=t*R[0]+p,dt=t*R[1]+g;S.push(it,dt),_.push(it,dt);break}const U=t*R[0]+p,P=t*R[1]+g,G=t*N[0]+p,H=t*N[1]+g,O=t*k[0]+p,K=t*k[1]+g,Z=t*B[0]+p,et=t*B[1]+g;T===0&&(S.push(U,P),_.push(U,P)),S.push(G,H,O,K,Z,et),_.push(G,H),T===M-1&&_.push(Z,et)}c.push({bezier:w(m=he,Aa,E0).call(m,S,o,this.rotation),points:w(y=he,Aa,E0).call(y,_,o,this.rotation)})}return c},w0=function(){let t=1/0,n=-1/0,r=1/0,o=-1/0;for(const c of this.paths)for(const[h,p,g,m]of c){const y=yt.bezierBoundingBox(...h,...p,...g,...m);t=Math.min(t,y[0]),r=Math.min(r,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[t,r,n,o]},Kp=function(){return u(this,As)?Math.ceil(this.thickness*this.parentScale):0},Ch=function(t=!1){if(this.isEmpty())return;if(!u(this,As)){w(this,ot,eo).call(this);return}const n=w(this,ot,w0).call(this),r=w(this,ot,Kp).call(this);E(this,Zo,Math.max($t.MIN_SIZE,n[2]-n[0])),E(this,Wo,Math.max($t.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(r+u(this,Zo)*this.scaleFactor),c=Math.ceil(r+u(this,Wo)*this.scaleFactor),[h,p]=this.parentDimensions;this.width=o/h,this.height=c/p,this.setAspectRatio(o,c);const g=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],w(this,ot,ec).call(this),w(this,ot,eo).call(this),E(this,il,o),E(this,sl,c),this.setDims(o,c);const y=t?r/this.scaleFactor/2:0;this.translate(g-this.translationX-y,m-this.translationY-y)},C(he,Aa),Tt(he,"_defaultColor",null),Tt(he,"_defaultOpacity",1),Tt(he,"_defaultThickness",1),Tt(he,"_type","ink"),Tt(he,"_editorType",Dt.INK);let m0=he;var fe,ei,yr,la,br,au,gn,ca,mn,Wi,ru,Ht,xh,Rh,Qp,C0,Dw,$p,x0,Wp,Ow,Nw;const kh=class kh extends $t{constructor(t){super({...t,name:"stampEditor"});C(this,Ht);C(this,fe,null);C(this,ei,null);C(this,yr,null);C(this,la,null);C(this,br,null);C(this,au,"");C(this,gn,null);C(this,ca,null);C(this,mn,null);C(this,Wi,!1);C(this,ru,!1);E(this,la,t.bitmapUrl),E(this,br,t.bitmapFile)}static initialize(t,n){$t.initialize(t,n)}static get supportedTypes(){return It(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return It(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Dt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:h}=t||this.copyCanvas(null,null,!0).imageData,p=await r.guess({name:"altText",request:{data:o,width:c,height:h,channels:o.length/(c*h)}});if(!p)throw new Error("No response from the AI service.");if(p.error)throw new Error("Error from the AI service.");if(p.cancel)return null;if(!p.output)throw new Error("No valid response from the AI service.");const g=p.output;return await this.setGuessedAltText(g),n&&!this.hasAltTextData()&&(this.altTextData={alt:g,decorative:!1}),g}remove(){var t,n;u(this,ei)&&(E(this,fe,null),this._uiManager.imageManager.deleteId(u(this,ei)),(t=u(this,gn))==null||t.remove(),E(this,gn,null),(n=u(this,ca))==null||n.disconnect(),E(this,ca,null),u(this,mn)&&(clearTimeout(u(this,mn)),E(this,mn,null))),super.remove()}rebuild(){if(!this.parent){u(this,ei)&&w(this,Ht,Qp).call(this);return}super.rebuild(),this.div!==null&&(u(this,ei)&&u(this,gn)===null&&w(this,Ht,Qp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,yr)||u(this,fe)||u(this,la)||u(this,br)||u(this,ei))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,fe)?w(this,Ht,C0).call(this):w(this,Ht,Qp).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,n*o,this.width*r,this.height*o)}return this.div}copyCanvas(t,n,r=!1){var S;t||(t=224);const{width:o,height:c}=u(this,fe),h=new _y;let p=u(this,fe),g=o,m=c,y=null;if(n){if(o>n||c>n){const H=Math.min(n/o,n/c);g=Math.floor(o*H),m=Math.floor(c*H)}y=document.createElement("canvas");const _=y.width=Math.ceil(g*h.sx),T=y.height=Math.ceil(m*h.sy);u(this,Wi)||(p=w(this,Ht,$p).call(this,_,T));const M=y.getContext("2d");M.filter=this._uiManager.hcmFilter;let R="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(R="#8f8f9d",N="#42414d");const k=15,B=k*h.sx,U=k*h.sy,P=new OffscreenCanvas(B*2,U*2),G=P.getContext("2d");G.fillStyle=R,G.fillRect(0,0,B*2,U*2),G.fillStyle=N,G.fillRect(0,0,B,U),G.fillRect(B,U,B,U),M.fillStyle=M.createPattern(P,"repeat"),M.fillRect(0,0,_,T),M.drawImage(p,0,0,p.width,p.height,0,0,_,T)}let b=null;if(r){let _,T;if(h.symmetric&&p.width<t&&p.height<t)_=p.width,T=p.height;else if(p=u(this,fe),o>t||c>t){const N=Math.min(t/o,t/c);_=Math.floor(o*N),T=Math.floor(c*N),u(this,Wi)||(p=w(this,Ht,$p).call(this,_,T))}const R=new OffscreenCanvas(_,T).getContext("2d",{willReadFrequently:!0});R.drawImage(p,0,0,p.width,p.height,0,0,_,T),b={width:_,height:T,data:R.getImageData(0,0,_,T).data}}return{canvas:y,width:g,height:m,imageData:b}}getImageForAltText(){return u(this,gn)}static async deserialize(t,n,r){var T;let o=null;if(t instanceof q1){const{data:{rect:M,rotation:R,id:N,structParent:k,popupRef:B},container:U,parent:{page:{pageNumber:P}}}=t,G=U.querySelector("canvas"),H=r.imageManager.getFromCanvas(U.id,G);G.remove();const O=((T=await n._structTree.getAriaAttributes(`${I0}${N}`))==null?void 0:T.get("aria-label"))||"";o=t={annotationType:Dt.STAMP,bitmapId:H.id,bitmap:H.bitmap,pageIndex:P-1,rect:M.slice(0),rotation:R,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:k,popupRef:B}}const c=await super.deserialize(t,n,r),{rect:h,bitmap:p,bitmapUrl:g,bitmapId:m,isSvg:y,accessibilityData:b}=t;m&&r.imageManager.isValidId(m)?(E(c,ei,m),p&&E(c,fe,p)):E(c,la,g),E(c,Wi,y);const[S,_]=c.pageDimensions;return c.width=(h[2]-h[0])/S,c.height=(h[3]-h[1])/_,c.annotationElementId=t.id||null,b&&(c.altTextData=b),c._initialData=o,E(c,ru,!!o),c}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Dt.STAMP,bitmapId:u(this,ei),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Wi),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=w(this,Ht,Wp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const p=w(this,Ht,Nw).call(this,r);if(p.isSame)return null;p.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const h=u(this,Wi)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,ei)))n.stamps.set(u(this,ei),{area:h,serialized:r}),r.bitmap=w(this,Ht,Wp).call(this,!1);else if(u(this,Wi)){const p=n.stamps.get(u(this,ei));h>p.area&&(p.area=h,p.serialized.bitmap.close(),p.serialized.bitmap=w(this,Ht,Wp).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};fe=new WeakMap,ei=new WeakMap,yr=new WeakMap,la=new WeakMap,br=new WeakMap,au=new WeakMap,gn=new WeakMap,ca=new WeakMap,mn=new WeakMap,Wi=new WeakMap,ru=new WeakMap,Ht=new WeakSet,xh=function(t,n=!1){if(!t){this.remove();return}E(this,fe,t.bitmap),n||(E(this,ei,t.id),E(this,Wi,t.isSvg)),t.file&&E(this,au,t.file.name),w(this,Ht,C0).call(this)},Rh=function(){if(E(this,yr,null),this._uiManager.enableWaiting(!1),!!u(this,gn)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,fe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Qp=function(){if(u(this,ei)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,ei)).then(r=>w(this,Ht,xh).call(this,r,!0)).finally(()=>w(this,Ht,Rh).call(this));return}if(u(this,la)){const r=u(this,la);E(this,la,null),this._uiManager.enableWaiting(!0),E(this,yr,this._uiManager.imageManager.getFromUrl(r).then(o=>w(this,Ht,xh).call(this,o)).finally(()=>w(this,Ht,Rh).call(this)));return}if(u(this,br)){const r=u(this,br);E(this,br,null),this._uiManager.enableWaiting(!0),E(this,yr,this._uiManager.imageManager.getFromFile(r).then(o=>w(this,Ht,xh).call(this,o)).finally(()=>w(this,Ht,Rh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=kh.supportedTypesStr;const n=this._uiManager._signal;E(this,yr,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,Ht,xh).call(this,o)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>w(this,Ht,Rh).call(this))),t.click()},C0=function(){const{div:t}=this;let{width:n,height:r}=u(this,fe);const[o,c]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,r=this.height*c;else if(n>h*o||r>h*c){const y=Math.min(h*o/n,h*c/r);n*=y,r*=y}const[p,g]=this.parentDimensions;this.setDims(n*p/o,r*g/c),this._uiManager.enableWaiting(!1);const m=E(this,gn,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),w(this,Ht,x0).call(this,n,r),w(this,Ht,Ow).call(this),u(this,ru)||(this.parent.addUndoableEditor(this),E(this,ru,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,au)&&m.setAttribute("aria-label",u(this,au))},Dw=function(t,n){var h;const[r,o]=this.parentDimensions;this.width=t/r,this.height=n/o,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,mn)!==null&&clearTimeout(u(this,mn)),E(this,mn,setTimeout(()=>{E(this,mn,null),w(this,Ht,x0).call(this,t,n)},200))},$p=function(t,n){const{width:r,height:o}=u(this,fe);let c=r,h=o,p=u(this,fe);for(;c>2*t||h>2*n;){const g=c,m=h;c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(c,h);y.getContext("2d").drawImage(p,0,0,g,m,0,0,c,h),p=y.transferToImageBitmap()}return p},x0=function(t,n){const r=new _y,o=Math.ceil(t*r.sx),c=Math.ceil(n*r.sy),h=u(this,gn);if(!h||h.width===o&&h.height===c)return;h.width=o,h.height=c;const p=u(this,Wi)?u(this,fe):w(this,Ht,$p).call(this,o,c),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,o,c)},Wp=function(t){if(t){if(u(this,Wi)){const o=this._uiManager.imageManager.getSvgUrl(u(this,ei));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,fe),n.getContext("2d").drawImage(u(this,fe),0,0),n.toDataURL()}if(u(this,Wi)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*wr.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*wr.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,c);return h.getContext("2d").drawImage(u(this,fe),0,0,u(this,fe).width,u(this,fe).height,0,0,o,c),h.transferToImageBitmap()}return structuredClone(u(this,fe))},Ow=function(){this._uiManager._signal&&(E(this,ca,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&w(this,Ht,Dw).call(this,n.width,n.height)})),u(this,ca).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,ca))==null||t.disconnect(),E(this,ca,null)},{once:!0}))},Nw=function(t){var g;const{rect:n,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,c=t.rect.every((m,y)=>Math.abs(m-n[y])<1),h=t.pageIndex===r,p=(((g=t.accessibilityData)==null?void 0:g.alt)||"")===o;return{isSame:c&&h&&p,isSameAltText:p}},Tt(kh,"_type","stamp"),Tt(kh,"_editorType",Dt.STAMP);let T0=kh;var nl,ou,vn,Ar,ua,Zi,Sr,lu,cu,hi,ha,At,_r,ii,kw,M0,L0,D0,Zp;const Ds=class Ds{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:h,textLayer:p,viewport:g,l10n:m}){C(this,ii);C(this,nl);C(this,ou,!1);C(this,vn,null);C(this,Ar,null);C(this,ua,null);C(this,Zi,new Map);C(this,Sr,!1);C(this,lu,!1);C(this,cu,!1);C(this,hi,null);C(this,ha,null);C(this,At);const y=[...u(Ds,_r).values()];if(!Ds._initialized){Ds._initialized=!0;for(const b of y)b.initialize(m,e)}e.registerEditorTypes(y),E(this,At,e),this.pageIndex=t,this.div=n,E(this,nl,o),E(this,vn,c),this.viewport=g,E(this,hi,p),this.drawLayer=h,this._structTree=r,u(this,At).addLayer(this)}get isEmpty(){return u(this,Zi).size===0}get isInvisible(){return this.isEmpty&&u(this,At).getMode()===Dt.NONE}updateToolbar(e){u(this,At).updateToolbar(e)}updateMode(e=u(this,At).getMode()){switch(w(this,ii,Zp).call(this),e){case Dt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Ds,_r).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,hi))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(u(this,At).getMode()!==Dt.INK)return;if(!e){for(const n of u(this,Zi).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){u(this,At).setEditingState(e)}addCommands(e){u(this,At).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,vn))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of u(this,Zi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,At).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!u(this,vn))return;const t=u(this,vn).getEditableAnnotations();for(const n of t){if(n.hide(),u(this,At).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;E(this,cu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of u(this,Zi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(u(this,vn)){const o=u(this,vn).getEditableAnnotations();for(const c of o){const{id:h}=c.data;if(u(this,At).isDeletedAnnotationElement(h))continue;let p=t.get(h);if(p){p.resetAnnotationElement(c),p.show(!1),c.show();continue}p=e.get(h),p&&(u(this,At).addChangedExistingAnnotation(p),p.renderAnnotationElement(c)&&p.show(!1)),c.show()}}w(this,ii,Zp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of u(Ds,_r).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,cu,!1)}getEditableAnnotation(e){var t;return((t=u(this,vn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,At).getActive()!==e&&u(this,At).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,hi))!=null&&e.div&&!u(this,ha)){E(this,ha,new AbortController);const t=u(this,At).combinedSignal(u(this,ha));u(this,hi).div.addEventListener("pointerdown",w(this,ii,kw).bind(this),{signal:t}),u(this,hi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,hi))!=null&&e.div&&u(this,ha)&&(u(this,ha).abort(),E(this,ha,null),u(this,hi).div.classList.remove("highlighting"))}enableClick(){if(u(this,Ar))return;E(this,Ar,new AbortController);const e=u(this,At).combinedSignal(u(this,Ar));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=u(this,Ar))==null||e.abort(),E(this,Ar,null)}attach(e){u(this,Zi).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,At).isDeletedAnnotationElement(t)&&u(this,At).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Zi).delete(e.id),(t=u(this,nl))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,cu)&&e.annotationElementId&&u(this,At).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,At).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,u(this,lu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,At).addDeletedAnnotationElement(e.annotationElementId),$t.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,At).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),u(this,At).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,ua)&&(e._focusEventsAllowed=!1,E(this,ua,setTimeout(()=>{E(this,ua,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,At)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,nl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,At).getId()}combinedSignal(e){return u(this,At).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,ii,M0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,At).updateToolbar(e),u(this,At).updateMode(e);const{offsetX:n,offsetY:r}=w(this,ii,D0).call(this),o=this.getNextId(),c=w(this,ii,L0).call(this,{parent:this,id:o,x:n,y:r,uiManager:u(this,At),isCentered:!0,...t});c&&this.add(c)}async deserialize(e){var t;return await((t=u(Ds,_r).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,At)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),o=w(this,ii,L0).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,At),isCentered:t,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(w(this,ii,D0).call(this),!0)}setSelected(e){u(this,At).setSelected(e)}toggleSelected(e){u(this,At).toggleSelected(e)}unselect(e){u(this,At).unselect(e)}pointerup(e){const{isMac:t}=_i.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,Sr)){if(E(this,Sr,!1),!u(this,ou)){E(this,ou,!0);return}if(u(this,At).getMode()===Dt.STAMP){u(this,At).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(u(this,At).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),u(this,Sr)){E(this,Sr,!1);return}const{isMac:t}=_i.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;E(this,Sr,!0);const n=u(this,At).getActive();E(this,ou,!n||n.isEmpty())}findNewParent(e,t,n){const r=u(this,At).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=u(this,At).getActive())==null?void 0:e.parent)===this&&(u(this,At).commitOrRemove(),u(this,At).setActiveEditor(null)),u(this,ua)&&(clearTimeout(u(this,ua)),E(this,ua,null));for(const n of u(this,Zi).values())(t=u(this,nl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Zi).clear(),u(this,At).removeLayer(this)}render({viewport:e}){this.viewport=e,al(this.div,e);for(const t of u(this,At).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,At).commitOrRemove(),w(this,ii,Zp).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,al(this.div,{rotation:n}),t!==n)for(const r of u(this,Zi).values())r.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,At).viewParameters.realScale}};nl=new WeakMap,ou=new WeakMap,vn=new WeakMap,Ar=new WeakMap,ua=new WeakMap,Zi=new WeakMap,Sr=new WeakMap,lu=new WeakMap,cu=new WeakMap,hi=new WeakMap,ha=new WeakMap,At=new WeakMap,_r=new WeakMap,ii=new WeakSet,kw=function(e){u(this,At).unselectAll();const{target:t}=e;if(t===u(this,hi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,hi).div.contains(t)){const{isMac:n}=_i.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,At).showAllEditors("highlight",!0,!0),u(this,hi).div.classList.add("free"),this.toggleDrawing(),ag.startHighlighting(this,u(this,At).direction==="ltr",{target:u(this,hi).div,x:e.x,y:e.y}),u(this,hi).div.addEventListener("pointerup",()=>{u(this,hi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,At)._signal}),e.preventDefault()}},M0=function(){return u(Ds,_r).get(u(this,At).getMode())},L0=function(e){const t=u(this,ii,M0);return t?new t.prototype.constructor(e):null},D0=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),c=Math.max(0,t),h=Math.min(window.innerWidth,e+n),p=Math.min(window.innerHeight,t+r),g=(o+h)/2-e,m=(c+p)/2-t,[y,b]=this.viewport.rotation%180===0?[g,m]:[m,g];return{offsetX:y,offsetY:b}},Zp=function(){E(this,lu,!0);for(const e of u(this,Zi).values())e.isEmpty()&&e.remove();E(this,lu,!1)},Tt(Ds,"_initialized",!1),C(Ds,_r,new Map([o0,m0,T0,ag].map(e=>[e._editorType,e])));let R0=Ds;var yn,$d,Me,da,Wd,N0,cl,k0,Pw;const Ze=class Ze{constructor({pageIndex:e}){C(this,cl);C(this,yn,null);C(this,$d,0);C(this,Me,new Map);C(this,da,new Map);this.pageIndex=e}setParent(e){if(!u(this,yn)){E(this,yn,e);return}if(u(this,yn)!==e){if(u(this,Me).size>0)for(const t of u(this,Me).values())t.remove(),e.append(t);E(this,yn,e)}}static get _svgFactory(){return It(this,"_svgFactory",new $0)}draw(e,t,n,r=!1){const o=yi(this,$d)._++,c=w(this,cl,k0).call(this,e.box);c.classList.add(...e.classNamesForDrawing);const h=Ze._svgFactory.createElement("defs");c.append(h);const p=Ze._svgFactory.createElement("path");h.append(p);const g=`path_p${this.pageIndex}_${o}`;p.setAttribute("id",g),p.setAttribute("d",e.toSVGPath()),r&&u(this,da).set(o,p);const m=w(this,cl,Pw).call(this,h,g),y=Ze._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",t),c.setAttribute("fill-opacity",n),y.setAttribute("href",`#${g}`),u(this,Me).set(o,c),{id:o,clipPathId:`url(#${m})`}}drawOutline(e){const t=yi(this,$d)._++,n=w(this,cl,k0).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const r=Ze._svgFactory.createElement("defs");n.append(r);const o=Ze._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",c),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e.mustRemoveSelfIntersections){const m=Ze._svgFactory.createElement("mask");r.append(m),h=`mask_p${this.pageIndex}_${t}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=Ze._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=Ze._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const p=Ze._svgFactory.createElement("use");n.append(p),p.setAttribute("href",`#${c}`),h&&p.setAttribute("mask",`url(#${h})`);const g=p.cloneNode();return n.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),u(this,Me).set(t,n),t}finalizeLine(e,t){const n=u(this,da).get(e);u(this,da).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){u(this,Me).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){u(this,da).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;w(n=Ze,Wd,N0).call(n,u(this,Me).get(e),t)}show(e,t){u(this,Me).get(e).classList.toggle("hidden",!t)}rotate(e,t){u(this,Me).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){u(this,Me).get(e).setAttribute("fill",t)}changeOpacity(e,t){u(this,Me).get(e).setAttribute("fill-opacity",t)}addClass(e,t){u(this,Me).get(e).classList.add(t)}removeClass(e,t){u(this,Me).get(e).classList.remove(t)}getSVGRoot(e){return u(this,Me).get(e)}remove(e){u(this,da).delete(e),u(this,yn)!==null&&(u(this,Me).get(e).remove(),u(this,Me).delete(e))}destroy(){E(this,yn,null);for(const e of u(this,Me).values())e.remove();u(this,Me).clear(),u(this,da).clear()}};yn=new WeakMap,$d=new WeakMap,Me=new WeakMap,da=new WeakMap,Wd=new WeakSet,N0=function(e,{x:t=0,y:n=0,width:r=1,height:o=1}={}){const{style:c}=e;c.top=`${100*n}%`,c.left=`${100*t}%`,c.width=`${100*r}%`,c.height=`${100*o}%`},cl=new WeakSet,k0=function(e){var n;const t=Ze._svgFactory.create(1,1,!0);return u(this,yn).append(t),t.setAttribute("aria-hidden",!0),w(n=Ze,Wd,N0).call(n,t,e),t},Pw=function(e,t){const n=Ze._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ze._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},C(Ze,Wd);let O0=Ze;Rt.AbortException;Rt.AnnotationEditorLayer;Rt.AnnotationEditorParamsType;Rt.AnnotationEditorType;Rt.AnnotationEditorUIManager;Rt.AnnotationLayer;Rt.AnnotationMode;Rt.ColorPicker;Rt.DOMSVGFactory;Rt.DrawLayer;Rt.FeatureTest;var DM=Rt.GlobalWorkerOptions;Rt.ImageKind;Rt.InvalidPDFException;Rt.MissingPDFException;Rt.OPS;Rt.OutputScale;Rt.PDFDataRangeTransport;Rt.PDFDateString;Rt.PDFWorker;Rt.PasswordResponses;Rt.PermissionFlag;Rt.PixelsPerInch;Rt.RenderingCancelledException;Rt.TextLayer;Rt.UnexpectedResponseException;Rt.Util;Rt.VerbosityLevel;Rt.XfaLayer;Rt.build;Rt.createValidAbsoluteUrl;Rt.fetchData;var OM=Rt.getDocument;Rt.getFilenameFromUrl;Rt.getPdfFilenameFromUrl;Rt.getXfaPageViewport;Rt.isDataScheme;Rt.isPdfFile;Rt.noContextMenu;Rt.normalizeUnicode;Rt.setLayerDimensions;Rt.shadow;Rt.version;var NM="Invariant failed";function pa(d,e){if(!d)throw new Error(NM)}DM.workerSrc=new URL("/quiz-concorso/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();async function kM(d){let e="";const t=await OM(d).promise,n=t.numPages;for(let r=1;r<=n;r++){const c=await(await t.getPage(r)).getTextContent();e+=c.items.map(h=>"str"in h&&h.str).join(" ")}return await t.cleanup(),e}const PM=new RegExp(/Prova OR[A-Z_0-9]+/m);function FM(d){const e=PM.exec(d);if(e)return e[0]}const zM=new RegExp(new RegExp("(SS_[PEDINGTD]{2,3}_\\d{1,3}[_NEW]*|MdA|CORTA\\s–\\sPERF\\.\\sASSESS|MEDIA\\s–\\sVAL\\.\\sBIAS|LUNGA\\s–\\sFEED|LUNGA\\s-\\sRAV|CORTA\\s–\\sDID\\.\\sSIGN\\._NEW|ENGAGEMENT|DISCOVERY\\sLEARNING|APPROCCI\\sDIALOGICI|EDUCAZIONE\\sFORMALE|LEARNING\\sTHEORY|PROGETTAZIONE|GREENCOMP[_NEW]*|SELF[_NEW]*|(?<!\\(CA)SEL(?!\\sFramework))"));function HM(d){return d.split(zM)}function BM(d){const e=HM(d);return e.splice(0,1),e.filter((n,r)=>r%2&&n)}async function IM(d){try{const e=await kM(d),t=FM(e),n=BM(e);return{quizTitle:t,questions:n}}catch(e){console.error("Error extracting PDF text:",e)}}function UM(d){const e=new RegExp(/\s?\[[abcd]\]\s?/);return d.split(e)}function jM(d){const e=[],t=Array.from(Array(d.length).keys());for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}for(const n of t)e.push(d[t[n]]);return e}function DD(d){return d+1}function qM(d,e){function t(){const o=localStorage.getItem(d);return o?JSON.parse(o):null}function n(o){localStorage.setItem(d,JSON.stringify(o))}function r(){localStorage.removeItem(d)}return{getCurrentValue:t,setValue:n,deleteValue:r}}const GM="quizState";function VM(){const{getCurrentValue:d,setValue:e}=qM(GM);function t(){return d()||{}}return{getQuizState:t,setQuizState:e}}const XM={filePath:void 0,step:0,submitted:!1},Ka={setFilePath:"setFilePath",setTitle:"setTitle",setQuestions:"setQuestions",setStep:"setStep",setSubmitted:"setSubmitted",eraseState:"eraseState"};function YM(d,e){switch(e.type){case Ka.setFilePath:return{...d,filePath:e.payload};case Ka.setTitle:return{...d,title:e.payload};case Ka.setQuestions:return{...d,questions:e.payload};case Ka.setStep:{const n=e.payload||0;return{...d,step:n}}case Ka.setSubmitted:return{...d,submitted:!0};case Ka.eraseState:return{};default:return d}}function KM(){const{getQuizState:d,setQuizState:e}=VM(),[t,n]=Et.useReducer(YM,XM,d);return Et.useEffect(()=>{const r=d(),o=async()=>{if(t.filePath)try{const c=await IM(t.filePath);n({type:Ka.setTitle,payload:c==null?void 0:c.quizTitle});const h=c==null?void 0:c.questions,p=h==null?void 0:h.map((g,m)=>{const[y,...b]=UM(g),S=b[0],_=jM(b);return{index:m,question:y,options:_,answer:S}});n({type:Ka.setQuestions,payload:p})}catch(c){console.error("Error extracting PDF text:",c)}};r.filePath||o(),e(t)},[d,t,e]),{quizState:t,dispatch:n}}const lc=new WeakMap,Jp=new WeakMap,rg={current:[]};let sy=!1,Nh=0;const Mh=new Set,Ap=new Map;function Fw(d){const e=Array.from(d).sort((t,n)=>t instanceof cc&&t.options.deps.includes(n)?1:n instanceof cc&&n.options.deps.includes(t)?-1:0);for(const t of e){if(rg.current.includes(t))continue;rg.current.push(t),t.recompute();const n=Jp.get(t);if(n)for(const r of n){const o=lc.get(r);o&&Fw(o)}}}function QM(d){d.listeners.forEach(e=>e({prevVal:d.prevState,currentVal:d.state}))}function $M(d){d.listeners.forEach(e=>e({prevVal:d.prevState,currentVal:d.state}))}function zw(d){if(Nh>0&&!Ap.has(d)&&Ap.set(d,d.prevState),Mh.add(d),!(Nh>0)&&!sy)try{for(sy=!0;Mh.size>0;){const e=Array.from(Mh);Mh.clear();for(const t of e){const n=Ap.get(t)??t.prevState;t.prevState=n,QM(t)}for(const t of e){const n=lc.get(t);n&&(rg.current.push(t),Fw(n))}for(const t of e){const n=lc.get(t);if(n)for(const r of n)$M(r)}}}finally{sy=!1,rg.current=[],Ap.clear()}}function ny(d){Nh++;try{d()}finally{if(Nh--,Nh===0){const e=Array.from(Mh)[0];e&&zw(e)}}}class P0{constructor(e,t){this.listeners=new Set,this.subscribe=n=>{var r,o;this.listeners.add(n);const c=(o=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:o.call(r,n,this);return()=>{this.listeners.delete(n),c==null||c()}},this.setState=n=>{var r,o,c;this.prevState=this.state,this.state=(r=this.options)!=null&&r.updateFn?this.options.updateFn(this.prevState)(n):n(this.prevState),(c=(o=this.options)==null?void 0:o.onUpdate)==null||c.call(o),zw(this)},this.prevState=e,this.state=e,this.options=t}}class cc{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=[],n=[];for(const r of this.options.deps)t.push(r.prevState),n.push(r.state);return this.lastSeenDepValues=n,{prevDepVals:t,currDepVals:n,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,n;this.prevState=this.state;const{prevDepVals:r,currDepVals:o,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:r,currDepVals:o,prevVal:c}),(n=(t=this.options).onUpdate)==null||n.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const o of this.options.deps)o instanceof cc&&o.checkIfRecalculationNeededDeeply();let t=!1;const n=this.lastSeenDepValues,{currDepVals:r}=this.getDepVals();for(let o=0;o<r.length;o++)if(r[o]!==n[o]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var n,r;this.listeners.add(t);const o=(r=(n=this.options).onSubscribe)==null?void 0:r.call(n,t,this);return()=>{this.listeners.delete(t),o==null||o()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof cc)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof P0){let n=lc.get(t);n||(n=new Set,lc.set(t,n)),n.add(this);let r=Jp.get(this);r||(r=new Set,Jp.set(this,r)),r.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof cc)this.unregisterFromGraph(t.options.deps);else if(t instanceof P0){const n=lc.get(t);n&&n.delete(this);const r=Jp.get(this);r&&r.delete(t)}}}const Er="__TSR_index",fE="popstate",pE="beforeunload";function Hw(d){let e=d.getLocation();const t=new Set,n=c=>{e=d.getLocation(),t.forEach(h=>h({location:e,action:c}))},r=c=>{d.notifyOnIndexChange??!0?n(c):e=d.getLocation()},o=async({task:c,navigateOpts:h,...p})=>{var g,m;if((h==null?void 0:h.ignoreBlocker)??!1){c();return}const b=((g=d.getBlockers)==null?void 0:g.call(d))??[],S=p.type==="PUSH"||p.type==="REPLACE";if(typeof document<"u"&&b.length&&S)for(const _ of b){const T=uu(p.path,p.state);if(await _.blockerFn({currentLocation:e,nextLocation:T,action:p.type})){(m=d.onBlocked)==null||m.call(d);return}}c()};return{get location(){return e},get length(){return d.getLength()},subscribers:t,subscribe:c=>(t.add(c),()=>{t.delete(c)}),push:(c,h,p)=>{const g=e.state[Er];h=F0(g+1,h),o({task:()=>{d.pushState(c,h),n({type:"PUSH"})},navigateOpts:p,type:"PUSH",path:c,state:h})},replace:(c,h,p)=>{const g=e.state[Er];h=F0(g,h),o({task:()=>{d.replaceState(c,h),n({type:"REPLACE"})},navigateOpts:p,type:"REPLACE",path:c,state:h})},go:(c,h)=>{o({task:()=>{d.go(c),r({type:"GO",index:c})},navigateOpts:h,type:"GO"})},back:c=>{o({task:()=>{d.back((c==null?void 0:c.ignoreBlocker)??!1),r({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{o({task:()=>{d.forward((c==null?void 0:c.ignoreBlocker)??!1),r({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[Er]!==0,createHref:c=>d.createHref(c),block:c=>{var h;if(!d.setBlockers)return()=>{};const p=((h=d.getBlockers)==null?void 0:h.call(d))??[];return d.setBlockers([...p,c]),()=>{var g,m;const y=((g=d.getBlockers)==null?void 0:g.call(d))??[];(m=d.setBlockers)==null||m.call(d,y.filter(b=>b!==c))}},flush:()=>{var c;return(c=d.flush)==null?void 0:c.call(d)},destroy:()=>{var c;return(c=d.destroy)==null?void 0:c.call(d)},notify:n}}function F0(d,e){return e||(e={}),{...e,key:Z0(),[Er]:d}}function Bw(d){var e;const t=(d==null?void 0:d.window)??(typeof document<"u"?window:void 0),n=t.history.pushState,r=t.history.replaceState;let o=[];const c=()=>o,h=O=>o=O,p=(d==null?void 0:d.createHref)??(O=>O),g=(d==null?void 0:d.parseLocation)??(()=>uu(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));(e=t.history.state)!=null&&e.key||t.history.replaceState({[Er]:0,key:Z0()},"");let m=g(),y,b=!1,S=!1,_=!1,T=!1;const M=()=>m;let R,N;const k=()=>{R&&(H._ignoreSubscribers=!0,(R.isPush?t.history.pushState:t.history.replaceState)(R.state,"",R.href),H._ignoreSubscribers=!1,R=void 0,N=void 0,y=void 0)},B=(O,K,Z)=>{const et=p(K);N||(y=m),m=uu(K,Z),R={href:et,state:Z,isPush:(R==null?void 0:R.isPush)||O==="push"},N||(N=Promise.resolve().then(()=>k()))},U=O=>{m=g(),H.notify({type:O})},P=async()=>{if(S){S=!1;return}const O=g(),K=O.state[Er]-m.state[Er],Z=K===1,et=K===-1,it=!Z&&!et||b;b=!1;const dt=it?"GO":et?"BACK":"FORWARD",rt=it?{type:"GO",index:K}:{type:et?"BACK":"FORWARD"};if(_)_=!1;else{const X=c();if(typeof document<"u"&&X.length){for(const $ of X)if(await $.blockerFn({currentLocation:m,nextLocation:O,action:dt})){S=!0,t.history.go(1),H.notify(rt);return}}}m=g(),H.notify(rt)},G=O=>{if(T){T=!1;return}let K=!1;const Z=c();if(typeof document<"u"&&Z.length)for(const et of Z){const it=et.enableBeforeUnload??!0;if(it===!0){K=!0;break}if(typeof it=="function"&&it()===!0){K=!0;break}}if(K)return O.preventDefault(),O.returnValue=""},H=Hw({getLocation:M,getLength:()=>t.history.length,pushState:(O,K)=>B("push",O,K),replaceState:(O,K)=>B("replace",O,K),back:O=>(O&&(_=!0),T=!0,t.history.back()),forward:O=>{O&&(_=!0),T=!0,t.history.forward()},go:O=>{b=!0,t.history.go(O)},createHref:O=>p(O),flush:k,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(pE,G,{capture:!0}),t.removeEventListener(fE,P)},onBlocked:()=>{y&&m!==y&&(m=y)},getBlockers:c,setBlockers:h,notifyOnIndexChange:!1});return t.addEventListener(pE,G,{capture:!0}),t.addEventListener(fE,P),t.history.pushState=function(...O){const K=n.apply(t.history,O);return H._ignoreSubscribers||U("PUSH"),K},t.history.replaceState=function(...O){const K=r.apply(t.history,O);return H._ignoreSubscribers||U("REPLACE"),K},H}function WM(d){const e=typeof document<"u"?window:void 0;return Bw({window:e,parseLocation:()=>{const t=e.location.hash.split("#").slice(1),n=t[0]??"/",r=e.location.search,o=t.slice(1),c=o.length===0?"":`#${o.join("#")}`,h=`${n}${r}${c}`;return uu(h,e.history.state)},createHref:t=>`${e.location.pathname}${e.location.search}#${t}`})}function ZM(d={initialEntries:["/"]}){const e=d.initialEntries;let t=d.initialIndex?Math.min(Math.max(d.initialIndex,0),e.length-1):e.length-1;const n=e.map((o,c)=>F0(c,void 0));return Hw({getLocation:()=>uu(e[t],n[t]),getLength:()=>e.length,pushState:(o,c)=>{t<e.length-1&&(e.splice(t+1),n.splice(t+1)),n.push(c),e.push(o),t=Math.max(e.length-1,0)},replaceState:(o,c)=>{n[t]=c,e[t]=o},back:()=>{t=Math.max(t-1,0)},forward:()=>{t=Math.min(t+1,e.length-1)},go:o=>{t=Math.min(Math.max(t+o,0),e.length-1)},createHref:o=>o})}function uu(d,e){const t=d.indexOf("#"),n=d.indexOf("?");return{href:d,pathname:d.substring(0,t>0?n>0?Math.min(t,n):t:n>0?n:d.length),hash:t>-1?d.substring(t):"",search:n>-1?d.slice(n,t===-1?void 0:t):"",state:e||{[Er]:0,key:Z0()}}}function Z0(){return(Math.random()+1).toString(36).substring(7)}function sc(d){return d[d.length-1]}function JM(d){return typeof d=="function"}function ro(d,e){return JM(d)?d(e):d}function z0(d,e){return e.reduce((t,n)=>(t[n]=d[n],t),{})}function gs(d,e){if(d===e)return d;const t=e,n=mE(d)&&mE(t);if(n||og(d)&&og(t)){const r=n?d:Object.keys(d),o=r.length,c=n?t:Object.keys(t),h=c.length,p=n?[]:{};let g=0;for(let m=0;m<h;m++){const y=n?m:c[m];(!n&&r.includes(y)||n)&&d[y]===void 0&&t[y]===void 0?(p[y]=void 0,g++):(p[y]=gs(d[y],t[y]),p[y]===d[y]&&d[y]!==void 0&&g++)}return o===h&&g===o?d:p}return t}function og(d){if(!gE(d))return!1;const e=d.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!gE(t)||!t.hasOwnProperty("isPrototypeOf"))}function gE(d){return Object.prototype.toString.call(d)==="[object Object]"}function mE(d){return Array.isArray(d)&&d.length===Object.keys(d).length}function vE(d,e){let t=Object.keys(d);return e&&(t=t.filter(n=>d[n]!==void 0)),t}function uc(d,e,t){if(d===e)return!0;if(typeof d!=typeof e)return!1;if(og(d)&&og(e)){const n=(t==null?void 0:t.ignoreUndefined)??!0,r=vE(d,n),o=vE(e,n);return!(t!=null&&t.partial)&&r.length!==o.length?!1:o.every(c=>uc(d[c],e[c],t))}return Array.isArray(d)&&Array.isArray(e)?d.length!==e.length?!1:!d.some((n,r)=>!uc(n,e[r],t)):!1}function ic(d){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.status="pending",n.resolve=r=>{n.status="resolved",n.value=r,e(r),d==null||d(r)},n.reject=r=>{n.status="rejected",t(r)},n}function tL(d){return/%[0-9A-Fa-f]{2}/.test(d)}function ma(d){return Hg(d.filter(e=>e!==void 0).join("/"))}function Hg(d){return d.replace(/\/{2,}/g,"/")}function J0(d){return d==="/"?d:d.replace(/^\/{1,}/,"")}function oo(d){return d==="/"?d:d.replace(/\/{1,}$/,"")}function eL(d){return oo(J0(d))}function lg(d,e){return d!=null&&d.endsWith("/")&&d!=="/"&&d!==`${e}/`?d.slice(0,-1):d}function iL(d,e,t){return lg(d,t)===lg(e,t)}function sL({basepath:d,base:e,to:t,trailingSlash:n="never",caseSensitive:r}){var o,c;e=cg(d,e,r),t=cg(d,t,r);let h=hu(e);const p=hu(t);h.length>1&&((o=sc(h))==null?void 0:o.value)==="/"&&h.pop(),p.forEach((m,y)=>{m.value==="/"?y?y===p.length-1&&h.push(m):h=[m]:m.value===".."?h.pop():m.value==="."||h.push(m)}),h.length>1&&(((c=sc(h))==null?void 0:c.value)==="/"?n==="never"&&h.pop():n==="always"&&h.push({type:"pathname",value:"/"}));const g=ma([d,...h.map(m=>m.value)]);return Hg(g)}function hu(d){if(!d)return[];d=Hg(d);const e=[];if(d.slice(0,1)==="/"&&(d=d.substring(1),e.push({type:"pathname",value:"/"})),!d)return e;const t=d.split("/").filter(Boolean);return e.push(...t.map(n=>n==="$"||n==="*"?{type:"wildcard",value:n}:n.charAt(0)==="$"?{type:"param",value:n}:{type:"pathname",value:n.includes("%25")?n.split("%25").map(r=>decodeURI(r)).join("%25"):decodeURI(n)})),d.slice(-1)==="/"&&(d=d.substring(1),e.push({type:"pathname",value:"/"})),e}function Sp({path:d,params:e,leaveWildcards:t,leaveParams:n,decodeCharMap:r}){const o=hu(d);function c(g){const m=e[g],y=typeof m=="string";return["*","_splat"].includes(g)?y?encodeURI(m):m:y?nL(m,r):m}const h={},p=ma(o.map(g=>{if(g.type==="wildcard"){h._splat=e._splat;const m=c("_splat");return t?`${g.value}${m??""}`:m}if(g.type==="param"){const m=g.value.substring(1);if(h[m]=e[m],n){const y=c(g.value);return`${g.value}${y??""}`}return c(m)??"undefined"}return g.value}));return{usedParams:h,interpolatedPath:p}}function nL(d,e){let t=encodeURIComponent(d);if(e)for(const[n,r]of e)t=t.replaceAll(n,r);return t}function _p(d,e,t){const n=aL(d,e,t);if(!(t.to&&!n))return n??{}}function cg(d,e,t=!1){const n=t?d:d.toLowerCase(),r=t?e:e.toLowerCase();switch(!0){case n==="/":return e;case r===n:return"";case e.length<d.length:return e;case r[n.length]!=="/":return e;case r.startsWith(n):return e.slice(d.length);default:return e}}function aL(d,e,t){if(d!=="/"&&!e.startsWith(d))return;e=cg(d,e,t.caseSensitive);const n=cg(d,`${t.to??"$"}`,t.caseSensitive),r=hu(e),o=hu(n);e.startsWith("/")||r.unshift({type:"pathname",value:"/"}),n.startsWith("/")||o.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let p=0;p<Math.max(r.length,o.length);p++){const g=r[p],m=o[p],y=p>=r.length-1,b=p>=o.length-1;if(m){if(m.type==="wildcard"){const S=decodeURI(ma(r.slice(p).map(_=>_.value)));return c["*"]=S,c._splat=S,!0}if(m.type==="pathname"){if(m.value==="/"&&!(g!=null&&g.value))return!0;if(g){if(t.caseSensitive){if(m.value!==g.value)return!1}else if(m.value.toLowerCase()!==g.value.toLowerCase())return!1}}if(!g)return!1;if(m.type==="param"){if(g.value==="/")return!1;g.value.charAt(0)!=="$"&&(c[m.value.substring(1)]=decodeURIComponent(g.value))}}if(!y&&b)return c["**"]=ma(r.slice(p+1).map(S=>S.value)),!!t.fuzzy&&(m==null?void 0:m.value)!=="/"}return!0})()?c:void 0}function Ss(d){return!!(d!=null&&d.isNotFound)}const ug="tsr-scroll-restoration-v1_3";let Iw=!1;try{Iw=typeof window<"u"&&typeof window.sessionStorage=="object"}catch{}const rL=(d,e)=>{let t;return(...n)=>{t||(t=setTimeout(()=>{d(...n),t=null},e))}},nc=Iw?{state:JSON.parse(window.sessionStorage.getItem(ug)||"null")||{},set:e=>(nc.state=ro(e,nc.state)||nc.state,window.sessionStorage.setItem(ug,JSON.stringify(nc.state)))}:void 0,H0=d=>d.state.key||d.href;function oL(d){const e=[];let t;for(;t=d.parentNode;)e.unshift(`${d.tagName}:nth-child(${[].indexOf.call(t.children,d)+1})`),d=t;return`${e.join(" > ")}`.toLowerCase()}let hg=!1;function Uw(d,e,t,n,r){var o;let c;try{c=JSON.parse(sessionStorage.getItem(d)||"{}")}catch(g){console.error(g);return}const h=e||((o=window.history.state)==null?void 0:o.key),p=c[h];hg=!0,(()=>{if(n&&p){for(const m in p){const y=p[m];if(m==="window")window.scrollTo({top:y.scrollY,left:y.scrollX,behavior:t});else if(m){const b=document.querySelector(m);b&&(b.scrollLeft=y.scrollX,b.scrollTop=y.scrollY)}}return}const g=window.location.hash.split("#")[1];if(g){const m=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(m){const y=document.getElementById(g);y&&y.scrollIntoView(m)}return}["window",...(r==null?void 0:r.filter(m=>m!=="window"))??[]].forEach(m=>{const y=m==="window"?window:document.querySelector(m);y&&y.scrollTo({top:0,left:0,behavior:t})})})(),hg=!1}function lL(d,e){if((d.options.scrollRestoration??!1)&&(d.isScrollRestoring=!0),typeof document>"u"||d.isScrollRestorationSetup)return;d.isScrollRestorationSetup=!0,hg=!1;const n=d.options.getScrollRestorationKey||H0;window.history.scrollRestoration="manual";const r=o=>{if(hg||!d.isScrollRestoring)return;let c="";if(o.target===document||o.target===window)c="window";else{const p=o.target.getAttribute("data-scroll-restoration-id");p?c=`[data-scroll-restoration-id="${p}"]`:c=oL(o.target)}const h=n(d.state.location);nc.set(p=>{const g=p[h]=p[h]||{},m=g[c]=g[c]||{};if(c==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(c){const y=document.querySelector(c);y&&(m.scrollX=y.scrollLeft||0,m.scrollY=y.scrollTop||0)}return p})};typeof document<"u"&&document.addEventListener("scroll",rL(r,100),!0),d.subscribe("onRendered",o=>{const c=n(o.toLocation);if(!d.resetNextScroll){d.resetNextScroll=!0;return}Uw(ug,c,d.options.scrollRestorationBehavior||void 0,d.isScrollRestoring||void 0,d.options.scrollToTopSelectors||void 0),d.isScrollRestoring&&nc.set(h=>(h[c]=h[c]||{},h))})}function cL(d,e){let t,n,r,o="";for(t in d)if((r=d[t])!==void 0)if(Array.isArray(r))for(n=0;n<r.length;n++)o&&(o+="&"),o+=encodeURIComponent(t)+"="+encodeURIComponent(r[n]);else o&&(o+="&"),o+=encodeURIComponent(t)+"="+encodeURIComponent(r);return""+o}function yE(d){if(!d)return"";const e=tL(d)?decodeURIComponent(d):decodeURIComponent(encodeURIComponent(d));return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function uL(d,e){let t,n;const r={},o=d.split("&");for(;t=o.shift();){const c=t.indexOf("=");if(c!==-1){n=t.slice(0,c),n=decodeURIComponent(n);const h=t.slice(c+1);r[n]!==void 0?r[n]=[].concat(r[n],yE(h)):r[n]=yE(h)}else n=t,n=decodeURIComponent(n),r[n]=""}return r}const hL=fL(JSON.parse),dL=pL(JSON.stringify,JSON.parse);function fL(d){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=uL(e);for(const n in t){const r=t[n];if(typeof r=="string")try{t[n]=d(r)}catch{}}return t}}function pL(d,e){function t(n){if(typeof n=="object"&&n!==null)try{return d(n)}catch{}else if(typeof n=="string"&&typeof e=="function")try{return e(n),d(n)}catch{}return n}return n=>{n={...n},Object.keys(n).forEach(o=>{const c=n[o];typeof c>"u"||c===void 0?delete n[o]:n[o]=t(c)});const r=cL(n).toString();return r?`?${r}`:""}}const Xs="__root__";function jw(d){if(d.isRedirect=!0,d.statusCode=d.statusCode||d.code||307,d.headers=d.headers||{},!d.reloadDocument){d.reloadDocument=!1;try{new URL(`${d.href}`),d.reloadDocument=!0}catch{}}if(d.throw)throw d;return d}function io(d){return!!(d!=null&&d.isRedirect)}function ay(d){return!!(d!=null&&d.isRedirect)&&d.href}function hc(d){const e=d.resolvedLocation,t=d.location,n=(e==null?void 0:e.pathname)!==t.pathname,r=(e==null?void 0:e.href)!==t.href,o=(e==null?void 0:e.hash)!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:n,hrefChanged:r,hashChanged:o}}class gL{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{var n;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(o=>[encodeURIComponent(o),o])):void 0,(!this.basepath||t.basepath&&t.basepath!==r.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${eL(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?ZM({initialEntries:[this.basepath||"/"]}):Bw()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new P0(vL(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(o=>!["redirected"].includes(o.status))}}}),lL(this)),typeof window<"u"&&"CSS"in window&&typeof((n=window.CSS)==null?void 0:n.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const n=c=>{c.forEach((h,p)=>{h.init({originalIndex:p,defaultSsr:this.options.defaultSsr});const g=this.routesById[h.id];if(pa(!g,`Duplicate routes found with id: ${String(h.id)}`),this.routesById[h.id]=h,!h.isRoot&&h.path){const y=oo(h.fullPath);(!this.routesByPath[y]||h.fullPath.endsWith("/"))&&(this.routesByPath[y]=h)}const m=h.children;m!=null&&m.length&&n(m)})};n([this.routeTree]);const r=[];Object.values(this.routesById).forEach((c,h)=>{var p;if(c.isRoot||!c.path)return;const g=J0(c.fullPath),m=hu(g);for(;m.length>1&&((p=m[0])==null?void 0:p.value)==="/";)m.shift();const y=m.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);r.push({child:c,trimmed:g,parsed:m,index:h,scores:y})}),this.flatRoutes=r.sort((c,h)=>{const p=Math.min(c.scores.length,h.scores.length);for(let g=0;g<p;g++)if(c.scores[g]!==h.scores[g])return h.scores[g]-c.scores[g];if(c.scores.length!==h.scores.length)return h.scores.length-c.scores.length;for(let g=0;g<p;g++)if(c.parsed[g].value!==h.parsed[g].value)return c.parsed[g].value>h.parsed[g].value?1:-1;return c.index-h.index}).map((c,h)=>(c.child.rank=h,c.child))},this.subscribe=(t,n)=>{const r={eventType:t,fn:n};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=t=>{this.subscribers.forEach(n=>{n.eventType===t.type&&n.fn(t)})},this.parseLocation=(t,n)=>{const r=({pathname:p,search:g,hash:m,state:y})=>{const b=this.options.parseSearch(g),S=this.options.stringifySearch(b);return{pathname:p,searchStr:S,search:gs(t==null?void 0:t.search,b),hash:m.split("#").reverse()[0]??"",href:`${p}${S}${m}`,state:gs(t==null?void 0:t.state,y)}},o=r(n??this.history.location),{__tempLocation:c,__tempKey:h}=o.state;if(c&&(!h||h===this.tempLocationKey)){const p=r(c);return p.state.key=o.state.key,delete p.state.__tempLocation,{...p,maskedLocation:o}}return o},this.resolvePathWithBase=(t,n)=>sL({basepath:this.basepath,base:t,to:Hg(n),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(t,n,r)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:n},r):this.matchRoutesInternal(t,n),this.getMatchedRoutes=(t,n)=>{let r={};const o=oo(t.pathname),c=m=>_p(this.basepath,o,{to:m.fullPath,caseSensitive:m.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let h=(n==null?void 0:n.to)!==void 0?this.routesByPath[n.to]:void 0;h?r=c(h):h=this.flatRoutes.find(m=>{const y=c(m);return y?(r=y,!0):!1});let p=h||this.routesById[Xs];const g=[p];for(;p.parentRoute;)p=p.parentRoute,g.unshift(p);return{matchedRoutes:g,routeParams:r,foundRoute:h}},this.cancelMatch=t=>{const n=this.getMatch(t);n&&(n.abortController.abort(),clearTimeout(n.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=t=>{const n=(o={},c)=>{var h,p,g,m,y,b,S;const _=o._fromLocation?this.matchRoutes(o._fromLocation,{_buildLocation:!0}):this.state.matches,T=o.from!=null?_.find(et=>_p(this.basepath,oo(et.pathname),{to:o.from,caseSensitive:!1,fuzzy:!1})):void 0,M=(T==null?void 0:T.pathname)||this.latestLocation.pathname;pa(o.from==null||T!=null,"Could not find match for from: "+o.from);const R=(h=this.state.pendingMatches)!=null&&h.length?(p=sc(this.state.pendingMatches))==null?void 0:p.search:((g=sc(_))==null?void 0:g.search)||this.latestLocation.search,N=c==null?void 0:c.matchedRoutes.filter(et=>_.find(it=>it.routeId===et.id));let k;if(o.to){const et=(T==null?void 0:T.fullPath)||((m=sc(_))==null?void 0:m.fullPath)||this.latestLocation.pathname;k=this.resolvePathWithBase(et,`${o.to}`)}else{const et=this.routesById[(y=N==null?void 0:N.find(it=>{const dt=Sp({path:it.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return ma([this.basepath,dt])===M}))==null?void 0:y.id];k=this.resolvePathWithBase(M,(et==null?void 0:et.to)??M)}const B={...(b=sc(_))==null?void 0:b.params};let U=(o.params??!0)===!0?B:{...B,...ro(o.params,B)};Object.keys(U).length>0&&(c==null||c.matchedRoutes.map(et=>{var it;return((it=et.options.params)==null?void 0:it.stringify)??et.options.stringifyParams}).filter(Boolean).forEach(et=>{U={...U,...et(U)}})),k=Sp({path:k,params:U??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let P=R;if(t._includeValidateSearch&&((S=this.options.search)!=null&&S.strict)){let et={};c==null||c.matchedRoutes.forEach(it=>{try{it.options.validateSearch&&(et={...et,...ry(it.options.validateSearch,{...et,...P})??{}})}catch{}}),P=et}P=(et=>{const it=(c==null?void 0:c.matchedRoutes.reduce((X,$)=>{var J;const St=[];if("search"in $.options)(J=$.options.search)!=null&&J.middlewares&&St.push(...$.options.search.middlewares);else if($.options.preSearchFilters||$.options.postSearchFilters){const D=({search:V,next:at})=>{let nt=V;"preSearchFilters"in $.options&&$.options.preSearchFilters&&(nt=$.options.preSearchFilters.reduce((gt,lt)=>lt(gt),V));const st=at(nt);return"postSearchFilters"in $.options&&$.options.postSearchFilters?$.options.postSearchFilters.reduce((gt,lt)=>lt(gt),st):st};St.push(D)}if(t._includeValidateSearch&&$.options.validateSearch){const D=({search:V,next:at})=>{const nt=at(V);try{return{...nt,...ry($.options.validateSearch,nt)??{}}}catch{return nt}};St.push(D)}return X.concat(St)},[]))??[],dt=({search:X})=>o.search?o.search===!0?X:ro(o.search,X):{};it.push(dt);const rt=(X,$)=>{if(X>=it.length)return $;const J=it[X];return J({search:$,next:D=>rt(X+1,D)})};return rt(0,et)})(P),P=gs(R,P);const H=this.options.stringifySearch(P),O=o.hash===!0?this.latestLocation.hash:o.hash?ro(o.hash,this.latestLocation.hash):void 0,K=O?`#${O}`:"";let Z=o.state===!0?this.latestLocation.state:o.state?ro(o.state,this.latestLocation.state):{};return Z=gs(this.latestLocation.state,Z),{pathname:k,search:P,searchStr:H,state:Z,hash:O??"",href:`${k}${H}${K}`,unmaskOnReload:o.unmaskOnReload}},r=(o={},c)=>{var h;const p=n(o);let g=c?n(c):void 0;if(!g){let b={};const S=(h=this.options.routeMasks)==null?void 0:h.find(_=>{const T=_p(this.basepath,p.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return T?(b=T,!0):!1});if(S){const{from:_,...T}=S;c={...z0(t,["from"]),...T,params:b},g=n(c)}}const m=this.getMatchedRoutes(p,o),y=n(o,m);if(g){const b=this.getMatchedRoutes(g,c),S=n(c,b);y.maskedLocation=S}return y};return t.mask?r(t,{...z0(t,["from"]),...t.mask}):r(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:n,...r})=>{const o=()=>{const p=["key","__TSR_index","__hashScrollIntoViewOptions"];p.forEach(m=>{r.state[m]=this.latestLocation.state[m]});const g=uc(r.state,this.latestLocation.state);return p.forEach(m=>{delete r.state[m]}),g},c=this.latestLocation.href===r.href,h=this.commitLocationPromise;if(this.commitLocationPromise=ic(()=>{h==null||h.resolve()}),c&&o())this.load();else{let{maskedLocation:p,hashScrollIntoView:g,...m}=r;p&&(m={...p,state:{...p.state,__tempKey:void 0,__tempLocation:{...m,search:m.searchStr,state:{...m.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(m.unmaskOnReload??this.options.unmaskOnReload??!1)&&(m.state.__tempKey=this.tempLocationKey)),m.state.__hashScrollIntoViewOptions=g??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[r.replace?"replace":"push"](m.href,m.state,{ignoreBlocker:n})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:n,hashScrollIntoView:r,viewTransition:o,ignoreBlocker:c,href:h,...p}={})=>{if(h){const m=this.history.location.state.__TSR_index,y=uu(h,{__TSR_index:t?m:m+1});p.to=y.pathname,p.search=this.options.parseSearch(y.search),p.hash=y.hash.slice(1)}const g=this.buildLocation({...p,_includeValidateSearch:!0});return this.commitLocation({...g,viewTransition:o,replace:t,resetScroll:n,hashScrollIntoView:r,ignoreBlocker:c})},this.navigate=({to:t,reloadDocument:n,href:r,...o})=>{if(n){if(!r){const c=this.buildLocation({to:t,...o});r=this.history.createHref(c.href)}o.replace?window.location.replace(r):window.location.href=r;return}return this.buildAndCommitLocation({...o,href:r,to:t})},this.load=async t=>{this.latestLocation=this.parseLocation(this.latestLocation);let n,r,o;for(o=new Promise(c=>{this.startTransition(async()=>{var h;try{const p=this.latestLocation,g=this.state.resolvedLocation;this.cancelMatches();let m;ny(()=>{m=this.matchRoutes(p),this.__store.setState(y=>({...y,status:"pending",isLoading:!0,location:p,pendingMatches:m,cachedMatches:y.cachedMatches.filter(b=>!m.find(S=>S.id===b.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...hc({resolvedLocation:g,location:p})}),this.emit({type:"onBeforeLoad",...hc({resolvedLocation:g,location:p})}),await this.loadMatches({sync:t==null?void 0:t.sync,matches:m,location:p,onReady:async()=>{this.startViewTransition(async()=>{let y,b,S;ny(()=>{this.__store.setState(_=>{const T=_.matches,M=_.pendingMatches||_.matches;return y=T.filter(R=>!M.find(N=>N.id===R.id)),b=M.filter(R=>!T.find(N=>N.id===R.id)),S=T.filter(R=>M.find(N=>N.id===R.id)),{..._,isLoading:!1,loadedAt:Date.now(),matches:M,pendingMatches:void 0,cachedMatches:[..._.cachedMatches,...y.filter(R=>R.status!=="error")]}}),this.clearExpiredCache()}),[[y,"onLeave"],[b,"onEnter"],[S,"onStay"]].forEach(([_,T])=>{_.forEach(M=>{var R,N;(N=(R=this.looseRoutesById[M.routeId].options)[T])==null||N.call(R,M)})})})}})}catch(p){ay(p)?(n=p,this.isServer||this.navigate({...n,replace:!0,ignoreBlocker:!0})):Ss(p)&&(r=p),this.__store.setState(g=>({...g,statusCode:n?n.statusCode:r?404:g.matches.some(m=>m.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===o&&((h=this.commitLocationPromise)==null||h.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=o,await o;this.latestLoadPromise&&o!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=t=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;typeof n=="object"&&this.isViewTransitionTypesSupported?r={update:t,types:n.types}:r=t,document.startViewTransition(r)}else t()},this.updateMatch=(t,n)=>{var r;let o;const c=(r=this.state.pendingMatches)==null?void 0:r.find(m=>m.id===t),h=this.state.matches.find(m=>m.id===t),p=this.state.cachedMatches.find(m=>m.id===t),g=c?"pendingMatches":h?"matches":p?"cachedMatches":"";return g&&this.__store.setState(m=>{var y;return{...m,[g]:(y=m[g])==null?void 0:y.map(b=>b.id===t?o=n(b):b)}}),o},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(n=>n.id===t),this.loadMatches=async({location:t,matches:n,preload:r,onReady:o,updateMatch:c=this.updateMatch,sync:h})=>{let p,g=!1;const m=async()=>{g||(g=!0,await(o==null?void 0:o()))},y=S=>!!(r&&!this.state.matches.find(_=>_.id===S));!this.isServer&&!this.state.matches.length&&m();const b=(S,_)=>{var T,M,R,N;if(ay(_)&&!_.reloadDocument)throw _;if(io(_)||Ss(_)){if(c(S.id,k=>({...k,status:io(_)?"redirected":Ss(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=S.routeId),(T=S.beforeLoadPromise)==null||T.resolve(),(M=S.loaderPromise)==null||M.resolve(),(R=S.loadPromise)==null||R.resolve(),io(_))throw g=!0,_=this.resolveRedirect({..._,_fromLocation:t}),_;if(Ss(_))throw this._handleNotFound(n,_,{updateMatch:c}),(N=this.serverSsr)==null||N.onMatchSettled({router:this,match:this.getMatch(S.id)}),_}};try{await new Promise((S,_)=>{(async()=>{var T,M,R,N;try{const k=(P,G,H)=>{var O,K;const{id:Z,routeId:et}=n[P],it=this.looseRoutesById[et];if(G instanceof Promise)throw G;G.routerCode=H,p=p??P,b(this.getMatch(Z),G);try{(K=(O=it.options).onError)==null||K.call(O,G)}catch(dt){G=dt,b(this.getMatch(Z),G)}c(Z,dt=>{var rt,X;return(rt=dt.beforeLoadPromise)==null||rt.resolve(),(X=dt.loadPromise)==null||X.resolve(),{...dt,error:G,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[P,{id:G,routeId:H}]of n.entries()){const O=this.getMatch(G),K=(T=n[P-1])==null?void 0:T.id,Z=this.looseRoutesById[H],et=Z.options.pendingMs??this.options.defaultPendingMs,it=!!(o&&!this.isServer&&!y(G)&&(Z.options.loader||Z.options.beforeLoad)&&typeof et=="number"&&et!==1/0&&(Z.options.pendingComponent??((M=this.options)==null?void 0:M.defaultPendingComponent)));let dt=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(it&&setTimeout(()=>{try{m()}catch{}},et),await O.beforeLoadPromise,dt=this.getMatch(G).status!=="success"),dt){try{c(G,mt=>{const ft=mt.loadPromise;return{...mt,loadPromise:ic(()=>{ft==null||ft.resolve()}),beforeLoadPromise:ic()}});const rt=new AbortController;let X;it&&(X=setTimeout(()=>{try{m()}catch{}},et));const{paramsError:$,searchError:J}=this.getMatch(G);$&&k(P,$,"PARSE_PARAMS"),J&&k(P,J,"VALIDATE_SEARCH");const St=()=>K?this.getMatch(K).context:this.options.context??{};c(G,mt=>({...mt,isFetching:"beforeLoad",fetchCount:mt.fetchCount+1,abortController:rt,pendingTimeout:X,context:{...St(),...mt.__routeContext}}));const{search:D,params:V,context:at,cause:nt}=this.getMatch(G),st=y(G),gt={search:D,abortController:rt,params:V,preload:st,context:at,location:t,navigate:mt=>this.navigate({...mt,_fromLocation:t}),buildLocation:this.buildLocation,cause:st?"preload":nt,matches:n},lt=await((N=(R=Z.options).beforeLoad)==null?void 0:N.call(R,gt))??{};(io(lt)||Ss(lt))&&k(P,lt,"BEFORE_LOAD"),c(G,mt=>({...mt,__beforeLoadContext:lt,context:{...St(),...mt.__routeContext,...lt},abortController:rt}))}catch(rt){k(P,rt,"BEFORE_LOAD")}c(G,rt=>{var X;return(X=rt.beforeLoadPromise)==null||X.resolve(),{...rt,beforeLoadPromise:void 0,isFetching:!1}})}}const B=n.slice(0,p),U=[];B.forEach(({id:P,routeId:G},H)=>{U.push((async()=>{const{loaderPromise:O}=this.getMatch(P);let K=!1,Z=!1;if(O){await O;const et=this.getMatch(P);et.error&&b(et,et.error)}else{const et=U[H-1],it=this.looseRoutesById[G],dt=()=>{const{params:nt,loaderDeps:st,abortController:gt,context:lt,cause:mt}=this.getMatch(P),ft=y(P);return{params:nt,deps:st,preload:!!ft,parentMatchPromise:et,abortController:gt,context:lt,location:t,navigate:wt=>this.navigate({...wt,_fromLocation:t}),cause:ft?"preload":mt,route:it}},rt=Date.now()-this.getMatch(P).updatedAt,X=y(P),$=X?it.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:it.options.staleTime??this.options.defaultStaleTime??0,J=it.options.shouldReload,St=typeof J=="function"?J(dt()):J;c(P,nt=>({...nt,loaderPromise:ic(),preload:!!X&&!this.state.matches.find(st=>st.id===P)}));const D=async()=>{var nt,st,gt,lt,mt,ft,wt,Ut,we,Pi,pi;try{const gi=async()=>{const le=this.getMatch(P);le.minPendingPromise&&await le.minPendingPromise};try{this.loadRouteChunk(it),c(P,An=>({...An,isFetching:"loader"}));const le=await((st=(nt=it.options).loader)==null?void 0:st.call(nt,dt()));b(this.getMatch(P),le),await it._lazyPromise,await gi();const be={matches:n,match:this.getMatch(P),params:this.getMatch(P).params,loaderData:le},Ae=(lt=(gt=it.options).head)==null?void 0:lt.call(gt,be),Cs=Ae==null?void 0:Ae.meta,Sa=Ae==null?void 0:Ae.links,_a=Ae==null?void 0:Ae.scripts,qt=(ft=(mt=it.options).scripts)==null?void 0:ft.call(mt,be),ae=(Ut=(wt=it.options).headers)==null?void 0:Ut.call(wt,{loaderData:le});c(P,An=>({...An,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:le,meta:Cs,links:Sa,headScripts:_a,headers:ae,scripts:qt}))}catch(le){let be=le;await gi(),b(this.getMatch(P),le);try{(Pi=(we=it.options).onError)==null||Pi.call(we,le)}catch(Ae){be=Ae,b(this.getMatch(P),Ae)}c(P,Ae=>({...Ae,error:be,status:"error",isFetching:!1}))}(pi=this.serverSsr)==null||pi.onMatchSettled({router:this,match:this.getMatch(P)}),await it._componentsPromise}catch(gi){c(P,le=>({...le,loaderPromise:void 0})),b(this.getMatch(P),gi)}},{status:V,invalid:at}=this.getMatch(P);K=V==="success"&&(at||(St??rt>$)),X&&it.options.preload===!1||(K&&!h?(Z=!0,(async()=>{try{await D();const{loaderPromise:nt,loadPromise:st}=this.getMatch(P);nt==null||nt.resolve(),st==null||st.resolve(),c(P,gt=>({...gt,loaderPromise:void 0}))}catch(nt){ay(nt)&&await this.navigate(nt)}})()):(V!=="success"||K&&h)&&await D())}if(!Z){const{loaderPromise:et,loadPromise:it}=this.getMatch(P);et==null||et.resolve(),it==null||it.resolve()}return c(P,et=>({...et,isFetching:Z?et.isFetching:!1,loaderPromise:Z?et.loaderPromise:void 0,invalid:!1})),this.getMatch(P)})())}),await Promise.all(U),S()}catch(k){_(k)}})()}),await m()}catch(S){if(io(S)||Ss(S))throw Ss(S)&&!r&&await m(),S}return n},this.invalidate=t=>{const n=r=>{var o;return((o=t==null?void 0:t.filter)==null?void 0:o.call(t,r))??!0?{...r,invalid:!0,...r.status==="error"?{status:"pending",error:void 0}:{}}:r};return this.__store.setState(r=>{var o;return{...r,matches:r.matches.map(n),cachedMatches:r.cachedMatches.map(n),pendingMatches:(o=r.pendingMatches)==null?void 0:o.map(n)}}),this.load({sync:t==null?void 0:t.sync})},this.resolveRedirect=t=>{const n=t;return n.href||(n.href=this.buildLocation(n).href),n},this.clearCache=t=>{const n=t==null?void 0:t.filter;n!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(o=>!n(o))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=n=>{const r=this.looseRoutesById[n.routeId];if(!r.options.loader)return!0;const o=(n.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(n.status!=="error"&&Date.now()-n.updatedAt<o)};this.clearCache({filter:t})},this.loadRouteChunk=t=>(t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(n=>{const{id:r,...o}=n.options;Object.assign(t.options,o)}):t._lazyPromise=Promise.resolve()),t._componentsPromise===void 0&&(t._componentsPromise=t._lazyPromise.then(()=>Promise.all(qw.map(async n=>{const r=t.options[n];r!=null&&r.preload&&await r.preload()})))),t._componentsPromise),this.preloadRoute=async t=>{const n=this.buildLocation(t);let r=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:t});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(h=>h.id)),c=new Set([...o,...this.state.cachedMatches.map(h=>h.id)]);ny(()=>{r.forEach(h=>{c.has(h.id)||this.__store.setState(p=>({...p,cachedMatches:[...p.cachedMatches,h]}))})});try{return r=await this.loadMatches({matches:r,location:n,preload:!0,updateMatch:(h,p)=>{o.has(h)?r=r.map(g=>g.id===h?p(g):g):this.updateMatch(h,p)}}),r}catch(h){if(io(h))return h.reloadDocument?void 0:await this.preloadRoute({...h,_fromLocation:n});Ss(h)||console.error(h);return}},this.matchRoute=(t,n)=>{const r={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},o=this.buildLocation(r);if(n!=null&&n.pending&&this.state.status!=="pending")return!1;const h=((n==null?void 0:n.pending)===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,p=_p(this.basepath,h.pathname,{...n,to:o.pathname});return!p||t.params&&!uc(p,t.params,{partial:!0})?!1:p&&((n==null?void 0:n.includeSearch)??!0)?uc(h.search,o.search,{partial:!0})?p:!1:p},this._handleNotFound=(t,n,{updateMatch:r=this.updateMatch}={})=>{var o;const c=this.routesById[n.routeId??""]??this.routeTree,h={};for(const g of t)h[g.routeId]=g;!c.options.notFoundComponent&&((o=this.options)!=null&&o.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),pa(c.options.notFoundComponent);const p=h[c.id];pa(p,"Could not find match for route: "+c.id),r(p.id,g=>({...g,status:"notFound",error:n,isFetching:!1})),n.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(n.routeId=c.parentRoute.id,this._handleNotFound(t,n,{updateMatch:r}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??dL,parseSearch:e.parseSearch??hL}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const{foundRoute:n,matchedRoutes:r,routeParams:o}=this.getMatchedRoutes(e,t==null?void 0:t.dest);let c=!1;(n?n.path!=="/"&&o["**"]:oo(e.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):c=!0);const h=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let y=r.length-1;y>=0;y--){const b=r[y];if(b.children)return b.id}return Xs}})(),p=r.map(y=>{var b;let S;const _=((b=y.options.params)==null?void 0:b.parse)??y.options.parseParams;if(_)try{const T=_(o);Object.assign(o,T)}catch(T){if(S=new mL(T.message,{cause:T}),t!=null&&t.throwOnError)throw S;return S}}),g=[],m=y=>(y==null?void 0:y.id)?y.context??this.options.context??{}:this.options.context??{};return r.forEach((y,b)=>{var S,_;const T=g[b-1],[M,R,N]=(()=>{const it=(T==null?void 0:T.search)??e.search,dt=(T==null?void 0:T._strictSearch)??{};try{const rt=ry(y.options.validateSearch,{...it})??{};return[{...it,...rt},{...dt,...rt},void 0]}catch(rt){let X=rt;if(rt instanceof dg||(X=new dg(rt.message,{cause:rt})),t!=null&&t.throwOnError)throw X;return[it,{},X]}})(),k=((_=(S=y.options).loaderDeps)==null?void 0:_.call(S,{search:M}))??"",B=k?JSON.stringify(k):"",{usedParams:U,interpolatedPath:P}=Sp({path:y.fullPath,params:o,decodeCharMap:this.pathParamsDecodeCharMap}),G=Sp({path:y.id,params:o,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+B,H=this.getMatch(G),O=this.state.matches.find(it=>it.routeId===y.id),K=O?"stay":"enter";let Z;if(H)Z={...H,cause:K,params:O?gs(O.params,o):o,_strictParams:U,search:gs(O?O.search:H.search,M),_strictSearch:R};else{const it=y.options.loader||y.options.beforeLoad||y.lazyFn||yL(y)?"pending":"success";Z={id:G,index:b,routeId:y.id,params:O?gs(O.params,o):o,_strictParams:U,pathname:ma([this.basepath,P]),updatedAt:Date.now(),search:O?gs(O.search,M):M,_strictSearch:R,searchError:void 0,status:it,isFetching:!1,error:void 0,paramsError:p[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:K,loaderDeps:O?gs(O.loaderDeps,k):k,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:y.options.staticData||{},loadPromise:ic(),fullPath:y.fullPath}}t!=null&&t.preload||(Z.globalNotFound=h===y.id),Z.searchError=N;const et=m(T);Z.context={...et,...Z.__routeContext,...Z.__beforeLoadContext},g.push(Z)}),g.forEach((y,b)=>{var S,_,T,M,R,N,k,B;const U=this.looseRoutesById[y.routeId];if(!this.getMatch(y.id)&&(t==null?void 0:t._buildLocation)!==!0){const G=g[b-1],H=m(G),O={deps:y.loaderDeps,params:y.params,context:H,location:e,navigate:K=>this.navigate({...K,_fromLocation:e}),buildLocation:this.buildLocation,cause:y.cause,abortController:y.abortController,preload:!!y.preload,matches:g};y.__routeContext=((_=(S=U.options).context)==null?void 0:_.call(S,O))??{},y.context={...H,...y.__routeContext,...y.__beforeLoadContext}}if(y.status==="success"){y.headers=(M=(T=U.options).headers)==null?void 0:M.call(T,{loaderData:y.loaderData});const G={matches:g,match:y,params:y.params,loaderData:y.loaderData},H=(N=(R=U.options).head)==null?void 0:N.call(R,G);y.links=H==null?void 0:H.links,y.headScripts=H==null?void 0:H.scripts,y.meta=H==null?void 0:H.meta,y.scripts=(B=(k=U.options).scripts)==null?void 0:B.call(k,G)}}),g}}class dg extends Error{}class mL extends Error{}function vL(d){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:d,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function ry(d,e){if(d==null)return{};if("~standard"in d){const t=d["~standard"].validate(e);if(t instanceof Promise)throw new dg("Async validation not supported");if(t.issues)throw new dg(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in d?d.parse(e):typeof d=="function"?d(e):{}}const qw=["component","errorComponent","pendingComponent","notFoundComponent"];function yL(d){var e;for(const t of qw)if((e=d.options[t])!=null&&e.preload)return!0;return!1}const bL="Error preloading route! ☝️";class Gw{constructor(e){if(this.init=t=>{var n,r;this.originalIndex=t.originalIndex;const o=this.options,c=!(o!=null&&o.path)&&!(o!=null&&o.id);if(this.parentRoute=(r=(n=this.options).getParentRoute)==null?void 0:r.call(n),c)this._path=Xs;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let h=c?Xs:o==null?void 0:o.path;h&&h!=="/"&&(h=J0(h));const p=(o==null?void 0:o.id)||h;let g=c?Xs:ma([this.parentRoute.id===Xs?"":this.parentRoute.id,p]);h===Xs&&(h="/"),g!==Xs&&(g=ma(["/",g]));const m=g===Xs?"/":ma([this.parentRoute.fullPath,h]);this._path=h,this._id=g,this._fullPath=m,this._to=m,this._ssr=(o==null?void 0:o.ssr)??t.defaultSsr??!0},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class AL extends Gw{constructor(e){super(e)}}function tb(d){const e=d.errorComponent??Bg;return ut.jsx(SL,{getResetKey:d.getResetKey,onCatch:d.onCatch,children:({error:t,reset:n})=>t?Et.createElement(e,{error:t,reset:n}):d.children})}class SL extends Et.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Bg({error:d}){const[e,t]=Et.useState(!1);return ut.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[ut.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[ut.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),ut.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(n=>!n),children:e?"Hide Error":"Show Error"})]}),ut.jsx("div",{style:{height:".25rem"}}),e?ut.jsx("div",{children:ut.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:d.message?ut.jsx("code",{children:d.message}):null})}):null]})}var oy={exports:{}},ly={},cy={exports:{}},uy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function _L(){if(bE)return uy;bE=1;var d=Zd();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,n=d.useState,r=d.useEffect,o=d.useLayoutEffect,c=d.useDebugValue;function h(y,b){var S=b(),_=n({inst:{value:S,getSnapshot:b}}),T=_[0].inst,M=_[1];return o(function(){T.value=S,T.getSnapshot=b,p(T)&&M({inst:T})},[y,S,b]),r(function(){return p(T)&&M({inst:T}),y(function(){p(T)&&M({inst:T})})},[y]),c(S),S}function p(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function g(y,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return uy.useSyncExternalStore=d.useSyncExternalStore!==void 0?d.useSyncExternalStore:m,uy}var AE;function EL(){return AE||(AE=1,cy.exports=_L()),cy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function wL(){if(SE)return ly;SE=1;var d=Zd(),e=EL();function t(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=d.useRef,c=d.useEffect,h=d.useMemo,p=d.useDebugValue;return ly.useSyncExternalStoreWithSelector=function(g,m,y,b,S){var _=o(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=h(function(){function R(P){if(!N){if(N=!0,k=P,P=b(P),S!==void 0&&T.hasValue){var G=T.value;if(S(G,P))return B=G}return B=P}if(G=B,n(k,P))return G;var H=b(P);return S!==void 0&&S(G,H)?(k=P,G):(k=P,B=H)}var N=!1,k,B,U=y===void 0?null:y;return[function(){return R(m())},U===null?void 0:function(){return R(U())}]},[m,y,b,S]);var M=r(g,_[0],_[1]);return c(function(){T.hasValue=!0,T.value=M},[M]),p(M),M},ly}var _E;function TL(){return _E||(_E=1,oy.exports=wL()),oy.exports}var CL=TL();function xL(d,e=t=>t){return CL.useSyncExternalStoreWithSelector(d.subscribe,()=>d.state,()=>d.state,e,RL)}function RL(d,e){if(Object.is(d,e))return!0;if(typeof d!="object"||d===null||typeof e!="object"||e===null)return!1;if(d instanceof Map&&e instanceof Map){if(d.size!==e.size)return!1;for(const[n,r]of d)if(!e.has(n)||!Object.is(r,e.get(n)))return!1;return!0}if(d instanceof Set&&e instanceof Set){if(d.size!==e.size)return!1;for(const n of d)if(!e.has(n))return!1;return!0}const t=Object.keys(d);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(d[t[n]],e[t[n]]))return!1;return!0}const hy=Et.createContext(null);function Vw(){return typeof document>"u"?hy:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=hy,hy)}function bn(d){const e=Et.useContext(Vw());return d==null||d.warn,e}function fi(d){const e=bn({warn:(d==null?void 0:d.router)===void 0}),t=(d==null?void 0:d.router)||e,n=Et.useRef(void 0);return xL(t.__store,r=>{if(d!=null&&d.select){if(d.structuralSharing??t.options.defaultStructuralSharing){const o=gs(n.current,d.select(r));return n.current=o,o}return d.select(r)}return r})}const Ig=Et.createContext(void 0),ML=Et.createContext(void 0);function Cr(d){const e=Et.useContext(d.from?ML:Ig);return fi({select:n=>{const r=n.matches.find(o=>d.from?d.from===o.routeId:o.id===e);if(pa(!((d.shouldThrow??!0)&&!r),`Could not find ${d.from?`an active match from "${d.from}"`:"a nearest match!"}`),r!==void 0)return d.select?d.select(r):r},structuralSharing:d.structuralSharing})}function Xw(d){return Cr({from:d.from,strict:d.strict,structuralSharing:d.structuralSharing,select:e=>d.select?d.select(e.loaderData):e.loaderData})}function Yw(d){const{select:e,...t}=d;return Cr({...t,select:n=>e?e(n.loaderDeps):n.loaderDeps})}function Kw(d){return Cr({from:d.from,strict:d.strict,shouldThrow:d.shouldThrow,structuralSharing:d.structuralSharing,select:e=>d.select?d.select(e.params):e.params})}function Qw(d){return Cr({from:d.from,strict:d.strict,shouldThrow:d.shouldThrow,structuralSharing:d.structuralSharing,select:e=>d.select?d.select(e.search):e.search})}function $w(d){const{navigate:e}=bn();return Et.useCallback(t=>e({from:d==null?void 0:d.from,...t}),[d==null?void 0:d.from,e])}let LL=class extends Gw{constructor(e){super(e),this.useMatch=t=>Cr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Cr({...t,from:this.id,select:n=>t!=null&&t.select?t.select(n.context):n.context}),this.useSearch=t=>Qw({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kw({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>Yw({...t,from:this.id}),this.useLoaderData=t=>Xw({...t,from:this.id}),this.useNavigate=()=>$w({from:this.fullPath}),this.$$typeof=Symbol.for("react.memo")}};function DL(d){return new LL(d)}function OL(){return d=>kL(d)}class NL extends AL{constructor(e){super(e),this.useMatch=t=>Cr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Cr({...t,from:this.id,select:n=>t!=null&&t.select?t.select(n.context):n.context}),this.useSearch=t=>Qw({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kw({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>Yw({...t,from:this.id}),this.useLoaderData=t=>Xw({...t,from:this.id}),this.useNavigate=()=>$w({from:this.fullPath})}}function kL(d){return new NL(d)}function eb(d){return new PL(d,{silent:!0}).createRoute}class PL{constructor(e,t){this.path=e,this.createRoute=n=>{this.silent;const r=DL(n);return r.isRoot=!1,r},this.silent=t==null?void 0:t.silent}}function FL(d){const e=fi({select:t=>`not-found-${t.location.pathname}-${t.status}`});return ut.jsx(tb,{getResetKey:()=>e,onCatch:(t,n)=>{var r;if(Ss(t))(r=d.onCatch)==null||r.call(d,t,n);else throw t},errorComponent:({error:t})=>{var n;if(Ss(t))return(n=d.fallback)==null?void 0:n.call(d,t);throw t},children:d.children})}function zL(){return ut.jsx("p",{children:"Not Found"})}function tg(d){return ut.jsx(ut.Fragment,{children:d.children})}function Ww(d,e,t){return e.options.notFoundComponent?ut.jsx(e.options.notFoundComponent,{data:t}):d.options.defaultNotFoundComponent?ut.jsx(d.options.defaultNotFoundComponent,{data:t}):ut.jsx(zL,{})}var dy,EE;function HL(){if(EE)return dy;EE=1;const d={},e=d.hasOwnProperty,t=(H,O)=>{for(const K in H)e.call(H,K)&&O(K,H[K])},n=(H,O)=>(O&&t(O,(K,Z)=>{H[K]=Z}),H),r=(H,O)=>{const K=H.length;let Z=-1;for(;++Z<K;)O(H[Z])},o=H=>"\\u"+("0000"+H).slice(-4),c=(H,O)=>{let K=H.toString(16);return O?K:K.toUpperCase()},h=d.toString,p=Array.isArray,g=H=>typeof Buffer=="function"&&Buffer.isBuffer(H),m=H=>h.call(H)=="[object Object]",y=H=>typeof H=="string"||h.call(H)=="[object String]",b=H=>typeof H=="number"||h.call(H)=="[object Number]",S=H=>typeof H=="bigint",_=H=>typeof H=="function",T=H=>h.call(H)=="[object Map]",M=H=>h.call(H)=="[object Set]",R={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},N=/[\\\b\f\n\r\t]/,k=/[0-9]/,B=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,U=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,P=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,G=(H,O)=>{const K=()=>{$=X,++O.indentLevel,X=O.indent.repeat(O.indentLevel)},Z={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},et=O&&O.json;et&&(Z.quotes="double",Z.wrap=!0),O=n(Z,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const it=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",dt=O.compact,rt=O.lowercaseHex;let X=O.indent.repeat(O.indentLevel),$="";const J=O.__inline1__,St=O.__inline2__,D=dt?"":`
`;let V,at=!0;const nt=O.numbers=="binary",st=O.numbers=="octal",gt=O.numbers=="decimal",lt=O.numbers=="hexadecimal";if(et&&H&&_(H.toJSON)&&(H=H.toJSON()),!y(H)){if(T(H))return H.size==0?"new Map()":(dt||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+G(Array.from(H),O)+")");if(M(H))return H.size==0?"new Set()":"new Set("+G(Array.from(H),O)+")";if(g(H))return H.length==0?"Buffer.from([])":"Buffer.from("+G(Array.from(H),O)+")";if(p(H))return V=[],O.wrap=!0,J&&(O.__inline1__=!1,O.__inline2__=!0),St||K(),r(H,ft=>{at=!1,St&&(O.__inline2__=!1),V.push((dt||St?"":X)+G(ft,O))}),at?"[]":St?"["+V.join(", ")+"]":"["+D+V.join(","+D)+D+(dt?"":$)+"]";if(b(H)||S(H)){if(et)return JSON.stringify(Number(H));let ft;if(gt)ft=String(H);else if(lt){let wt=H.toString(16);rt||(wt=wt.toUpperCase()),ft="0x"+wt}else nt?ft="0b"+H.toString(2):st&&(ft="0o"+H.toString(8));return S(H)?ft+"n":ft}else return S(H)?et?JSON.stringify(Number(H)):H+"n":m(H)?(V=[],O.wrap=!0,K(),t(H,(ft,wt)=>{at=!1,V.push((dt?"":X)+G(ft,O)+":"+(dt?"":" ")+G(wt,O))}),at?"{}":"{"+D+V.join(","+D)+D+(dt?"":$)+"}"):et?JSON.stringify(H)||"null":String(H)}const mt=O.escapeEverything?U:P;return V=H.replace(mt,(ft,wt,Ut,we,Pi,pi)=>{if(wt){if(O.minimal)return wt;const le=wt.charCodeAt(0),be=wt.charCodeAt(1);if(O.es6){const Ae=(le-55296)*1024+be-56320+65536;return"\\u{"+c(Ae,rt)+"}"}return o(c(le,rt))+o(c(be,rt))}if(Ut)return o(c(Ut.charCodeAt(0),rt));if(ft=="\0"&&!et&&!k.test(pi.charAt(Pi+1)))return"\\0";if(we)return we==it||O.escapeEverything?"\\"+we:we;if(N.test(ft))return R[ft];if(O.minimal&&!B.test(ft))return ft;const gi=c(ft.charCodeAt(0),rt);return et||gi.length>2?o(gi):"\\x"+("00"+gi).slice(-2)}),it=="`"&&(V=V.replace(/\$\{/g,"\\${")),O.isScriptContext&&(V=V.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,et?"\\u003C!--":"\\x3C!--")),O.wrap&&(V=it+V+it),V};return G.version="3.0.2",dy=G,dy}HL();function BL({children:d,log:e}){return typeof document<"u"?null:ut.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[d,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function IL(){const d=bn(),t=(d.options.getScrollRestorationKey||H0)(d.latestLocation),n=t!==H0(d.latestLocation)?t:null;return!d.isScrollRestoring||!d.isServer?null:ut.jsx(BL,{children:`(${Uw.toString()})(${JSON.stringify(ug)},${JSON.stringify(n)}, undefined, true)`,log:!1})}const Zw=Et.memo(function({matchId:e}){var t,n;const r=bn(),o=fi({select:R=>{var N;return(N=R.matches.find(k=>k.id===e))==null?void 0:N.routeId}});pa(o);const c=r.routesById[o],h=c.options.pendingComponent??r.options.defaultPendingComponent,p=h?ut.jsx(h,{}):null,g=c.options.errorComponent??r.options.defaultErrorComponent,m=c.options.onCatch??r.options.defaultOnCatch,y=c.isRoot?c.options.notFoundComponent??((t=r.options.notFoundRoute)==null?void 0:t.options.component):c.options.notFoundComponent,b=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??h??((n=c.options.errorComponent)==null?void 0:n.preload))?Et.Suspense:tg,S=g?tb:tg,_=y?FL:tg,T=fi({select:R=>R.loadedAt}),M=fi({select:R=>{var N;const k=R.matches.findIndex(B=>B.id===e);return(N=R.matches[k-1])==null?void 0:N.routeId}});return ut.jsxs(ut.Fragment,{children:[ut.jsx(Ig.Provider,{value:e,children:ut.jsx(b,{fallback:p,children:ut.jsx(S,{getResetKey:()=>T,errorComponent:g||Bg,onCatch:(R,N)=>{if(Ss(R))throw R;m==null||m(R,N)},children:ut.jsx(_,{fallback:R=>{if(!y||R.routeId&&R.routeId!==o||!R.routeId&&!c.isRoot)throw R;return Et.createElement(y,R)},children:ut.jsx(jL,{matchId:e})})})})}),M===Xs&&r.options.scrollRestoration?ut.jsxs(ut.Fragment,{children:[ut.jsx(UL,{}),ut.jsx(IL,{})]}):null]})});function UL(){var d;const e=bn(),t=Et.useRef(void 0);return ut.jsx("script",{suppressHydrationWarning:!0,ref:n=>{var r;n&&(t.current===void 0||t.current.href!==((r=e.state.resolvedLocation)==null?void 0:r.href))&&(e.emit({type:"onRendered",...hc(e.state)}),t.current=e.state.resolvedLocation)}},(d=e.state.resolvedLocation)==null?void 0:d.state.key)}const jL=Et.memo(function({matchId:e}){var t,n,r;const o=bn(),{match:c,key:h,routeId:p}=fi({select:b=>{const S=b.matches.findIndex(k=>k.id===e),_=b.matches[S],T=_.routeId,M=o.routesById[T].options.remountDeps??o.options.defaultRemountDeps,R=M==null?void 0:M({routeId:T,loaderDeps:_.loaderDeps,params:_._strictParams,search:_._strictSearch});return{key:R?JSON.stringify(R):void 0,routeId:T,match:z0(_,["id","status","error"])}},structuralSharing:!0}),g=o.routesById[p],m=Et.useMemo(()=>{const b=g.options.component??o.options.defaultComponent;return b?ut.jsx(b,{},h):ut.jsx(ib,{})},[h,g.options.component,o.options.defaultComponent]),y=(g.options.errorComponent??o.options.defaultErrorComponent)||Bg;if(c.status==="notFound")return pa(Ss(c.error)),Ww(o,g,c.error);if(c.status==="redirected")throw pa(io(c.error)),(t=o.getMatch(c.id))==null?void 0:t.loadPromise;if(c.status==="error"){if(o.isServer)return ut.jsx(y,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const b=g.options.pendingMinMs??o.options.defaultPendingMinMs;if(b&&!((n=o.getMatch(c.id))!=null&&n.minPendingPromise)&&!o.isServer){const S=ic();Promise.resolve().then(()=>{o.updateMatch(c.id,_=>({..._,minPendingPromise:S}))}),setTimeout(()=>{S.resolve(),o.updateMatch(c.id,_=>({..._,minPendingPromise:void 0}))},b)}throw(r=o.getMatch(c.id))==null?void 0:r.loadPromise}return m}),ib=Et.memo(function(){const e=bn(),t=Et.useContext(Ig),n=fi({select:g=>{var m;return(m=g.matches.find(y=>y.id===t))==null?void 0:m.routeId}}),r=e.routesById[n],o=fi({select:g=>{const y=g.matches.find(b=>b.id===t);return pa(y),y.globalNotFound}}),c=fi({select:g=>{var m;const y=g.matches,b=y.findIndex(S=>S.id===t);return(m=y[b+1])==null?void 0:m.id}});if(o)return Ww(e,r,void 0);if(!c)return null;const h=ut.jsx(Zw,{matchId:c}),p=e.options.defaultPendingComponent?ut.jsx(e.options.defaultPendingComponent,{}):null;return t===Xs?ut.jsx(Et.Suspense,{fallback:p,children:h}):h});function qL(d){return typeof(d==null?void 0:d.message)!="string"?!1:d.message.startsWith("Failed to fetch dynamically imported module")||d.message.startsWith("error loading dynamically imported module")||d.message.startsWith("Importing a module script failed")}function GL({children:d,fallback:e=null}){return XL()?ut.jsx(ut.Fragment,{children:d}):ut.jsx(ut.Fragment,{children:e})}function VL(){return()=>{}}function XL(){return Et.useSyncExternalStore(VL,()=>!0,()=>!1)}function sb(d,e,t){let n,r,o,c;const h=()=>typeof document>"u"&&(t==null?void 0:t())===!1?(r=()=>null,Promise.resolve()):(n||(n=d().then(g=>{n=void 0,r=g[e]}).catch(g=>{if(o=g,qL(o)&&o instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const m=`tanstack_router_reload:${o.message}`;sessionStorage.getItem(m)||(sessionStorage.setItem(m,"1"),c=!0)}})),n),p=function(m){if(c)throw window.location.reload(),new Promise(()=>{});if(o)throw o;if(!r)throw h();return(t==null?void 0:t())===!1?ut.jsx(GL,{fallback:ut.jsx(ib,{}),children:Et.createElement(r,m)}):Et.createElement(r,m)};return p.preload=h,p}var fy={exports:{}},ai={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function YL(){if(wE)return ai;wE=1;var d=Zd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(p,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:p,containerInfo:g,implementation:m}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ai.createPortal=function(p,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(p,g,null,m)},ai.flushSync=function(p){var g=c.T,m=n.p;try{if(c.T=null,n.p=2,p)return p()}finally{c.T=g,n.p=m,n.d.f()}},ai.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(p,g))},ai.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},ai.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?n.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):m==="script"&&n.d.X(p,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ai.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=h(g.as,g.crossOrigin);n.d.M(p,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(p)},ai.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin);n.d.L(p,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ai.preloadModule=function(p,g){if(typeof p=="string")if(g){var m=h(g.as,g.crossOrigin);n.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(p)},ai.requestFormReset=function(p){n.d.r(p)},ai.unstable_batchedUpdates=function(p,g){return p(g)},ai.useFormState=function(p,g,m){return c.H.useFormState(p,g,m)},ai.useFormStatus=function(){return c.H.useHostTransitionStatus()},ai.version="19.0.0",ai}var TE;function Jw(){if(TE)return fy.exports;TE=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(e){console.error(e)}}return d(),fy.exports=YL(),fy.exports}var KL=Jw();const Lh=typeof window<"u"?Et.useLayoutEffect:Et.useEffect;function py(d){const e=Et.useRef({value:d,prev:null}),t=e.current.value;return d!==t&&(e.current={value:d,prev:t}),e.current.prev}function QL(d,e,t={},n={}){const r=Et.useRef(typeof IntersectionObserver=="function"),o=Et.useRef(null);return Et.useEffect(()=>{if(!(!d.current||!r.current||n.disabled))return o.current=new IntersectionObserver(([c])=>{e(c)},t),o.current.observe(d.current),()=>{var c;(c=o.current)==null||c.disconnect()}},[e,t,n.disabled,d]),o.current}function $L(d){const e=Et.useRef(null);return Et.useImperativeHandle(d,()=>e.current,[]),e}function WL(){const d=bn(),e=Et.useRef({router:d,mounted:!1}),t=fi({select:({isLoading:y})=>y}),[n,r]=Et.useState(!1),o=fi({select:y=>y.matches.some(b=>b.status==="pending"),structuralSharing:!0}),c=py(t),h=t||n||o,p=py(h),g=t||o,m=py(g);return d.isServer||(d.startTransition=y=>{r(!0),Et.startTransition(()=>{y(),r(!1)})}),Et.useEffect(()=>{const y=d.history.subscribe(d.load),b=d.buildLocation({to:d.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return oo(d.latestLocation.href)!==oo(b.href)&&d.commitLocation({...b,replace:!0}),()=>{y()}},[d,d.history]),Lh(()=>{if(typeof window<"u"&&d.clientSsr||e.current.router===d&&e.current.mounted)return;e.current={router:d,mounted:!0},(async()=>{try{await d.load()}catch(b){console.error(b)}})()},[d]),Lh(()=>{c&&!t&&d.emit({type:"onLoad",...hc(d.state)})},[c,d,t]),Lh(()=>{m&&!g&&d.emit({type:"onBeforeRouteMount",...hc(d.state)})},[g,m,d]),Lh(()=>{p&&!h&&(d.emit({type:"onResolved",...hc(d.state)}),d.__store.setState(y=>({...y,status:"idle",resolvedLocation:y.location})))},[h,p,d]),null}function ZL(){const d=bn(),e=d.options.defaultPendingComponent?ut.jsx(d.options.defaultPendingComponent,{}):null,t=d.isServer||typeof document<"u"&&d.clientSsr?tg:Et.Suspense,n=ut.jsxs(t,{fallback:e,children:[ut.jsx(WL,{}),ut.jsx(JL,{})]});return d.options.InnerWrap?ut.jsx(d.options.InnerWrap,{children:n}):n}function JL(){const d=fi({select:t=>{var n;return(n=t.matches[0])==null?void 0:n.id}}),e=fi({select:t=>t.loadedAt});return ut.jsx(Ig.Provider,{value:d,children:ut.jsx(tb,{getResetKey:()=>e,errorComponent:Bg,onCatch:t=>{t.message||t.toString()},children:d?ut.jsx(Zw,{matchId:d}):null})})}function tD(d){return fi({select:e=>{const t=e.matches;return d!=null&&d.select?d.select(t):t},structuralSharing:d==null?void 0:d.structuralSharing})}function eD(d,e){const t=bn(),[n,r]=Et.useState(!1),o=Et.useRef(!1),c=$L(e),{activeProps:h=()=>({className:"active"}),inactiveProps:p=()=>({}),activeOptions:g,to:m,preload:y,preloadDelay:b,hashScrollIntoView:S,replace:_,startTransition:T,resetScroll:M,viewTransition:R,children:N,target:k,disabled:B,style:U,className:P,onClick:G,onFocus:H,onMouseEnter:O,onMouseLeave:K,onTouchStart:Z,ignoreBlocker:et,...it}=d,{params:dt,search:rt,hash:X,state:$,mask:J,reloadDocument:St,...D}=it,V=Et.useMemo(()=>{try{return new URL(`${m}`),"external"}catch{}return"internal"},[m]),at=fi({select:qt=>qt.location.search,structuralSharing:!0}),nt=tD({select:qt=>{var ae;return d.from??((ae=qt[qt.length-1])==null?void 0:ae.fullPath)}}),st=Et.useMemo(()=>({...d,from:nt}),[d,nt]),gt=Et.useMemo(()=>t.buildLocation(st),[t,st,at]),lt=Et.useMemo(()=>st.reloadDocument?!1:y??t.options.defaultPreload,[t.options.defaultPreload,y,st.reloadDocument]),mt=b??t.options.defaultPreloadDelay??0,ft=fi({select:qt=>{if(g!=null&&g.exact){if(!iL(qt.location.pathname,gt.pathname,t.basepath))return!1}else{const ae=lg(qt.location.pathname,t.basepath).split("/");if(!lg(gt.pathname,t.basepath).split("/").every((jg,sf)=>jg===ae[sf]))return!1}return((g==null?void 0:g.includeSearch)??!0)&&!uc(qt.location.search,gt.search,{partial:!(g!=null&&g.exact),ignoreUndefined:!(g!=null&&g.explicitUndefined)})?!1:g!=null&&g.includeHash?qt.location.hash===gt.hash:!0}}),wt=Et.useCallback(()=>{t.preloadRoute(st).catch(qt=>{console.warn(qt),console.warn(bL)})},[st,t]),Ut=Et.useCallback(qt=>{qt!=null&&qt.isIntersecting&&wt()},[wt]);if(QL(c,Ut,{rootMargin:"100px"},{disabled:!!B||lt!=="viewport"}),Lh(()=>{o.current||!B&&lt==="render"&&(wt(),o.current=!0)},[B,wt,lt]),V==="external")return{...D,ref:c,type:V,href:m,...N&&{children:N},...k&&{target:k},...B&&{disabled:B},...U&&{style:U},...P&&{className:P},...G&&{onClick:G},...H&&{onFocus:H},...O&&{onMouseEnter:O},...K&&{onMouseLeave:K},...Z&&{onTouchStart:Z}};const we=qt=>{if(!B&&!nD(qt)&&!qt.defaultPrevented&&(!k||k==="_self")&&qt.button===0){qt.preventDefault(),KL.flushSync(()=>{r(!0)});const ae=t.subscribe("onResolved",()=>{ae(),r(!1)});return t.navigate({...st,replace:_,resetScroll:M,hashScrollIntoView:S,startTransition:T,viewTransition:R,ignoreBlocker:et})}},Pi=qt=>{B||lt&&wt()},pi=Pi,gi=qt=>{if(B)return;const ae=qt.target||{};if(lt){if(ae.preloadTimeout)return;ae.preloadTimeout=setTimeout(()=>{ae.preloadTimeout=null,wt()},mt)}},le=qt=>{if(B)return;const ae=qt.target||{};ae.preloadTimeout&&(clearTimeout(ae.preloadTimeout),ae.preloadTimeout=null)},be=qt=>ae=>{var An;(An=ae.persist)==null||An.call(ae),qt.filter(Boolean).forEach(Fi=>{ae.defaultPrevented||Fi(ae)})},Ae=ft?ro(h,{})??{}:{},Cs=ft?{}:ro(p,{}),Sa=[P,Ae.className,Cs.className].filter(Boolean).join(" "),_a={...U,...Ae.style,...Cs.style};return{...D,...Ae,...Cs,href:B?void 0:gt.maskedLocation?t.history.createHref(gt.maskedLocation.href):t.history.createHref(gt.href),ref:c,onClick:be([G,we]),onFocus:be([H,Pi]),onMouseEnter:be([O,gi]),onMouseLeave:be([K,le]),onTouchStart:be([Z,pi]),disabled:!!B,target:k,...Object.keys(_a).length&&{style:_a},...Sa&&{className:Sa},...B&&{role:"link","aria-disabled":!0},...ft&&{"data-status":"active","aria-current":"page"},...n&&{"data-transitioning":"transitioning"}}}function iD(d){return Et.forwardRef(function(t,n){return ut.jsx(sD,{...t,_asChild:d,ref:n})})}const sD=Et.forwardRef((d,e)=>{const{_asChild:t,...n}=d,{type:r,ref:o,...c}=eD(n,e),h=typeof n.children=="function"?n.children({isActive:c["data-status"]==="active"}):n.children;return typeof t>"u"&&delete c.disabled,Et.createElement(t||"a",{...c,ref:o},h)});function nD(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}const aD=d=>new rD(d);class rD extends gL{constructor(e){super(e)}}function oD({router:d,children:e,...t}){d.update({...d.options,...t,context:{...d.options.context,...t.context}});const n=Vw(),r=ut.jsx(n.Provider,{value:d,children:e});return d.options.Wrap?ut.jsx(d.options.Wrap,{children:r}):r}function lD({router:d,...e}){return ut.jsx(oD,{router:d,...e,children:ut.jsx(ZL,{})})}function cD(){const{quizState:d,dispatch:e}=KM();return ut.jsx(Rx.Provider,{value:{quizState:d,dispatch:e},children:ut.jsx("main",{children:ut.jsx(lD,{router:MD,context:{quizState:d,dispatch:e}})})})}var gy={exports:{}},dh={},my={exports:{}},vy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function uD(){return CE||(CE=1,function(d){function e(X,$){var J=X.length;X.push($);t:for(;0<J;){var St=J-1>>>1,D=X[St];if(0<r(D,$))X[St]=$,X[J]=D,J=St;else break t}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var $=X[0],J=X.pop();if(J!==$){X[0]=J;t:for(var St=0,D=X.length,V=D>>>1;St<V;){var at=2*(St+1)-1,nt=X[at],st=at+1,gt=X[st];if(0>r(nt,J))st<D&&0>r(gt,nt)?(X[St]=gt,X[st]=J,St=st):(X[St]=nt,X[at]=J,St=at);else if(st<D&&0>r(gt,J))X[St]=gt,X[st]=J,St=st;else break t}}return $}function r(X,$){var J=X.sortIndex-$.sortIndex;return J!==0?J:X.id-$.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();d.unstable_now=function(){return c.now()-h}}var p=[],g=[],m=1,y=null,b=3,S=!1,_=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(X){for(var $=t(g);$!==null;){if($.callback===null)n(g);else if($.startTime<=X)n(g),$.sortIndex=$.expirationTime,e(p,$);else break;$=t(g)}}function B(X){if(T=!1,k(X),!_)if(t(p)!==null)_=!0,dt();else{var $=t(g);$!==null&&rt(B,$.startTime-X)}}var U=!1,P=-1,G=5,H=-1;function O(){return!(d.unstable_now()-H<G)}function K(){if(U){var X=d.unstable_now();H=X;var $=!0;try{t:{_=!1,T&&(T=!1,R(P),P=-1),S=!0;var J=b;try{e:{for(k(X),y=t(p);y!==null&&!(y.expirationTime>X&&O());){var St=y.callback;if(typeof St=="function"){y.callback=null,b=y.priorityLevel;var D=St(y.expirationTime<=X);if(X=d.unstable_now(),typeof D=="function"){y.callback=D,k(X),$=!0;break e}y===t(p)&&n(p),k(X)}else n(p);y=t(p)}if(y!==null)$=!0;else{var V=t(g);V!==null&&rt(B,V.startTime-X),$=!1}}break t}finally{y=null,b=J,S=!1}$=void 0}}finally{$?Z():U=!1}}}var Z;if(typeof N=="function")Z=function(){N(K)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,it=et.port2;et.port1.onmessage=K,Z=function(){it.postMessage(null)}}else Z=function(){M(K,0)};function dt(){U||(U=!0,Z())}function rt(X,$){P=M(function(){X(d.unstable_now())},$)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(X){X.callback=null},d.unstable_continueExecution=function(){_||S||(_=!0,dt())},d.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<X?Math.floor(1e3/X):5},d.unstable_getCurrentPriorityLevel=function(){return b},d.unstable_getFirstCallbackNode=function(){return t(p)},d.unstable_next=function(X){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var J=b;b=$;try{return X()}finally{b=J}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=b;b=X;try{return $()}finally{b=J}},d.unstable_scheduleCallback=function(X,$,J){var St=d.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?St+J:St):J=St,X){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=J+D,X={id:m++,callback:$,priorityLevel:X,startTime:J,expirationTime:D,sortIndex:-1},J>St?(X.sortIndex=J,e(g,X),t(p)===null&&X===t(g)&&(T?(R(P),P=-1):T=!0,rt(B,J-St))):(X.sortIndex=D,e(p,X),_||S||(_=!0,dt())),X},d.unstable_shouldYield=O,d.unstable_wrapCallback=function(X){var $=b;return function(){var J=b;b=$;try{return X.apply(this,arguments)}finally{b=J}}}}(vy)),vy}var xE;function hD(){return xE||(xE=1,my.exports=uD()),my.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function dD(){if(RE)return dh;RE=1;var d=hD(),e=Zd(),t=Jw();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var G=Symbol.for("react.client.reference");function H(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===G?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case p:return"Fragment";case h:return"Portal";case m:return"Profiler";case g:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case S:return(i.displayName||"Context")+".Provider";case b:return(i._context.displayName||"Context")+".Consumer";case _:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:H(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return H(i(s))}catch{}}return null}var O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=Object.assign,Z,et;function it(i){if(Z===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||"",et=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+i+et}var dt=!1;function rt(i,s){if(!i||dt)return"";dt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Y){var q=Y}Reflect.construct(i,[],tt)}else{try{tt.call()}catch(Y){q=Y}i.call(tt.prototype)}}else{try{throw Error()}catch(Y){q=Y}(tt=i())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=l.DetermineComponentFrameRoot(),A=v[0],x=v[1];if(A&&x){var L=A.split(`
`),z=x.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===z.length)for(l=L.length-1,f=z.length-1;1<=l&&0<=f&&L[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==z[f]){var Q=`
`+L[l].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=l&&0<=f);break}}}finally{dt=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?it(a):""}function X(i){switch(i.tag){case 26:case 27:case 5:return it(i.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return i=rt(i.type,!1),i;case 11:return i=rt(i.type.render,!1),i;case 1:return i=rt(i.type,!0),i;default:return""}}function $(i){try{var s="";do s+=X(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function J(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function St(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function D(i){if(J(i)!==i)throw Error(n(188))}function V(i){var s=i.alternate;if(!s){if(s=J(i),s===null)throw Error(n(188));return s!==i?null:i}for(var a=i,l=s;;){var f=a.return;if(f===null)break;var v=f.alternate;if(v===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===v.child){for(v=f.child;v;){if(v===a)return D(f),i;if(v===l)return D(f),s;v=v.sibling}throw Error(n(188))}if(a.return!==l.return)a=f,l=v;else{for(var A=!1,x=f.child;x;){if(x===a){A=!0,a=f,l=v;break}if(x===l){A=!0,l=f,a=v;break}x=x.sibling}if(!A){for(x=v.child;x;){if(x===a){A=!0,a=v,l=f;break}if(x===l){A=!0,l=v,a=f;break}x=x.sibling}if(!A)throw Error(n(189))}}if(a.alternate!==l)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?i:s}function at(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=at(i),s!==null)return s;i=i.sibling}return null}var nt=Array.isArray,st=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},lt=[],mt=-1;function ft(i){return{current:i}}function wt(i){0>mt||(i.current=lt[mt],lt[mt]=null,mt--)}function Ut(i,s){mt++,lt[mt]=i.current,i.current=s}var we=ft(null),Pi=ft(null),pi=ft(null),gi=ft(null);function le(i,s){switch(Ut(pi,s),Ut(Pi,i),Ut(we,null),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?v_(s):0;break;default:if(i=i===8?s.parentNode:s,s=i.tagName,i=i.namespaceURI)i=v_(i),s=y_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}wt(we),Ut(we,s)}function be(){wt(we),wt(Pi),wt(pi)}function Ae(i){i.memoizedState!==null&&Ut(gi,i);var s=we.current,a=y_(s,i.type);s!==a&&(Ut(Pi,i),Ut(we,a))}function Cs(i){Pi.current===i&&(wt(we),wt(Pi)),gi.current===i&&(wt(gi),sh._currentValue=gt)}var Sa=Object.prototype.hasOwnProperty,_a=d.unstable_scheduleCallback,qt=d.unstable_cancelCallback,ae=d.unstable_shouldYield,An=d.unstable_requestPaint,Fi=d.unstable_now,jg=d.unstable_getCurrentPriorityLevel,sf=d.unstable_ImmediatePriority,ob=d.unstable_UserBlockingPriority,nf=d.unstable_NormalPriority,sT=d.unstable_LowPriority,lb=d.unstable_IdlePriority,nT=d.log,aT=d.unstable_setDisableYieldValue,du=null,zi=null;function rT(i){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(du,i,void 0,(i.current.flags&128)===128)}catch{}}function Ea(i){if(typeof nT=="function"&&aT(i),zi&&typeof zi.setStrictMode=="function")try{zi.setStrictMode(du,i)}catch{}}var Hi=Math.clz32?Math.clz32:cT,oT=Math.log,lT=Math.LN2;function cT(i){return i>>>=0,i===0?32:31-(oT(i)/lT|0)|0}var af=128,rf=4194304;function Lr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function of(i,s){var a=i.pendingLanes;if(a===0)return 0;var l=0,f=i.suspendedLanes,v=i.pingedLanes,A=i.warmLanes;i=i.finishedLanes!==0;var x=a&134217727;return x!==0?(a=x&~f,a!==0?l=Lr(a):(v&=x,v!==0?l=Lr(v):i||(A=x&~A,A!==0&&(l=Lr(A))))):(x=a&~f,x!==0?l=Lr(x):v!==0?l=Lr(v):i||(A=a&~A,A!==0&&(l=Lr(A)))),l===0?0:s!==0&&s!==l&&(s&f)===0&&(f=l&-l,A=s&-s,f>=A||f===32&&(A&4194176)!==0)?s:l}function fu(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function uT(i,s){switch(i){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cb(){var i=af;return af<<=1,(af&4194176)===0&&(af=128),i}function ub(){var i=rf;return rf<<=1,(rf&62914560)===0&&(rf=4194304),i}function qg(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function pu(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function hT(i,s,a,l,f,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var x=i.entanglements,L=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var Q=31-Hi(a),tt=1<<Q;x[Q]=0,L[Q]=-1;var q=z[Q];if(q!==null)for(z[Q]=null,Q=0;Q<q.length;Q++){var Y=q[Q];Y!==null&&(Y.lane&=-536870913)}a&=~tt}l!==0&&hb(i,l,0),v!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~s))}function hb(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var l=31-Hi(s);i.entangledLanes|=s,i.entanglements[l]=i.entanglements[l]|1073741824|a&4194218}function db(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var l=31-Hi(a),f=1<<l;f&s|i[l]&s&&(i[l]|=s),a&=~f}}function fb(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function pb(){var i=st.p;return i!==0?i:(i=window.event,i===void 0?32:F_(i.type))}function dT(i,s){var a=st.p;try{return st.p=i,s()}finally{st.p=a}}var wa=Math.random().toString(36).slice(2),si="__reactFiber$"+wa,Ti="__reactProps$"+wa,fl="__reactContainer$"+wa,Gg="__reactEvents$"+wa,fT="__reactListeners$"+wa,pT="__reactHandles$"+wa,gb="__reactResources$"+wa,gu="__reactMarker$"+wa;function Vg(i){delete i[si],delete i[Ti],delete i[Gg],delete i[fT],delete i[pT]}function Dr(i){var s=i[si];if(s)return s;for(var a=i.parentNode;a;){if(s=a[fl]||a[si]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=S_(i);i!==null;){if(a=i[si])return a;i=S_(i)}return s}i=a,a=i.parentNode}return null}function pl(i){if(i=i[si]||i[fl]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function mu(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function gl(i){var s=i[gb];return s||(s=i[gb]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ie(i){i[gu]=!0}var mb=new Set,vb={};function Or(i,s){ml(i,s),ml(i+"Capture",s)}function ml(i,s){for(vb[i]=s,i=0;i<s.length;i++)mb.add(s[i])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yb={},bb={};function mT(i){return Sa.call(bb,i)?!0:Sa.call(yb,i)?!1:gT.test(i)?bb[i]=!0:(yb[i]=!0,!1)}function lf(i,s,a){if(mT(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function cf(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function _n(i,s,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+l)}}function is(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ab(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vT(i){var s=Ab(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),l=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,v=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function uf(i){i._valueTracker||(i._valueTracker=vT(i))}function Sb(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return i&&(l=Ab(i)?i.checked?"true":"false":i.value),i=l,i!==a?(s.setValue(i),!0):!1}function hf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var yT=/[\n"\\]/g;function ss(i){return i.replace(yT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xg(i,s,a,l,f,v,A,x){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+is(s)):i.value!==""+is(s)&&(i.value=""+is(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Yg(i,A,is(s)):a!=null?Yg(i,A,is(a)):l!=null&&i.removeAttribute("value"),f==null&&v!=null&&(i.defaultChecked=!!v),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+is(x):i.removeAttribute("name")}function _b(i,s,a,l,f,v,A,x){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;a=a!=null?""+is(a):"",s=s!=null?""+is(s):a,x||s===i.value||(i.value=s),i.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,i.checked=x?i.checked:!!l,i.defaultChecked=!!l,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A)}function Yg(i,s,a){s==="number"&&hf(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function vl(i,s,a,l){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&l&&(i[a].defaultSelected=!0)}else{for(a=""+is(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,l&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function Eb(i,s,a){if(s!=null&&(s=""+is(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+is(a):""}function wb(i,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(n(92));if(nt(l)){if(1<l.length)throw Error(n(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=is(s),i.defaultValue=a,l=i.textContent,l===a&&l!==""&&l!==null&&(i.value=l)}function yl(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var bT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tb(i,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":l?i.setProperty(s,a):typeof a!="number"||a===0||bT.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Cb(i,s,a){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Tb(i,f,l)}else for(var v in s)s.hasOwnProperty(v)&&Tb(i,v,s[v])}function Kg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ST=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function df(i){return ST.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Qg=null;function $g(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bl=null,Al=null;function xb(i){var s=pl(i);if(s&&(i=s.stateNode)){var a=i[Ti]||null;t:switch(i=s.stateNode,s.type){case"input":if(Xg(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ss(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==i&&l.form===i.form){var f=l[Ti]||null;if(!f)throw Error(n(90));Xg(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===i.form&&Sb(l)}break t;case"textarea":Eb(i,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&vl(i,!!a.multiple,s,!1)}}}var Wg=!1;function Rb(i,s,a){if(Wg)return i(s,a);Wg=!0;try{var l=i(s);return l}finally{if(Wg=!1,(bl!==null||Al!==null)&&(Qf(),bl&&(s=bl,i=Al,Al=bl=null,xb(s),i)))for(s=0;s<i.length;s++)xb(i[s])}}function vu(i,s){var a=i.stateNode;if(a===null)return null;var l=a[Ti]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(i=i.type,l=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!l;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var Zg=!1;if(Sn)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{Zg=!1}var Ta=null,Jg=null,ff=null;function Mb(){if(ff)return ff;var i,s=Jg,a=s.length,l,f="value"in Ta?Ta.value:Ta.textContent,v=f.length;for(i=0;i<a&&s[i]===f[i];i++);var A=a-i;for(l=1;l<=A&&s[a-l]===f[v-l];l++);return ff=f.slice(i,1<l?1-l:void 0)}function pf(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function gf(){return!0}function Lb(){return!1}function Ci(i){function s(a,l,f,v,A){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(a=i[x],this[x]=a?a(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?gf:Lb,this.isPropagationStopped=Lb,this}return K(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=gf)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=gf)},persist:function(){},isPersistent:gf}),s}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=Ci(Nr),bu=K({},Nr,{view:0,detail:0}),_T=Ci(bu),tm,em,Au,vf=K({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Au&&(Au&&i.type==="mousemove"?(tm=i.screenX-Au.screenX,em=i.screenY-Au.screenY):em=tm=0,Au=i),tm)},movementY:function(i){return"movementY"in i?i.movementY:em}}),Db=Ci(vf),ET=K({},vf,{dataTransfer:0}),wT=Ci(ET),TT=K({},bu,{relatedTarget:0}),im=Ci(TT),CT=K({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),xT=Ci(CT),RT=K({},Nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),MT=Ci(RT),LT=K({},Nr,{data:0}),Ob=Ci(LT),DT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=NT[i])?!!s[i]:!1}function sm(){return kT}var PT=K({},bu,{key:function(i){if(i.key){var s=DT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=pf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?OT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(i){return i.type==="keypress"?pf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),FT=Ci(PT),zT=K({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nb=Ci(zT),HT=K({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),BT=Ci(HT),IT=K({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),UT=Ci(IT),jT=K({},vf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Ci(jT),GT=K({},Nr,{newState:0,oldState:0}),VT=Ci(GT),XT=[9,13,27,32],nm=Sn&&"CompositionEvent"in window,Su=null;Sn&&"documentMode"in document&&(Su=document.documentMode);var YT=Sn&&"TextEvent"in window&&!Su,kb=Sn&&(!nm||Su&&8<Su&&11>=Su),Pb=" ",Fb=!1;function zb(i,s){switch(i){case"keyup":return XT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sl=!1;function KT(i,s){switch(i){case"compositionend":return Hb(s);case"keypress":return s.which!==32?null:(Fb=!0,Pb);case"textInput":return i=s.data,i===Pb&&Fb?null:i;default:return null}}function QT(i,s){if(Sl)return i==="compositionend"||!nm&&zb(i,s)?(i=Mb(),ff=Jg=Ta=null,Sl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return kb&&s.locale!=="ko"?null:s.data;default:return null}}var $T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!$T[i.type]:s==="textarea"}function Ib(i,s,a,l){bl?Al?Al.push(l):Al=[l]:bl=l,s=tp(s,"onChange"),0<s.length&&(a=new mf("onChange","change",null,a,l),i.push({event:a,listeners:s}))}var _u=null,Eu=null;function WT(i){d_(i,0)}function yf(i){var s=mu(i);if(Sb(s))return i}function Ub(i,s){if(i==="change")return s}var jb=!1;if(Sn){var am;if(Sn){var rm="oninput"in document;if(!rm){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),rm=typeof qb.oninput=="function"}am=rm}else am=!1;jb=am&&(!document.documentMode||9<document.documentMode)}function Gb(){_u&&(_u.detachEvent("onpropertychange",Vb),Eu=_u=null)}function Vb(i){if(i.propertyName==="value"&&yf(Eu)){var s=[];Ib(s,Eu,i,$g(i)),Rb(WT,s)}}function ZT(i,s,a){i==="focusin"?(Gb(),_u=s,Eu=a,_u.attachEvent("onpropertychange",Vb)):i==="focusout"&&Gb()}function JT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yf(Eu)}function tC(i,s){if(i==="click")return yf(s)}function eC(i,s){if(i==="input"||i==="change")return yf(s)}function iC(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Bi=typeof Object.is=="function"?Object.is:iC;function wu(i,s){if(Bi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Sa.call(s,f)||!Bi(i[f],s[f]))return!1}return!0}function Xb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Yb(i,s){var a=Xb(i);i=0;for(var l;a;){if(a.nodeType===3){if(l=i+a.textContent.length,i<=s&&l>=s)return{node:a,offset:s-i};i=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Xb(a)}}function Kb(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Kb(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Qb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=hf(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=hf(i.document)}return s}function om(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function sC(i,s){var a=Qb(s);s=i.focusedElem;var l=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&Kb(s.ownerDocument.documentElement,s)){if(l!==null&&om(s)){if(i=l.start,a=l.end,a===void 0&&(a=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(a,s.value.length);else if(a=(i=s.ownerDocument||document)&&i.defaultView||window,a.getSelection){a=a.getSelection();var f=s.textContent.length,v=Math.min(l.start,f);l=l.end===void 0?v:Math.min(l.end,f),!a.extend&&v>l&&(f=l,l=v,v=f),f=Yb(s,v);var A=Yb(s,l);f&&A&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==A.node||a.focusOffset!==A.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),a.removeAllRanges(),v>l?(a.addRange(i),a.extend(A.node,A.offset)):(i.setEnd(A.node,A.offset),a.addRange(i)))}}for(i=[],a=s;a=a.parentNode;)a.nodeType===1&&i.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)a=i[s],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var nC=Sn&&"documentMode"in document&&11>=document.documentMode,_l=null,lm=null,Tu=null,cm=!1;function $b(i,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cm||_l==null||_l!==hf(l)||(l=_l,"selectionStart"in l&&om(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tu&&wu(Tu,l)||(Tu=l,l=tp(lm,"onSelect"),0<l.length&&(s=new mf("onSelect","select",null,s,a),i.push({event:s,listeners:l}),s.target=_l)))}function kr(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var El={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},um={},Wb={};Sn&&(Wb=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Pr(i){if(um[i])return um[i];if(!El[i])return i;var s=El[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Wb)return um[i]=s[a];return i}var Zb=Pr("animationend"),Jb=Pr("animationiteration"),tA=Pr("animationstart"),aC=Pr("transitionrun"),rC=Pr("transitionstart"),oC=Pr("transitioncancel"),eA=Pr("transitionend"),iA=new Map,sA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function xs(i,s){iA.set(i,s),Or(s,[i])}var ns=[],wl=0,hm=0;function bf(){for(var i=wl,s=hm=wl=0;s<i;){var a=ns[s];ns[s++]=null;var l=ns[s];ns[s++]=null;var f=ns[s];ns[s++]=null;var v=ns[s];if(ns[s++]=null,l!==null&&f!==null){var A=l.pending;A===null?f.next=f:(f.next=A.next,A.next=f),l.pending=f}v!==0&&nA(a,f,v)}}function Af(i,s,a,l){ns[wl++]=i,ns[wl++]=s,ns[wl++]=a,ns[wl++]=l,hm|=l,i.lanes|=l,i=i.alternate,i!==null&&(i.lanes|=l)}function dm(i,s,a,l){return Af(i,s,a,l),Sf(i)}function Ca(i,s){return Af(i,null,null,s),Sf(i)}function nA(i,s,a){i.lanes|=a;var l=i.alternate;l!==null&&(l.lanes|=a);for(var f=!1,v=i.return;v!==null;)v.childLanes|=a,l=v.alternate,l!==null&&(l.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(f=!0)),i=v,v=v.return;f&&s!==null&&i.tag===3&&(v=i.stateNode,f=31-Hi(a),v=v.hiddenUpdates,i=v[f],i===null?v[f]=[s]:i.push(s),s.lane=a|536870912)}function Sf(i){if(50<$u)throw $u=0,yv=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Tl={},aA=new WeakMap;function as(i,s){if(typeof i=="object"&&i!==null){var a=aA.get(i);return a!==void 0?a:(s={value:i,source:s,stack:$(s)},aA.set(i,s),s)}return{value:i,source:s,stack:$(s)}}var Cl=[],xl=0,_f=null,Ef=0,rs=[],os=0,Fr=null,En=1,wn="";function zr(i,s){Cl[xl++]=Ef,Cl[xl++]=_f,_f=i,Ef=s}function rA(i,s,a){rs[os++]=En,rs[os++]=wn,rs[os++]=Fr,Fr=i;var l=En;i=wn;var f=32-Hi(l)-1;l&=~(1<<f),a+=1;var v=32-Hi(s)+f;if(30<v){var A=f-f%5;v=(l&(1<<A)-1).toString(32),l>>=A,f-=A,En=1<<32-Hi(s)+f|a<<f|l,wn=v+i}else En=1<<v|a<<f|l,wn=i}function fm(i){i.return!==null&&(zr(i,1),rA(i,1,0))}function pm(i){for(;i===_f;)_f=Cl[--xl],Cl[xl]=null,Ef=Cl[--xl],Cl[xl]=null;for(;i===Fr;)Fr=rs[--os],rs[os]=null,wn=rs[--os],rs[os]=null,En=rs[--os],rs[os]=null}var mi=null,Qe=null,Gt=!1,Rs=null,Ks=!1,gm=Error(n(519));function Hr(i){var s=Error(n(418,""));throw Ru(as(s,i)),gm}function oA(i){var s=i.stateNode,a=i.type,l=i.memoizedProps;switch(s[si]=i,s[Ti]=l,a){case"dialog":Bt("cancel",s),Bt("close",s);break;case"iframe":case"object":case"embed":Bt("load",s);break;case"video":case"audio":for(a=0;a<Zu.length;a++)Bt(Zu[a],s);break;case"source":Bt("error",s);break;case"img":case"image":case"link":Bt("error",s),Bt("load",s);break;case"details":Bt("toggle",s);break;case"input":Bt("invalid",s),_b(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),uf(s);break;case"select":Bt("invalid",s);break;case"textarea":Bt("invalid",s),wb(s,l.value,l.defaultValue,l.children),uf(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||m_(s.textContent,a)?(l.popover!=null&&(Bt("beforetoggle",s),Bt("toggle",s)),l.onScroll!=null&&Bt("scroll",s),l.onScrollEnd!=null&&Bt("scrollend",s),l.onClick!=null&&(s.onclick=ep),s=!0):s=!1,s||Hr(i)}function lA(i){for(mi=i.return;mi;)switch(mi.tag){case 3:case 27:Ks=!0;return;case 5:case 13:Ks=!1;return;default:mi=mi.return}}function Cu(i){if(i!==mi)return!1;if(!Gt)return lA(i),Gt=!0,!1;var s=!1,a;if((a=i.tag!==3&&i.tag!==27)&&((a=i.tag===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Pv(i.type,i.memoizedProps)),a=!a),a&&(s=!0),s&&Qe&&Hr(i),lA(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){Qe=Ls(i.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}Qe=null}}else Qe=mi?Ls(i.stateNode.nextSibling):null;return!0}function xu(){Qe=mi=null,Gt=!1}function Ru(i){Rs===null?Rs=[i]:Rs.push(i)}var Mu=Error(n(460)),cA=Error(n(474)),mm={then:function(){}};function uA(i){return i=i.status,i==="fulfilled"||i==="rejected"}function wf(){}function hA(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(wf,wf),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===Mu?Error(n(483)):i;default:if(typeof s.status=="string")s.then(wf,wf);else{if(i=ie,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,i===Mu?Error(n(483)):i}throw Lu=s,Mu}}var Lu=null;function dA(){if(Lu===null)throw Error(n(459));var i=Lu;return Lu=null,i}var Rl=null,Du=0;function Tf(i){var s=Du;return Du+=1,Rl===null&&(Rl=[]),hA(Rl,i,s)}function Ou(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Cf(i,s){throw s.$$typeof===o?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function fA(i){var s=i._init;return s(i._payload)}function pA(i){function s(I,F){if(i){var j=I.deletions;j===null?(I.deletions=[F],I.flags|=16):j.push(F)}}function a(I,F){if(!i)return null;for(;F!==null;)s(I,F),F=F.sibling;return null}function l(I){for(var F=new Map;I!==null;)I.key!==null?F.set(I.key,I):F.set(I.index,I),I=I.sibling;return F}function f(I,F){return I=Ha(I,F),I.index=0,I.sibling=null,I}function v(I,F,j){return I.index=j,i?(j=I.alternate,j!==null?(j=j.index,j<F?(I.flags|=33554434,F):j):(I.flags|=33554434,F)):(I.flags|=1048576,F)}function A(I){return i&&I.alternate===null&&(I.flags|=33554434),I}function x(I,F,j,W){return F===null||F.tag!==6?(F=uv(j,I.mode,W),F.return=I,F):(F=f(F,j),F.return=I,F)}function L(I,F,j,W){var pt=j.type;return pt===p?Q(I,F,j.props.children,W,j.key):F!==null&&(F.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&fA(pt)===F.type)?(F=f(F,j.props),Ou(F,j),F.return=I,F):(F=Gf(j.type,j.key,j.props,null,I.mode,W),Ou(F,j),F.return=I,F)}function z(I,F,j,W){return F===null||F.tag!==4||F.stateNode.containerInfo!==j.containerInfo||F.stateNode.implementation!==j.implementation?(F=hv(j,I.mode,W),F.return=I,F):(F=f(F,j.children||[]),F.return=I,F)}function Q(I,F,j,W,pt){return F===null||F.tag!==7?(F=Kr(j,I.mode,W,pt),F.return=I,F):(F=f(F,j),F.return=I,F)}function tt(I,F,j){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=uv(""+F,I.mode,j),F.return=I,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case c:return j=Gf(F.type,F.key,F.props,null,I.mode,j),Ou(j,F),j.return=I,j;case h:return F=hv(F,I.mode,j),F.return=I,F;case N:var W=F._init;return F=W(F._payload),tt(I,F,j)}if(nt(F)||P(F))return F=Kr(F,I.mode,j,null),F.return=I,F;if(typeof F.then=="function")return tt(I,Tf(F),j);if(F.$$typeof===S)return tt(I,Uf(I,F),j);Cf(I,F)}return null}function q(I,F,j,W){var pt=F!==null?F.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return pt!==null?null:x(I,F,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case c:return j.key===pt?L(I,F,j,W):null;case h:return j.key===pt?z(I,F,j,W):null;case N:return pt=j._init,j=pt(j._payload),q(I,F,j,W)}if(nt(j)||P(j))return pt!==null?null:Q(I,F,j,W,null);if(typeof j.then=="function")return q(I,F,Tf(j),W);if(j.$$typeof===S)return q(I,F,Uf(I,j),W);Cf(I,j)}return null}function Y(I,F,j,W,pt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return I=I.get(j)||null,x(F,I,""+W,pt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case c:return I=I.get(W.key===null?j:W.key)||null,L(F,I,W,pt);case h:return I=I.get(W.key===null?j:W.key)||null,z(F,I,W,pt);case N:var Pt=W._init;return W=Pt(W._payload),Y(I,F,j,W,pt)}if(nt(W)||P(W))return I=I.get(j)||null,Q(F,I,W,pt,null);if(typeof W.then=="function")return Y(I,F,j,Tf(W),pt);if(W.$$typeof===S)return Y(I,F,j,Uf(F,W),pt);Cf(F,W)}return null}function vt(I,F,j,W){for(var pt=null,Pt=null,bt=F,_t=F=0,qe=null;bt!==null&&_t<j.length;_t++){bt.index>_t?(qe=bt,bt=null):qe=bt.sibling;var Vt=q(I,bt,j[_t],W);if(Vt===null){bt===null&&(bt=qe);break}i&&bt&&Vt.alternate===null&&s(I,bt),F=v(Vt,F,_t),Pt===null?pt=Vt:Pt.sibling=Vt,Pt=Vt,bt=qe}if(_t===j.length)return a(I,bt),Gt&&zr(I,_t),pt;if(bt===null){for(;_t<j.length;_t++)bt=tt(I,j[_t],W),bt!==null&&(F=v(bt,F,_t),Pt===null?pt=bt:Pt.sibling=bt,Pt=bt);return Gt&&zr(I,_t),pt}for(bt=l(bt);_t<j.length;_t++)qe=Y(bt,I,_t,j[_t],W),qe!==null&&(i&&qe.alternate!==null&&bt.delete(qe.key===null?_t:qe.key),F=v(qe,F,_t),Pt===null?pt=qe:Pt.sibling=qe,Pt=qe);return i&&bt.forEach(function(Va){return s(I,Va)}),Gt&&zr(I,_t),pt}function xt(I,F,j,W){if(j==null)throw Error(n(151));for(var pt=null,Pt=null,bt=F,_t=F=0,qe=null,Vt=j.next();bt!==null&&!Vt.done;_t++,Vt=j.next()){bt.index>_t?(qe=bt,bt=null):qe=bt.sibling;var Va=q(I,bt,Vt.value,W);if(Va===null){bt===null&&(bt=qe);break}i&&bt&&Va.alternate===null&&s(I,bt),F=v(Va,F,_t),Pt===null?pt=Va:Pt.sibling=Va,Pt=Va,bt=qe}if(Vt.done)return a(I,bt),Gt&&zr(I,_t),pt;if(bt===null){for(;!Vt.done;_t++,Vt=j.next())Vt=tt(I,Vt.value,W),Vt!==null&&(F=v(Vt,F,_t),Pt===null?pt=Vt:Pt.sibling=Vt,Pt=Vt);return Gt&&zr(I,_t),pt}for(bt=l(bt);!Vt.done;_t++,Vt=j.next())Vt=Y(bt,I,_t,Vt.value,W),Vt!==null&&(i&&Vt.alternate!==null&&bt.delete(Vt.key===null?_t:Vt.key),F=v(Vt,F,_t),Pt===null?pt=Vt:Pt.sibling=Vt,Pt=Vt);return i&&bt.forEach(function(Sx){return s(I,Sx)}),Gt&&zr(I,_t),pt}function ve(I,F,j,W){if(typeof j=="object"&&j!==null&&j.type===p&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case c:t:{for(var pt=j.key;F!==null;){if(F.key===pt){if(pt=j.type,pt===p){if(F.tag===7){a(I,F.sibling),W=f(F,j.props.children),W.return=I,I=W;break t}}else if(F.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&fA(pt)===F.type){a(I,F.sibling),W=f(F,j.props),Ou(W,j),W.return=I,I=W;break t}a(I,F);break}else s(I,F);F=F.sibling}j.type===p?(W=Kr(j.props.children,I.mode,W,j.key),W.return=I,I=W):(W=Gf(j.type,j.key,j.props,null,I.mode,W),Ou(W,j),W.return=I,I=W)}return A(I);case h:t:{for(pt=j.key;F!==null;){if(F.key===pt)if(F.tag===4&&F.stateNode.containerInfo===j.containerInfo&&F.stateNode.implementation===j.implementation){a(I,F.sibling),W=f(F,j.children||[]),W.return=I,I=W;break t}else{a(I,F);break}else s(I,F);F=F.sibling}W=hv(j,I.mode,W),W.return=I,I=W}return A(I);case N:return pt=j._init,j=pt(j._payload),ve(I,F,j,W)}if(nt(j))return vt(I,F,j,W);if(P(j)){if(pt=P(j),typeof pt!="function")throw Error(n(150));return j=pt.call(j),xt(I,F,j,W)}if(typeof j.then=="function")return ve(I,F,Tf(j),W);if(j.$$typeof===S)return ve(I,F,Uf(I,j),W);Cf(I,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,F!==null&&F.tag===6?(a(I,F.sibling),W=f(F,j),W.return=I,I=W):(a(I,F),W=uv(j,I.mode,W),W.return=I,I=W),A(I)):a(I,F)}return function(I,F,j,W){try{Du=0;var pt=ve(I,F,j,W);return Rl=null,pt}catch(bt){if(bt===Mu)throw bt;var Pt=hs(29,bt,null,I.mode);return Pt.lanes=W,Pt.return=I,Pt}finally{}}}var Br=pA(!0),gA=pA(!1),Ml=ft(null),xf=ft(0);function mA(i,s){i=Pn,Ut(xf,i),Ut(Ml,s),Pn=i|s.baseLanes}function vm(){Ut(xf,Pn),Ut(Ml,Ml.current)}function ym(){Pn=xf.current,wt(Ml),wt(xf)}var ls=ft(null),Qs=null;function xa(i){var s=i.alternate;Ut(De,De.current&1),Ut(ls,i),Qs===null&&(s===null||Ml.current!==null||s.memoizedState!==null)&&(Qs=i)}function vA(i){if(i.tag===22){if(Ut(De,De.current),Ut(ls,i),Qs===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Qs=i)}}else Ra()}function Ra(){Ut(De,De.current),Ut(ls,ls.current)}function Tn(i){wt(ls),Qs===i&&(Qs=null),wt(De)}var De=ft(0);function Rf(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lC=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,l){i.push(l)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},cC=d.unstable_scheduleCallback,uC=d.unstable_NormalPriority,Oe={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bm(){return{controller:new lC,data:new Map,refCount:0}}function Nu(i){i.refCount--,i.refCount===0&&cC(uC,function(){i.controller.abort()})}var ku=null,Am=0,Ll=0,Dl=null;function hC(i,s){if(ku===null){var a=ku=[];Am=0,Ll=Cv(),Dl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Am++,s.then(yA,yA),s}function yA(){if(--Am===0&&ku!==null){Dl!==null&&(Dl.status="fulfilled");var i=ku;ku=null,Ll=0,Dl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function dC(i,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var bA=O.S;O.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&hC(i,s),bA!==null&&bA(i,s)};var Ir=ft(null);function Sm(){var i=Ir.current;return i!==null?i:ie.pooledCache}function Mf(i,s){s===null?Ut(Ir,Ir.current):Ut(Ir,s.pool)}function AA(){var i=Sm();return i===null?null:{parent:Oe._currentValue,pool:i}}var Ma=0,Nt=null,Wt=null,Te=null,Lf=!1,Ol=!1,Ur=!1,Df=0,Pu=0,Nl=null,fC=0;function Se(){throw Error(n(321))}function _m(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Bi(i[a],s[a]))return!1;return!0}function Em(i,s,a,l,f,v){return Ma=v,Nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=i===null||i.memoizedState===null?jr:La,Ur=!1,v=a(l,f),Ur=!1,Ol&&(v=_A(s,a,l,f)),SA(i),v}function SA(i){O.H=$s;var s=Wt!==null&&Wt.next!==null;if(Ma=0,Te=Wt=Nt=null,Lf=!1,Pu=0,Nl=null,s)throw Error(n(300));i===null||Ue||(i=i.dependencies,i!==null&&If(i)&&(Ue=!0))}function _A(i,s,a,l){Nt=i;var f=0;do{if(Ol&&(Nl=null),Pu=0,Ol=!1,25<=f)throw Error(n(301));if(f+=1,Te=Wt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}O.H=qr,v=s(a,l)}while(Ol);return v}function pC(){var i=O.H,s=i.useState()[0];return s=typeof s.then=="function"?Fu(s):s,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(Nt.flags|=1024),s}function wm(){var i=Df!==0;return Df=0,i}function Tm(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function Cm(i){if(Lf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Lf=!1}Ma=0,Te=Wt=Nt=null,Ol=!1,Pu=Df=0,Nl=null}function xi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Nt.memoizedState=Te=i:Te=Te.next=i,Te}function Ce(){if(Wt===null){var i=Nt.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var s=Te===null?Nt.memoizedState:Te.next;if(s!==null)Te=s,Wt=i;else{if(i===null)throw Nt.alternate===null?Error(n(467)):Error(n(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Te===null?Nt.memoizedState=Te=i:Te=Te.next=i}return Te}var Of;Of=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Fu(i){var s=Pu;return Pu+=1,Nl===null&&(Nl=[]),i=hA(Nl,i,s),s=Nt,(Te===null?s.memoizedState:Te.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?jr:La),i}function Nf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Fu(i);if(i.$$typeof===S)return ni(i)}throw Error(n(438,String(i)))}function xm(i){var s=null,a=Nt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Nt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Of(),Nt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),l=0;l<i;l++)a[l]=B;return s.index++,a}function Cn(i,s){return typeof s=="function"?s(i):s}function kf(i){var s=Ce();return Rm(s,Wt,i)}function Rm(i,s,a){var l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var f=i.baseQueue,v=l.pending;if(v!==null){if(f!==null){var A=f.next;f.next=v.next,v.next=A}s.baseQueue=f=v,l.pending=null}if(v=i.baseState,f===null)i.memoizedState=v;else{s=f.next;var x=A=null,L=null,z=s,Q=!1;do{var tt=z.lane&-536870913;if(tt!==z.lane?(jt&tt)===tt:(Ma&tt)===tt){var q=z.revertLane;if(q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),tt===Ll&&(Q=!0);else if((Ma&q)===q){z=z.next,q===Ll&&(Q=!0);continue}else tt={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},L===null?(x=L=tt,A=v):L=L.next=tt,Nt.lanes|=q,Ba|=q;tt=z.action,Ur&&a(v,tt),v=z.hasEagerState?z.eagerState:a(v,tt)}else q={lane:tt,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},L===null?(x=L=q,A=v):L=L.next=q,Nt.lanes|=tt,Ba|=tt;z=z.next}while(z!==null&&z!==s);if(L===null?A=v:L.next=x,!Bi(v,i.memoizedState)&&(Ue=!0,Q&&(a=Dl,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=L,l.lastRenderedState=v}return f===null&&(l.lanes=0),[i.memoizedState,l.dispatch]}function Mm(i){var s=Ce(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=i;var l=a.dispatch,f=a.pending,v=s.memoizedState;if(f!==null){a.pending=null;var A=f=f.next;do v=i(v,A.action),A=A.next;while(A!==f);Bi(v,s.memoizedState)||(Ue=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,l]}function EA(i,s,a){var l=Nt,f=Ce(),v=Gt;if(v){if(a===void 0)throw Error(n(407));a=a()}else a=s();var A=!Bi((Wt||f).memoizedState,a);if(A&&(f.memoizedState=a,Ue=!0),f=f.queue,Om(CA.bind(null,l,f,i),[i]),f.getSnapshot!==s||A||Te!==null&&Te.memoizedState.tag&1){if(l.flags|=2048,kl(9,TA.bind(null,l,f,a,s),{destroy:void 0},null),ie===null)throw Error(n(349));v||(Ma&60)!==0||wA(l,s,a)}return a}function wA(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Nt.updateQueue,s===null?(s=Of(),Nt.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function TA(i,s,a,l){s.value=a,s.getSnapshot=l,xA(s)&&RA(i)}function CA(i,s,a){return a(function(){xA(s)&&RA(i)})}function xA(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Bi(i,a)}catch{return!0}}function RA(i){var s=Ca(i,2);s!==null&&vi(s,i,2)}function Lm(i){var s=xi();if(typeof i=="function"){var a=i;if(i=a(),Ur){Ea(!0);try{a()}finally{Ea(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:i},s}function MA(i,s,a,l){return i.baseState=a,Rm(i,Wt,typeof l=="function"?l:Cn)}function gC(i,s,a,l,f){if(zf(i))throw Error(n(485));if(i=s.action,i!==null){var v={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};O.T!==null?a(!0):v.isTransition=!1,l(v),a=s.pending,a===null?(v.next=s.pending=v,LA(s,v)):(v.next=a.next,s.pending=a.next=v)}}function LA(i,s){var a=s.action,l=s.payload,f=i.state;if(s.isTransition){var v=O.T,A={};O.T=A;try{var x=a(f,l),L=O.S;L!==null&&L(A,x),DA(i,s,x)}catch(z){Dm(i,s,z)}finally{O.T=v}}else try{v=a(f,l),DA(i,s,v)}catch(z){Dm(i,s,z)}}function DA(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){OA(i,s,l)},function(l){return Dm(i,s,l)}):OA(i,s,a)}function OA(i,s,a){s.status="fulfilled",s.value=a,NA(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,LA(i,a)))}function Dm(i,s,a){var l=i.pending;if(i.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,NA(s),s=s.next;while(s!==l)}i.action=null}function NA(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function kA(i,s){return s}function PA(i,s){if(Gt){var a=ie.formState;if(a!==null){t:{var l=Nt;if(Gt){if(Qe){e:{for(var f=Qe,v=Ks;f.nodeType!==8;){if(!v){f=null;break e}if(f=Ls(f.nextSibling),f===null){f=null;break e}}v=f.data,f=v==="F!"||v==="F"?f:null}if(f){Qe=Ls(f.nextSibling),l=f.data==="F!";break t}}Hr(l)}l=!1}l&&(s=a[0])}}return a=xi(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kA,lastRenderedState:s},a.queue=l,a=JA.bind(null,Nt,l),l.dispatch=a,l=Lm(!1),v=zm.bind(null,Nt,!1,l.queue),l=xi(),f={state:s,dispatch:null,action:i,pending:null},l.queue=f,a=gC.bind(null,Nt,f,v,a),f.dispatch=a,l.memoizedState=i,[s,a,!1]}function FA(i){var s=Ce();return zA(s,Wt,i)}function zA(i,s,a){s=Rm(i,s,kA)[0],i=kf(Cn)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Fu(s):s;var l=Ce(),f=l.queue,v=f.dispatch;return a!==l.memoizedState&&(Nt.flags|=2048,kl(9,mC.bind(null,f,a),{destroy:void 0},null)),[s,v,i]}function mC(i,s){i.action=s}function HA(i){var s=Ce(),a=Wt;if(a!==null)return zA(s,a,i);Ce(),s=s.memoizedState,a=Ce();var l=a.queue.dispatch;return a.memoizedState=i,[s,l,!1]}function kl(i,s,a,l){return i={tag:i,create:s,inst:a,deps:l,next:null},s=Nt.updateQueue,s===null&&(s=Of(),Nt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(l=a.next,a.next=i,i.next=l,s.lastEffect=i),i}function BA(){return Ce().memoizedState}function Pf(i,s,a,l){var f=xi();Nt.flags|=i,f.memoizedState=kl(1|s,a,{destroy:void 0},l===void 0?null:l)}function Ff(i,s,a,l){var f=Ce();l=l===void 0?null:l;var v=f.memoizedState.inst;Wt!==null&&l!==null&&_m(l,Wt.memoizedState.deps)?f.memoizedState=kl(s,a,v,l):(Nt.flags|=i,f.memoizedState=kl(1|s,a,v,l))}function IA(i,s){Pf(8390656,8,i,s)}function Om(i,s){Ff(2048,8,i,s)}function UA(i,s){return Ff(4,2,i,s)}function jA(i,s){return Ff(4,4,i,s)}function qA(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function GA(i,s,a){a=a!=null?a.concat([i]):null,Ff(4,4,qA.bind(null,s,i),a)}function Nm(){}function VA(i,s){var a=Ce();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&_m(s,l[1])?l[0]:(a.memoizedState=[i,s],i)}function XA(i,s){var a=Ce();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&_m(s,l[1]))return l[0];if(l=i(),Ur){Ea(!0);try{i()}finally{Ea(!1)}}return a.memoizedState=[l,s],l}function km(i,s,a){return a===void 0||(Ma&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=KS(),Nt.lanes|=i,Ba|=i,a)}function YA(i,s,a,l){return Bi(a,s)?a:Ml.current!==null?(i=km(i,a,l),Bi(i,s)||(Ue=!0),i):(Ma&42)===0?(Ue=!0,i.memoizedState=a):(i=KS(),Nt.lanes|=i,Ba|=i,s)}function KA(i,s,a,l,f){var v=st.p;st.p=v!==0&&8>v?v:8;var A=O.T,x={};O.T=x,zm(i,!1,s,a);try{var L=f(),z=O.S;if(z!==null&&z(x,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var Q=dC(L,l);zu(i,s,Q,qi(i))}else zu(i,s,l,qi(i))}catch(tt){zu(i,s,{then:function(){},status:"rejected",reason:tt},qi())}finally{st.p=v,O.T=A}}function vC(){}function Pm(i,s,a,l){if(i.tag!==5)throw Error(n(476));var f=QA(i).queue;KA(i,f,s,gt,a===null?vC:function(){return $A(i),a(l)})}function QA(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:gt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function $A(i){var s=QA(i).next.queue;zu(i,s,{},qi())}function Fm(){return ni(sh)}function WA(){return Ce().memoizedState}function ZA(){return Ce().memoizedState}function yC(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=qi();i=Na(a);var l=ka(s,i,a);l!==null&&(vi(l,s,a),Iu(l,s,a)),s={cache:bm()},i.payload=s;return}s=s.return}}function bC(i,s,a){var l=qi();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zf(i)?tS(s,a):(a=dm(i,s,a,l),a!==null&&(vi(a,i,l),eS(a,s,l)))}function JA(i,s,a){var l=qi();zu(i,s,a,l)}function zu(i,s,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zf(i))tS(s,f);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,x=v(A,a);if(f.hasEagerState=!0,f.eagerState=x,Bi(x,A))return Af(i,s,f,0),ie===null&&bf(),!1}catch{}finally{}if(a=dm(i,s,f,l),a!==null)return vi(a,i,l),eS(a,s,l),!0}return!1}function zm(i,s,a,l){if(l={lane:2,revertLane:Cv(),action:l,hasEagerState:!1,eagerState:null,next:null},zf(i)){if(s)throw Error(n(479))}else s=dm(i,a,l,2),s!==null&&vi(s,i,2)}function zf(i){var s=i.alternate;return i===Nt||s!==null&&s===Nt}function tS(i,s){Ol=Lf=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function eS(i,s,a){if((a&4194176)!==0){var l=s.lanes;l&=i.pendingLanes,a|=l,s.lanes=a,db(i,a)}}var $s={readContext:ni,use:Nf,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se};$s.useCacheRefresh=Se,$s.useMemoCache=Se,$s.useHostTransitionStatus=Se,$s.useFormState=Se,$s.useActionState=Se,$s.useOptimistic=Se;var jr={readContext:ni,use:Nf,useCallback:function(i,s){return xi().memoizedState=[i,s===void 0?null:s],i},useContext:ni,useEffect:IA,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Pf(4194308,4,qA.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Pf(4194308,4,i,s)},useInsertionEffect:function(i,s){Pf(4,2,i,s)},useMemo:function(i,s){var a=xi();s=s===void 0?null:s;var l=i();if(Ur){Ea(!0);try{i()}finally{Ea(!1)}}return a.memoizedState=[l,s],l},useReducer:function(i,s,a){var l=xi();if(a!==void 0){var f=a(s);if(Ur){Ea(!0);try{a(s)}finally{Ea(!1)}}}else f=s;return l.memoizedState=l.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},l.queue=i,i=i.dispatch=bC.bind(null,Nt,i),[l.memoizedState,i]},useRef:function(i){var s=xi();return i={current:i},s.memoizedState=i},useState:function(i){i=Lm(i);var s=i.queue,a=JA.bind(null,Nt,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Nm,useDeferredValue:function(i,s){var a=xi();return km(a,i,s)},useTransition:function(){var i=Lm(!1);return i=KA.bind(null,Nt,i.queue,!0,!1),xi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var l=Nt,f=xi();if(Gt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),ie===null)throw Error(n(349));(jt&60)!==0||wA(l,s,a)}f.memoizedState=a;var v={value:a,getSnapshot:s};return f.queue=v,IA(CA.bind(null,l,v,i),[i]),l.flags|=2048,kl(9,TA.bind(null,l,v,a,s),{destroy:void 0},null),a},useId:function(){var i=xi(),s=ie.identifierPrefix;if(Gt){var a=wn,l=En;a=(l&~(1<<32-Hi(l)-1)).toString(32)+a,s=":"+s+"R"+a,a=Df++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=fC++,s=":"+s+"r"+a.toString(32)+":";return i.memoizedState=s},useCacheRefresh:function(){return xi().memoizedState=yC.bind(null,Nt)}};jr.useMemoCache=xm,jr.useHostTransitionStatus=Fm,jr.useFormState=PA,jr.useActionState=PA,jr.useOptimistic=function(i){var s=xi();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=zm.bind(null,Nt,!0,a),a.dispatch=s,[i,s]};var La={readContext:ni,use:Nf,useCallback:VA,useContext:ni,useEffect:Om,useImperativeHandle:GA,useInsertionEffect:UA,useLayoutEffect:jA,useMemo:XA,useReducer:kf,useRef:BA,useState:function(){return kf(Cn)},useDebugValue:Nm,useDeferredValue:function(i,s){var a=Ce();return YA(a,Wt.memoizedState,i,s)},useTransition:function(){var i=kf(Cn)[0],s=Ce().memoizedState;return[typeof i=="boolean"?i:Fu(i),s]},useSyncExternalStore:EA,useId:WA};La.useCacheRefresh=ZA,La.useMemoCache=xm,La.useHostTransitionStatus=Fm,La.useFormState=FA,La.useActionState=FA,La.useOptimistic=function(i,s){var a=Ce();return MA(a,Wt,i,s)};var qr={readContext:ni,use:Nf,useCallback:VA,useContext:ni,useEffect:Om,useImperativeHandle:GA,useInsertionEffect:UA,useLayoutEffect:jA,useMemo:XA,useReducer:Mm,useRef:BA,useState:function(){return Mm(Cn)},useDebugValue:Nm,useDeferredValue:function(i,s){var a=Ce();return Wt===null?km(a,i,s):YA(a,Wt.memoizedState,i,s)},useTransition:function(){var i=Mm(Cn)[0],s=Ce().memoizedState;return[typeof i=="boolean"?i:Fu(i),s]},useSyncExternalStore:EA,useId:WA};qr.useCacheRefresh=ZA,qr.useMemoCache=xm,qr.useHostTransitionStatus=Fm,qr.useFormState=HA,qr.useActionState=HA,qr.useOptimistic=function(i,s){var a=Ce();return Wt!==null?MA(a,Wt,i,s):(a.baseState=i,[i,a.queue.dispatch])};function Hm(i,s,a,l){s=i.memoizedState,a=a(l,s),a=a==null?s:K({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Bm={isMounted:function(i){return(i=i._reactInternals)?J(i)===i:!1},enqueueSetState:function(i,s,a){i=i._reactInternals;var l=qi(),f=Na(l);f.payload=s,a!=null&&(f.callback=a),s=ka(i,f,l),s!==null&&(vi(s,i,l),Iu(s,i,l))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var l=qi(),f=Na(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ka(i,f,l),s!==null&&(vi(s,i,l),Iu(s,i,l))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=qi(),l=Na(a);l.tag=2,s!=null&&(l.callback=s),s=ka(i,l,a),s!==null&&(vi(s,i,a),Iu(s,i,a))}};function iS(i,s,a,l,f,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(l,v,A):s.prototype&&s.prototype.isPureReactComponent?!wu(a,l)||!wu(f,v):!0}function sS(i,s,a,l){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==i&&Bm.enqueueReplaceState(s,s.state,null)}function Gr(i,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(i=i.defaultProps){a===s&&(a=K({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var Hf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function nS(i){Hf(i)}function aS(i){console.error(i)}function rS(i){Hf(i)}function Bf(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function oS(i,s,a){try{var l=i.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Im(i,s,a){return a=Na(a),a.tag=3,a.payload={element:null},a.callback=function(){Bf(i,s)},a}function lS(i){return i=Na(i),i.tag=3,i}function cS(i,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var v=l.value;i.payload=function(){return f(v)},i.callback=function(){oS(s,a,l)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){oS(s,a,l),typeof f!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function AC(i,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Bu(s,a,f,!0),a=ls.current,a!==null){switch(a.tag){case 13:return Qs===null?Sv():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===mm?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Ev(i,l,f)),!1;case 22:return a.flags|=65536,l===mm?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Ev(i,l,f)),!1}throw Error(n(435,a.tag))}return Ev(i,l,f),Sv(),!1}if(Gt)return s=ls.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==gm&&(i=Error(n(422),{cause:l}),Ru(as(i,a)))):(l!==gm&&(s=Error(n(423),{cause:l}),Ru(as(s,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,l=as(l,a),f=Im(i.stateNode,l,f),ev(i,f),me!==4&&(me=2)),!1;var v=Error(n(520),{cause:l});if(v=as(v,a),Ku===null?Ku=[v]:Ku.push(v),me!==4&&(me=2),s===null)return!0;l=as(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=Im(a.stateNode,l,i),ev(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ia===null||!Ia.has(v))))return a.flags|=65536,f&=-f,a.lanes|=f,f=lS(f),cS(f,i,a,l),ev(a,f),!1}a=a.return}while(a!==null);return!1}var uS=Error(n(461)),Ue=!1;function $e(i,s,a,l){s.child=i===null?gA(s,null,a,l):Br(s,i.child,a,l)}function hS(i,s,a,l,f){a=a.render;var v=s.ref;if("ref"in l){var A={};for(var x in l)x!=="ref"&&(A[x]=l[x])}else A=l;return Xr(s),l=Em(i,s,a,A,v,f),x=wm(),i!==null&&!Ue?(Tm(i,s,f),xn(i,s,f)):(Gt&&x&&fm(s),s.flags|=1,$e(i,s,l,f),s.child)}function dS(i,s,a,l,f){if(i===null){var v=a.type;return typeof v=="function"&&!cv(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,fS(i,s,v,l,f)):(i=Gf(a.type,null,l,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!Qm(i,f)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:wu,a(A,l)&&i.ref===s.ref)return xn(i,s,f)}return s.flags|=1,i=Ha(v,l),i.ref=s.ref,i.return=s,s.child=i}function fS(i,s,a,l,f){if(i!==null){var v=i.memoizedProps;if(wu(v,l)&&i.ref===s.ref)if(Ue=!1,s.pendingProps=l=v,Qm(i,f))(i.flags&131072)!==0&&(Ue=!0);else return s.lanes=i.lanes,xn(i,s,f)}return Um(i,s,a,l,f)}function pS(i,s,a){var l=s.pendingProps,f=l.children,v=(s.stateNode._pendingVisibility&2)!==0,A=i!==null?i.memoizedState:null;if(Hu(i,s),l.mode==="hidden"||v){if((s.flags&128)!==0){if(l=A!==null?A.baseLanes|a:a,i!==null){for(f=s.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;s.childLanes=v&~l}else s.childLanes=0,s.child=null;return gS(i,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Mf(s,A!==null?A.cachePool:null),A!==null?mA(s,A):vm(),vA(s);else return s.lanes=s.childLanes=536870912,gS(i,s,A!==null?A.baseLanes|a:a,a)}else A!==null?(Mf(s,A.cachePool),mA(s,A),Ra(),s.memoizedState=null):(i!==null&&Mf(s,null),vm(),Ra());return $e(i,s,f,a),s.child}function gS(i,s,a,l){var f=Sm();return f=f===null?null:{parent:Oe._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},i!==null&&Mf(s,null),vm(),vA(s),i!==null&&Bu(i,s,l,!0),null}function Hu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(i===null||i.ref!==a)&&(s.flags|=2097664)}}function Um(i,s,a,l,f){return Xr(s),a=Em(i,s,a,l,void 0,f),l=wm(),i!==null&&!Ue?(Tm(i,s,f),xn(i,s,f)):(Gt&&l&&fm(s),s.flags|=1,$e(i,s,a,f),s.child)}function mS(i,s,a,l,f,v){return Xr(s),s.updateQueue=null,a=_A(s,l,a,f),SA(i),l=wm(),i!==null&&!Ue?(Tm(i,s,v),xn(i,s,v)):(Gt&&l&&fm(s),s.flags|=1,$e(i,s,a,v),s.child)}function vS(i,s,a,l,f){if(Xr(s),s.stateNode===null){var v=Tl,A=a.contextType;typeof A=="object"&&A!==null&&(v=ni(A)),v=new a(l,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Bm,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=l,v.state=s.memoizedState,v.refs={},Jm(s),A=a.contextType,v.context=typeof A=="object"&&A!==null?ni(A):Tl,v.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Hm(s,a,A,l),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Bm.enqueueReplaceState(v,v.state,null),ju(s,l,v,f),Uu(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(i===null){v=s.stateNode;var x=s.memoizedProps,L=Gr(a,x);v.props=L;var z=v.context,Q=a.contextType;A=Tl,typeof Q=="object"&&Q!==null&&(A=ni(Q));var tt=a.getDerivedStateFromProps;Q=typeof tt=="function"||typeof v.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,Q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x||z!==A)&&sS(s,v,l,A),Oa=!1;var q=s.memoizedState;v.state=q,ju(s,l,v,f),Uu(),z=s.memoizedState,x||q!==z||Oa?(typeof tt=="function"&&(Hm(s,a,tt,l),z=s.memoizedState),(L=Oa||iS(s,a,L,l,q,z,A))?(Q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=z),v.props=l,v.state=z,v.context=A,l=L):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{v=s.stateNode,tv(i,s),A=s.memoizedProps,Q=Gr(a,A),v.props=Q,tt=s.pendingProps,q=v.context,z=a.contextType,L=Tl,typeof z=="object"&&z!==null&&(L=ni(z)),x=a.getDerivedStateFromProps,(z=typeof x=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==tt||q!==L)&&sS(s,v,l,L),Oa=!1,q=s.memoizedState,v.state=q,ju(s,l,v,f),Uu();var Y=s.memoizedState;A!==tt||q!==Y||Oa||i!==null&&i.dependencies!==null&&If(i.dependencies)?(typeof x=="function"&&(Hm(s,a,x,l),Y=s.memoizedState),(Q=Oa||iS(s,a,Q,l,q,Y,L)||i!==null&&i.dependencies!==null&&If(i.dependencies))?(z||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(l,Y,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(l,Y,L)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),v.props=l,v.state=Y,v.context=L,l=Q):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),l=!1)}return v=l,Hu(i,s),l=(s.flags&128)!==0,v||l?(v=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&l?(s.child=Br(s,i.child,null,f),s.child=Br(s,null,a,f)):$e(i,s,a,f),s.memoizedState=v.state,i=s.child):i=xn(i,s,f),i}function yS(i,s,a,l){return xu(),s.flags|=256,$e(i,s,a,l),s.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function qm(i){return{baseLanes:i,cachePool:AA()}}function Gm(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=ds),i}function bS(i,s,a){var l=s.pendingProps,f=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(De.current&2)!==0),A&&(f=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Gt){if(f?xa(s):Ra(),Gt){var x=Qe,L;if(L=x){t:{for(L=x,x=Ks;L.nodeType!==8;){if(!x){x=null;break t}if(L=Ls(L.nextSibling),L===null){x=null;break t}}x=L}x!==null?(s.memoizedState={dehydrated:x,treeContext:Fr!==null?{id:En,overflow:wn}:null,retryLane:536870912},L=hs(18,null,null,0),L.stateNode=x,L.return=s,s.child=L,mi=s,Qe=null,L=!0):L=!1}L||Hr(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return x.data==="$!"?s.lanes=16:s.lanes=536870912,null;Tn(s)}return x=l.children,l=l.fallback,f?(Ra(),f=s.mode,x=Xm({mode:"hidden",children:x},f),l=Kr(l,f,a,null),x.return=s,l.return=s,x.sibling=l,s.child=x,f=s.child,f.memoizedState=qm(a),f.childLanes=Gm(i,A,a),s.memoizedState=jm,l):(xa(s),Vm(s,x))}if(L=i.memoizedState,L!==null&&(x=L.dehydrated,x!==null)){if(v)s.flags&256?(xa(s),s.flags&=-257,s=Ym(i,s,a)):s.memoizedState!==null?(Ra(),s.child=i.child,s.flags|=128,s=null):(Ra(),f=l.fallback,x=s.mode,l=Xm({mode:"visible",children:l.children},x),f=Kr(f,x,a,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,Br(s,i.child,null,a),l=s.child,l.memoizedState=qm(a),l.childLanes=Gm(i,A,a),s.memoizedState=jm,s=f);else if(xa(s),x.data==="$!"){if(A=x.nextSibling&&x.nextSibling.dataset,A)var z=A.dgst;A=z,l=Error(n(419)),l.stack="",l.digest=A,Ru({value:l,source:null,stack:null}),s=Ym(i,s,a)}else if(Ue||Bu(i,s,a,!1),A=(a&i.childLanes)!==0,Ue||A){if(A=ie,A!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(A.suspendedLanes|a))!==0?0:l,l!==0&&l!==L.retryLane)throw L.retryLane=l,Ca(i,l),vi(A,i,l),uS}x.data==="$?"||Sv(),s=Ym(i,s,a)}else x.data==="$?"?(s.flags|=128,s.child=i.child,s=PC.bind(null,i),x._reactRetry=s,s=null):(i=L.treeContext,Qe=Ls(x.nextSibling),mi=s,Gt=!0,Rs=null,Ks=!1,i!==null&&(rs[os++]=En,rs[os++]=wn,rs[os++]=Fr,En=i.id,wn=i.overflow,Fr=s),s=Vm(s,l.children),s.flags|=4096);return s}return f?(Ra(),f=l.fallback,x=s.mode,L=i.child,z=L.sibling,l=Ha(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&31457280,z!==null?f=Ha(z,f):(f=Kr(f,x,a,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,x=i.child.memoizedState,x===null?x=qm(a):(L=x.cachePool,L!==null?(z=Oe._currentValue,L=L.parent!==z?{parent:z,pool:z}:L):L=AA(),x={baseLanes:x.baseLanes|a,cachePool:L}),f.memoizedState=x,f.childLanes=Gm(i,A,a),s.memoizedState=jm,l):(xa(s),a=i.child,i=a.sibling,a=Ha(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Vm(i,s){return s=Xm({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Xm(i,s){return VS(i,s,0,null)}function Ym(i,s,a){return Br(s,i.child,null,a),i=Vm(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function AS(i,s,a){i.lanes|=s;var l=i.alternate;l!==null&&(l.lanes|=s),Wm(i.return,s,a)}function Km(i,s,a,l,f){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f)}function SS(i,s,a){var l=s.pendingProps,f=l.revealOrder,v=l.tail;if($e(i,s,l.children,a),l=De.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&AS(i,a,s);else if(i.tag===19)AS(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}l&=1}switch(Ut(De,l),f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&Rf(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Km(s,!1,f,a,v);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Rf(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Km(s,!0,a,null,v);break;case"together":Km(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function xn(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Ba|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Bu(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,a=Ha(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Ha(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Qm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&If(i)))}function SC(i,s,a){switch(s.tag){case 3:le(s,s.stateNode.containerInfo),Da(s,Oe,i.memoizedState.cache),xu();break;case 27:case 5:Ae(s);break;case 4:le(s,s.stateNode.containerInfo);break;case 10:Da(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(xa(s),s.flags|=128,null):(a&s.child.childLanes)!==0?bS(i,s,a):(xa(s),i=xn(i,s,a),i!==null?i.sibling:null);xa(s);break;case 19:var f=(i.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Bu(i,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return SS(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ut(De,De.current),l)break;return null;case 22:case 23:return s.lanes=0,pS(i,s,a);case 24:Da(s,Oe,i.memoizedState.cache)}return xn(i,s,a)}function _S(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ue=!0;else{if(!Qm(i,a)&&(s.flags&128)===0)return Ue=!1,SC(i,s,a);Ue=(i.flags&131072)!==0}else Ue=!1,Gt&&(s.flags&1048576)!==0&&rA(s,Ef,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")cv(l)?(i=Gr(l,i),s.tag=1,s=vS(null,s,l,i,a)):(s.tag=0,s=Um(null,s,l,i,a));else{if(l!=null){if(f=l.$$typeof,f===_){s.tag=11,s=hS(null,s,l,i,a);break t}else if(f===R){s.tag=14,s=dS(null,s,l,i,a);break t}}throw s=H(l)||l,Error(n(306,s,""))}}return s;case 0:return Um(i,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Gr(l,s.pendingProps),vS(i,s,l,f,a);case 3:t:{if(le(s,s.stateNode.containerInfo),i===null)throw Error(n(387));var v=s.pendingProps;f=s.memoizedState,l=f.element,tv(i,s),ju(s,v,null,a);var A=s.memoizedState;if(v=A.cache,Da(s,Oe,v),v!==f.cache&&Zm(s,[Oe],a,!0),Uu(),v=A.element,f.isDehydrated)if(f={element:v,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=yS(i,s,v,a);break t}else if(v!==l){l=as(Error(n(424)),s),Ru(l),s=yS(i,s,v,a);break t}else for(Qe=Ls(s.stateNode.containerInfo.firstChild),mi=s,Gt=!0,Rs=null,Ks=!0,a=gA(s,null,v,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xu(),v===l){s=xn(i,s,a);break t}$e(i,s,v,a)}s=s.child}return s;case 26:return Hu(i,s),i===null?(a=T_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Gt||(a=s.type,i=s.pendingProps,l=ip(pi.current).createElement(a),l[si]=s,l[Ti]=i,We(l,a,i),Ie(l),s.stateNode=l):s.memoizedState=T_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ae(s),i===null&&Gt&&(l=s.stateNode=__(s.type,s.pendingProps,pi.current),mi=s,Ks=!0,Qe=Ls(l.firstChild)),l=s.pendingProps.children,i!==null||Gt?$e(i,s,l,a):s.child=Br(s,null,l,a),Hu(i,s),s.child;case 5:return i===null&&Gt&&((f=l=Qe)&&(l=WC(l,s.type,s.pendingProps,Ks),l!==null?(s.stateNode=l,mi=s,Qe=Ls(l.firstChild),Ks=!1,f=!0):f=!1),f||Hr(s)),Ae(s),f=s.type,v=s.pendingProps,A=i!==null?i.memoizedProps:null,l=v.children,Pv(f,v)?l=null:A!==null&&Pv(f,A)&&(s.flags|=32),s.memoizedState!==null&&(f=Em(i,s,pC,null,null,a),sh._currentValue=f),Hu(i,s),$e(i,s,l,a),s.child;case 6:return i===null&&Gt&&((i=a=Qe)&&(a=ZC(a,s.pendingProps,Ks),a!==null?(s.stateNode=a,mi=s,Qe=null,i=!0):i=!1),i||Hr(s)),null;case 13:return bS(i,s,a);case 4:return le(s,s.stateNode.containerInfo),l=s.pendingProps,i===null?s.child=Br(s,null,l,a):$e(i,s,l,a),s.child;case 11:return hS(i,s,s.type,s.pendingProps,a);case 7:return $e(i,s,s.pendingProps,a),s.child;case 8:return $e(i,s,s.pendingProps.children,a),s.child;case 12:return $e(i,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Da(s,s.type,l.value),$e(i,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Xr(s),f=ni(f),l=l(f),s.flags|=1,$e(i,s,l,a),s.child;case 14:return dS(i,s,s.type,s.pendingProps,a);case 15:return fS(i,s,s.type,s.pendingProps,a);case 19:return SS(i,s,a);case 22:return pS(i,s,a);case 24:return Xr(s),l=ni(Oe),i===null?(f=Sm(),f===null&&(f=ie,v=bm(),f.pooledCache=v,v.refCount++,v!==null&&(f.pooledCacheLanes|=a),f=v),s.memoizedState={parent:l,cache:f},Jm(s),Da(s,Oe,f)):((i.lanes&a)!==0&&(tv(i,s),ju(s,null,null,a),Uu()),f=i.memoizedState,v=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Da(s,Oe,l)):(l=v.cache,Da(s,Oe,l),l!==f.cache&&Zm(s,[Oe],a,!0))),$e(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}var $m=ft(null),Vr=null,Rn=null;function Da(i,s,a){Ut($m,s._currentValue),s._currentValue=a}function Mn(i){i._currentValue=$m.current,wt($m)}function Wm(i,s,a){for(;i!==null;){var l=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),i===a)break;i=i.return}}function Zm(i,s,a,l){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var v=f.dependencies;if(v!==null){var A=f.child;v=v.firstContext;t:for(;v!==null;){var x=v;v=f;for(var L=0;L<s.length;L++)if(x.context===s[L]){v.lanes|=a,x=v.alternate,x!==null&&(x.lanes|=a),Wm(v.return,a,i),l||(A=null);break t}v=x.next}}else if(f.tag===18){if(A=f.return,A===null)throw Error(n(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Wm(A,a,i),A=null}else A=f.child;if(A!==null)A.return=f;else for(A=f;A!==null;){if(A===i){A=null;break}if(f=A.sibling,f!==null){f.return=A.return,A=f;break}A=A.return}f=A}}function Bu(i,s,a,l){i=null;for(var f=s,v=!1;f!==null;){if(!v){if((f.flags&524288)!==0)v=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var A=f.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var x=f.type;Bi(f.pendingProps.value,A.value)||(i!==null?i.push(x):i=[x])}}else if(f===gi.current){if(A=f.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(sh):i=[sh])}f=f.return}i!==null&&Zm(s,i,a,l),s.flags|=262144}function If(i){for(i=i.firstContext;i!==null;){if(!Bi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xr(i){Vr=i,Rn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ni(i){return ES(Vr,i)}function Uf(i,s){return Vr===null&&Xr(i),ES(i,s)}function ES(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Rn===null){if(i===null)throw Error(n(308));Rn=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Rn=Rn.next=s;return a}var Oa=!1;function Jm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tv(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Na(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ka(i,s,a){var l=i.updateQueue;if(l===null)return null;if(l=l.shared,(ue&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Sf(i),nA(i,null,a),s}return Af(i,l,s,a),Sf(i)}function Iu(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194176)!==0)){var l=s.lanes;l&=i.pendingLanes,a|=l,s.lanes=a,db(i,a)}}function ev(i,s){var a=i.updateQueue,l=i.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?f=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?f=v=s:v=v.next=s}else f=v=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:v,shared:l.shared,callbacks:l.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var iv=!1;function Uu(){if(iv){var i=Dl;if(i!==null)throw i}}function ju(i,s,a,l){iv=!1;var f=i.updateQueue;Oa=!1;var v=f.firstBaseUpdate,A=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var L=x,z=L.next;L.next=null,A===null?v=z:A.next=z,A=L;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,x=Q.lastBaseUpdate,x!==A&&(x===null?Q.firstBaseUpdate=z:x.next=z,Q.lastBaseUpdate=L))}if(v!==null){var tt=f.baseState;A=0,Q=z=L=null,x=v;do{var q=x.lane&-536870913,Y=q!==x.lane;if(Y?(jt&q)===q:(l&q)===q){q!==0&&q===Ll&&(iv=!0),Q!==null&&(Q=Q.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var vt=i,xt=x;q=s;var ve=a;switch(xt.tag){case 1:if(vt=xt.payload,typeof vt=="function"){tt=vt.call(ve,tt,q);break t}tt=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=xt.payload,q=typeof vt=="function"?vt.call(ve,tt,q):vt,q==null)break t;tt=K({},tt,q);break t;case 2:Oa=!0}}q=x.callback,q!==null&&(i.flags|=64,Y&&(i.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Q===null?(z=Q=Y,L=tt):Q=Q.next=Y,A|=q;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;Y=x,x=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Q===null&&(L=tt),f.baseState=L,f.firstBaseUpdate=z,f.lastBaseUpdate=Q,v===null&&(f.shared.lanes=0),Ba|=A,i.lanes=A,i.memoizedState=tt}}function wS(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function TS(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)wS(a[i],s)}function qu(i,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&i)===i){l=void 0;var v=a.create,A=a.inst;l=v(),A.destroy=l}a=a.next}while(a!==f)}}catch(x){ee(s,s.return,x)}}function Pa(i,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&i)===i){var A=l.inst,x=A.destroy;if(x!==void 0){A.destroy=void 0,f=s;var L=a;try{x()}catch(z){ee(f,L,z)}}}l=l.next}while(l!==v)}}catch(z){ee(s,s.return,z)}}function CS(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{TS(s,a)}catch(l){ee(i,i.return,l)}}}function xS(i,s,a){a.props=Gr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(l){ee(i,s,l)}}function Yr(i,s){try{var a=i.ref;if(a!==null){var l=i.stateNode;switch(i.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof a=="function"?i.refCleanup=a(f):a.current=f}}catch(v){ee(i,s,v)}}function Ii(i,s){var a=i.ref,l=i.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ee(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ee(i,s,f)}else a.current=null}function RS(i){var s=i.type,a=i.memoizedProps,l=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ee(i,i.return,f)}}function MS(i,s,a){try{var l=i.stateNode;XC(l,i.type,a,s),l[Ti]=s}catch(f){ee(i,i.return,f)}}function LS(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function sv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||LS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nv(i,s,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(i,s):a.insertBefore(i,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(i,a)):(s=a,s.appendChild(i)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ep));else if(l!==4&&l!==27&&(i=i.child,i!==null))for(nv(i,s,a),i=i.sibling;i!==null;)nv(i,s,a),i=i.sibling}function jf(i,s,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(l!==4&&l!==27&&(i=i.child,i!==null))for(jf(i,s,a),i=i.sibling;i!==null;)jf(i,s,a),i=i.sibling}var Ln=!1,ge=!1,av=!1,DS=typeof WeakSet=="function"?WeakSet:Set,je=null,OS=!1;function _C(i,s){if(i=i.containerInfo,Nv=lp,i=Qb(i),om(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,v=l.focusNode;l=l.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break t}var A=0,x=-1,L=-1,z=0,Q=0,tt=i,q=null;e:for(;;){for(var Y;tt!==a||f!==0&&tt.nodeType!==3||(x=A+f),tt!==v||l!==0&&tt.nodeType!==3||(L=A+l),tt.nodeType===3&&(A+=tt.nodeValue.length),(Y=tt.firstChild)!==null;)q=tt,tt=Y;for(;;){if(tt===i)break e;if(q===a&&++z===f&&(x=A),q===v&&++Q===l&&(L=A),(Y=tt.nextSibling)!==null)break;tt=q,q=tt.parentNode}tt=Y}a=x===-1||L===-1?null:{start:x,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(kv={focusedElem:i,selectionRange:a},lp=!1,je=s;je!==null;)if(s=je,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,je=i;else for(;je!==null;){switch(s=je,v=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,f=v.memoizedProps,v=v.memoizedState,l=a.stateNode;try{var vt=Gr(a.type,f,a.elementType===a.type);i=l.getSnapshotBeforeUpdate(vt,v),l.__reactInternalSnapshotBeforeUpdate=i}catch(xt){ee(a,a.return,xt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)Hv(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Hv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,je=i;break}je=s.return}return vt=OS,OS=!1,vt}function NS(i,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:On(i,a),l&4&&qu(5,a);break;case 1:if(On(i,a),l&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(x){ee(a,a.return,x)}else{var f=Gr(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(x){ee(a,a.return,x)}}l&64&&CS(a),l&512&&Yr(a,a.return);break;case 3:if(On(i,a),l&64&&(l=a.updateQueue,l!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{TS(l,i)}catch(x){ee(a,a.return,x)}}break;case 26:On(i,a),l&512&&Yr(a,a.return);break;case 27:case 5:On(i,a),s===null&&l&4&&RS(a),l&512&&Yr(a,a.return);break;case 12:On(i,a);break;case 13:On(i,a),l&4&&FS(i,a);break;case 22:if(f=a.memoizedState!==null||Ln,!f){s=s!==null&&s.memoizedState!==null||ge;var v=Ln,A=ge;Ln=f,(ge=s)&&!A?Fa(i,a,(a.subtreeFlags&8772)!==0):On(i,a),Ln=v,ge=A}l&512&&(a.memoizedProps.mode==="manual"?Yr(a,a.return):Ii(a,a.return));break;default:On(i,a)}}function kS(i){var s=i.alternate;s!==null&&(i.alternate=null,kS(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Vg(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xe=null,Ui=!1;function Dn(i,s,a){for(a=a.child;a!==null;)PS(i,s,a),a=a.sibling}function PS(i,s,a){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(du,a)}catch{}switch(a.tag){case 26:ge||Ii(a,s),Dn(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ge||Ii(a,s);var l=xe,f=Ui;for(xe=a.stateNode,Dn(i,s,a),a=a.stateNode,s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Vg(a),xe=l,Ui=f;break;case 5:ge||Ii(a,s);case 6:f=xe;var v=Ui;if(xe=null,Dn(i,s,a),xe=f,Ui=v,xe!==null)if(Ui)try{i=xe,l=a.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)}catch(A){ee(a,s,A)}else try{xe.removeChild(a.stateNode)}catch(A){ee(a,s,A)}break;case 18:xe!==null&&(Ui?(s=xe,a=a.stateNode,s.nodeType===8?zv(s.parentNode,a):s.nodeType===1&&zv(s,a),oh(s)):zv(xe,a.stateNode));break;case 4:l=xe,f=Ui,xe=a.stateNode.containerInfo,Ui=!0,Dn(i,s,a),xe=l,Ui=f;break;case 0:case 11:case 14:case 15:ge||Pa(2,a,s),ge||Pa(4,a,s),Dn(i,s,a);break;case 1:ge||(Ii(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xS(a,s,l)),Dn(i,s,a);break;case 21:Dn(i,s,a);break;case 22:ge||Ii(a,s),ge=(l=ge)||a.memoizedState!==null,Dn(i,s,a),ge=l;break;default:Dn(i,s,a)}}function FS(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{oh(i)}catch(a){ee(s,s.return,a)}}function EC(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new DS),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new DS),s;default:throw Error(n(435,i.tag))}}function rv(i,s){var a=EC(i);s.forEach(function(l){var f=FC.bind(null,i,l);a.has(l)||(a.add(l),l.then(f,f))})}function cs(i,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],v=i,A=s,x=A;t:for(;x!==null;){switch(x.tag){case 27:case 5:xe=x.stateNode,Ui=!1;break t;case 3:xe=x.stateNode.containerInfo,Ui=!0;break t;case 4:xe=x.stateNode.containerInfo,Ui=!0;break t}x=x.return}if(xe===null)throw Error(n(160));PS(v,A,f),xe=null,Ui=!1,v=f.alternate,v!==null&&(v.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)zS(s,i),s=s.sibling}var Ms=null;function zS(i,s){var a=i.alternate,l=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cs(s,i),us(i),l&4&&(Pa(3,i,i.return),qu(3,i),Pa(5,i,i.return));break;case 1:cs(s,i),us(i),l&512&&(ge||a===null||Ii(a,a.return)),l&64&&Ln&&(i=i.updateQueue,i!==null&&(l=i.callbacks,l!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Ms;if(cs(s,i),us(i),l&512&&(ge||a===null||Ii(a,a.return)),l&4){var v=a!==null?a.memoizedState:null;if(l=i.memoizedState,a===null)if(l===null)if(i.stateNode===null){t:{l=i.type,a=i.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":v=f.getElementsByTagName("title")[0],(!v||v[gu]||v[si]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=f.createElement(l),f.head.insertBefore(v,f.querySelector("head > title"))),We(v,l,a),v[si]=i,Ie(v),l=v;break t;case"link":var A=R_("link","href",f).get(l+(a.href||""));if(A){for(var x=0;x<A.length;x++)if(v=A[x],v.getAttribute("href")===(a.href==null?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(x,1);break e}}v=f.createElement(l),We(v,l,a),f.head.appendChild(v);break;case"meta":if(A=R_("meta","content",f).get(l+(a.content||""))){for(x=0;x<A.length;x++)if(v=A[x],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(x,1);break e}}v=f.createElement(l),We(v,l,a),f.head.appendChild(v);break;default:throw Error(n(468,l))}v[si]=i,Ie(v),l=v}i.stateNode=l}else M_(f,i.type,i.stateNode);else i.stateNode=x_(f,l,i.memoizedProps);else v!==l?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,l===null?M_(f,i.type,i.stateNode):x_(f,l,i.memoizedProps)):l===null&&i.stateNode!==null&&MS(i,i.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&i.alternate===null){f=i.stateNode,v=i.memoizedProps;try{for(var L=f.firstChild;L;){var z=L.nextSibling,Q=L.nodeName;L[gu]||Q==="HEAD"||Q==="BODY"||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&L.rel.toLowerCase()==="stylesheet"||f.removeChild(L),L=z}for(var tt=i.type,q=f.attributes;q.length;)f.removeAttributeNode(q[0]);We(f,tt,v),f[si]=i,f[Ti]=v}catch(vt){ee(i,i.return,vt)}}case 5:if(cs(s,i),us(i),l&512&&(ge||a===null||Ii(a,a.return)),i.flags&32){f=i.stateNode;try{yl(f,"")}catch(vt){ee(i,i.return,vt)}}l&4&&i.stateNode!=null&&(f=i.memoizedProps,MS(i,f,a!==null?a.memoizedProps:f)),l&1024&&(av=!0);break;case 6:if(cs(s,i),us(i),l&4){if(i.stateNode===null)throw Error(n(162));l=i.memoizedProps,a=i.stateNode;try{a.nodeValue=l}catch(vt){ee(i,i.return,vt)}}break;case 3:if(ap=null,f=Ms,Ms=sp(s.containerInfo),cs(s,i),Ms=f,us(i),l&4&&a!==null&&a.memoizedState.isDehydrated)try{oh(s.containerInfo)}catch(vt){ee(i,i.return,vt)}av&&(av=!1,HS(i));break;case 4:l=Ms,Ms=sp(i.stateNode.containerInfo),cs(s,i),us(i),Ms=l;break;case 12:cs(s,i),us(i);break;case 13:cs(s,i),us(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gv=Fi()),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,rv(i,l)));break;case 22:if(l&512&&(ge||a===null||Ii(a,a.return)),L=i.memoizedState!==null,z=a!==null&&a.memoizedState!==null,Q=Ln,tt=ge,Ln=Q||L,ge=tt||z,cs(s,i),ge=tt,Ln=Q,us(i),s=i.stateNode,s._current=i,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,l&8192&&(s._visibility=L?s._visibility&-2:s._visibility|1,L&&(s=Ln||ge,a===null||z||s||Pl(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))t:for(a=null,s=i;;){if(s.tag===5||s.tag===26||s.tag===27){if(a===null){z=a=s;try{if(f=z.stateNode,L)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=z.stateNode,x=z.memoizedProps.style;var Y=x!=null&&x.hasOwnProperty("display")?x.display:null;A.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(vt){ee(z,z.return,vt)}}}else if(s.tag===6){if(a===null){z=s;try{z.stateNode.nodeValue=L?"":z.memoizedProps}catch(vt){ee(z,z.return,vt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=i.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,rv(i,a))));break;case 19:cs(s,i),us(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,rv(i,l)));break;case 21:break;default:cs(s,i),us(i)}}function us(i){var s=i.flags;if(s&2){try{if(i.tag!==27){t:{for(var a=i.return;a!==null;){if(LS(a)){var l=a;break t}a=a.return}throw Error(n(160))}switch(l.tag){case 27:var f=l.stateNode,v=sv(i);jf(i,v,f);break;case 5:var A=l.stateNode;l.flags&32&&(yl(A,""),l.flags&=-33);var x=sv(i);jf(i,x,A);break;case 3:case 4:var L=l.stateNode.containerInfo,z=sv(i);nv(i,z,L);break;default:throw Error(n(161))}}}catch(Q){ee(i,i.return,Q)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function HS(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;HS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function On(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)NS(i,s.alternate,s),s=s.sibling}function Pl(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Pa(4,s,s.return),Pl(s);break;case 1:Ii(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&xS(s,s.return,a),Pl(s);break;case 26:case 27:case 5:Ii(s,s.return),Pl(s);break;case 22:Ii(s,s.return),s.memoizedState===null&&Pl(s);break;default:Pl(s)}i=i.sibling}}function Fa(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=i,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:Fa(f,v,a),qu(4,v);break;case 1:if(Fa(f,v,a),l=v,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){ee(l,l.return,z)}if(l=v,f=l.updateQueue,f!==null){var x=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)wS(L[f],x)}catch(z){ee(l,l.return,z)}}a&&A&64&&CS(v),Yr(v,v.return);break;case 26:case 27:case 5:Fa(f,v,a),a&&l===null&&A&4&&RS(v),Yr(v,v.return);break;case 12:Fa(f,v,a);break;case 13:Fa(f,v,a),a&&A&4&&FS(f,v);break;case 22:v.memoizedState===null&&Fa(f,v,a),Yr(v,v.return);break;default:Fa(f,v,a)}s=s.sibling}}function ov(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Nu(a))}function lv(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Nu(i))}function za(i,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)BS(i,s,a,l),s=s.sibling}function BS(i,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:za(i,s,a,l),f&2048&&qu(9,s);break;case 3:za(i,s,a,l),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Nu(i)));break;case 12:if(f&2048){za(i,s,a,l),i=s.stateNode;try{var v=s.memoizedProps,A=v.id,x=v.onPostCommit;typeof x=="function"&&x(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){ee(s,s.return,L)}}else za(i,s,a,l);break;case 23:break;case 22:v=s.stateNode,s.memoizedState!==null?v._visibility&4?za(i,s,a,l):Gu(i,s):v._visibility&4?za(i,s,a,l):(v._visibility|=4,Fl(i,s,a,l,(s.subtreeFlags&10256)!==0)),f&2048&&ov(s.alternate,s);break;case 24:za(i,s,a,l),f&2048&&lv(s.alternate,s);break;default:za(i,s,a,l)}}function Fl(i,s,a,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=i,A=s,x=a,L=l,z=A.flags;switch(A.tag){case 0:case 11:case 15:Fl(v,A,x,L,f),qu(8,A);break;case 23:break;case 22:var Q=A.stateNode;A.memoizedState!==null?Q._visibility&4?Fl(v,A,x,L,f):Gu(v,A):(Q._visibility|=4,Fl(v,A,x,L,f)),f&&z&2048&&ov(A.alternate,A);break;case 24:Fl(v,A,x,L,f),f&&z&2048&&lv(A.alternate,A);break;default:Fl(v,A,x,L,f)}s=s.sibling}}function Gu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,l=s,f=l.flags;switch(l.tag){case 22:Gu(a,l),f&2048&&ov(l.alternate,l);break;case 24:Gu(a,l),f&2048&&lv(l.alternate,l);break;default:Gu(a,l)}s=s.sibling}}var Vu=8192;function zl(i){if(i.subtreeFlags&Vu)for(i=i.child;i!==null;)IS(i),i=i.sibling}function IS(i){switch(i.tag){case 26:zl(i),i.flags&Vu&&i.memoizedState!==null&&hx(Ms,i.memoizedState,i.memoizedProps);break;case 5:zl(i);break;case 3:case 4:var s=Ms;Ms=sp(i.stateNode.containerInfo),zl(i),Ms=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Vu,Vu=16777216,zl(i),Vu=s):zl(i));break;default:zl(i)}}function US(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Xu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];je=l,qS(l,i)}US(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jS(i),i=i.sibling}function jS(i){switch(i.tag){case 0:case 11:case 15:Xu(i),i.flags&2048&&Pa(9,i,i.return);break;case 3:Xu(i);break;case 12:Xu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&4&&(i.return===null||i.return.tag!==13)?(s._visibility&=-5,qf(i)):Xu(i);break;default:Xu(i)}}function qf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];je=l,qS(l,i)}US(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Pa(8,s,s.return),qf(s);break;case 22:a=s.stateNode,a._visibility&4&&(a._visibility&=-5,qf(s));break;default:qf(s)}i=i.sibling}}function qS(i,s){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:Pa(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nu(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,je=l;else t:for(a=i;je!==null;){l=je;var f=l.sibling,v=l.return;if(kS(l),l===a){je=null;break t}if(f!==null){f.return=v,je=f;break t}je=v}}}function wC(i,s,a,l){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(i,s,a,l){return new wC(i,s,a,l)}function cv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ha(i,s){var a=i.alternate;return a===null?(a=hs(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&31457280,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function GS(i,s){i.flags&=31457282;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Gf(i,s,a,l,f,v){var A=0;if(l=i,typeof i=="function")cv(i)&&(A=1);else if(typeof i=="string")A=cx(i,a,we.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case p:return Kr(a.children,f,v,s);case g:A=8,f|=24;break;case m:return i=hs(12,a,s,f|2),i.elementType=m,i.lanes=v,i;case T:return i=hs(13,a,s,f),i.elementType=T,i.lanes=v,i;case M:return i=hs(19,a,s,f),i.elementType=M,i.lanes=v,i;case k:return VS(a,f,v,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case y:case S:A=10;break t;case b:A=9;break t;case _:A=11;break t;case R:A=14;break t;case N:A=16,l=null;break t}A=29,a=Error(n(130,i===null?"null":typeof i,"")),l=null}return s=hs(A,a,s,f),s.elementType=i,s.type=l,s.lanes=v,s}function Kr(i,s,a,l){return i=hs(7,i,l,s),i.lanes=a,i}function VS(i,s,a,l){i=hs(22,i,l,s),i.elementType=k,i.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=f._current;if(v===null)throw Error(n(456));if((f._pendingVisibility&2)===0){var A=Ca(v,2);A!==null&&(f._pendingVisibility|=2,vi(A,v,2))}},attach:function(){var v=f._current;if(v===null)throw Error(n(456));if((f._pendingVisibility&2)!==0){var A=Ca(v,2);A!==null&&(f._pendingVisibility&=-3,vi(A,v,2))}}};return i.stateNode=f,i}function uv(i,s,a){return i=hs(6,i,null,s),i.lanes=a,i}function hv(i,s,a){return s=hs(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Nn(i){i.flags|=4}function XS(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!L_(s)){if(s=ls.current,s!==null&&((jt&4194176)===jt?Qs!==null:(jt&62914560)!==jt&&(jt&536870912)===0||s!==Qs))throw Lu=mm,cA;i.flags|=8192}}function Vf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?ub():536870912,i.lanes|=s,Bl|=s)}function Yu(i,s){if(!Gt)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:l.sibling=null}}function ce(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,l=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=l,i.childLanes=a,s}function TC(i,s,a){var l=s.pendingProps;switch(pm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(s),null;case 1:return ce(s),null;case 3:return a=s.stateNode,l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Mn(Oe),be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Cu(s)?Nn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rs!==null&&(bv(Rs),Rs=null))),ce(s),null;case 26:return a=s.memoizedState,i===null?(Nn(s),a!==null?(ce(s),XS(s,a)):(ce(s),s.flags&=-16777217)):a?a!==i.memoizedState?(Nn(s),ce(s),XS(s,a)):(ce(s),s.flags&=-16777217):(i.memoizedProps!==l&&Nn(s),ce(s),s.flags&=-16777217),null;case 27:Cs(s),a=pi.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==l&&Nn(s);else{if(!l){if(s.stateNode===null)throw Error(n(166));return ce(s),null}i=we.current,Cu(s)?oA(s):(i=__(f,l,a),s.stateNode=i,Nn(s))}return ce(s),null;case 5:if(Cs(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==l&&Nn(s);else{if(!l){if(s.stateNode===null)throw Error(n(166));return ce(s),null}if(i=we.current,Cu(s))oA(s);else{switch(f=ip(pi.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}i[si]=s,i[Ti]=l;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(We(i,a,l),a){case"button":case"input":case"select":case"textarea":i=!!l.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Nn(s)}}return ce(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==l&&Nn(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(n(166));if(i=pi.current,Cu(s)){if(i=s.stateNode,a=s.memoizedProps,l=null,f=mi,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}i[si]=s,i=!!(i.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||m_(i.nodeValue,a)),i||Hr(s)}else i=ip(i).createTextNode(l),i[si]=s,s.stateNode=i}return ce(s),null;case 13:if(l=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Cu(s),l!==null&&l.dehydrated!==null){if(i===null){if(!f)throw Error(n(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[si]=s}else xu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ce(s),f=!1}else Rs!==null&&(bv(Rs),Rs=null),f=!0;if(!f)return s.flags&256?(Tn(s),s):(Tn(s),null)}if(Tn(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,i=i!==null&&i.memoizedState!==null,a){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var v=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==f&&(l.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),Vf(s,s.updateQueue),ce(s),null;case 4:return be(),i===null&&Lv(s.stateNode.containerInfo),ce(s),null;case 10:return Mn(s.type),ce(s),null;case 19:if(wt(De),f=s.memoizedState,f===null)return ce(s),null;if(l=(s.flags&128)!==0,v=f.rendering,v===null)if(l)Yu(f,!1);else{if(me!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Rf(i),v!==null){for(s.flags|=128,Yu(f,!1),i=v.updateQueue,s.updateQueue=i,Vf(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)GS(a,i),a=a.sibling;return Ut(De,De.current&1|2),s.child}i=i.sibling}f.tail!==null&&Fi()>Xf&&(s.flags|=128,l=!0,Yu(f,!1),s.lanes=4194304)}else{if(!l)if(i=Rf(v),i!==null){if(s.flags|=128,l=!0,i=i.updateQueue,s.updateQueue=i,Vf(s,i),Yu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!Gt)return ce(s),null}else 2*Fi()-f.renderingStartTime>Xf&&a!==536870912&&(s.flags|=128,l=!0,Yu(f,!1),s.lanes=4194304);f.isBackwards?(v.sibling=s.child,s.child=v):(i=f.last,i!==null?i.sibling=v:s.child=v,f.last=v)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Fi(),s.sibling=null,i=De.current,Ut(De,l?i&1|2:i&1),s):(ce(s),null);case 22:case 23:return Tn(s),ym(),l=s.memoizedState!==null,i!==null?i.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ce(s),s.subtreeFlags&6&&(s.flags|=8192)):ce(s),a=s.updateQueue,a!==null&&Vf(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),i!==null&&wt(Ir),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Mn(Oe),ce(s),null;case 25:return null}throw Error(n(156,s.tag))}function CC(i,s){switch(pm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Mn(Oe),be(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Cs(s),null;case 13:if(Tn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));xu()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return wt(De),null;case 4:return be(),null;case 10:return Mn(s.type),null;case 22:case 23:return Tn(s),ym(),i!==null&&wt(Ir),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Mn(Oe),null;case 25:return null;default:return null}}function YS(i,s){switch(pm(s),s.tag){case 3:Mn(Oe),be();break;case 26:case 27:case 5:Cs(s);break;case 4:be();break;case 13:Tn(s);break;case 19:wt(De);break;case 10:Mn(s.type);break;case 22:case 23:Tn(s),ym(),i!==null&&wt(Ir);break;case 24:Mn(Oe)}}var xC={getCacheForType:function(i){var s=ni(Oe),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},RC=typeof WeakMap=="function"?WeakMap:Map,ue=0,ie=null,zt=null,jt=0,se=0,ji=null,kn=!1,Hl=!1,dv=!1,Pn=0,me=0,Ba=0,Qr=0,fv=0,ds=0,Bl=0,Ku=null,Ws=null,pv=!1,gv=0,Xf=1/0,Yf=null,Ia=null,Kf=!1,$r=null,Qu=0,mv=0,vv=null,$u=0,yv=null;function qi(){if((ue&2)!==0&&jt!==0)return jt&-jt;if(O.T!==null){var i=Ll;return i!==0?i:Cv()}return pb()}function KS(){ds===0&&(ds=(jt&536870912)===0||Gt?cb():536870912);var i=ls.current;return i!==null&&(i.flags|=32),ds}function vi(i,s,a){(i===ie&&se===2||i.cancelPendingCommit!==null)&&(Il(i,0),Fn(i,jt,ds,!1)),pu(i,a),((ue&2)===0||i!==ie)&&(i===ie&&((ue&2)===0&&(Qr|=a),me===4&&Fn(i,jt,ds,!1)),Zs(i))}function QS(i,s,a){if((ue&6)!==0)throw Error(n(327));var l=!a&&(s&60)===0&&(s&i.expiredLanes)===0||fu(i,s),f=l?DC(i,s):_v(i,s,!0),v=l;do{if(f===0){Hl&&!l&&Fn(i,s,0,!1);break}else if(f===6)Fn(i,s,0,!kn);else{if(a=i.current.alternate,v&&!MC(a)){f=_v(i,s,!1),v=!1;continue}if(f===2){if(v=s,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;t:{var x=i;f=Ku;var L=x.current.memoizedState.isDehydrated;if(L&&(Il(x,A).flags|=256),A=_v(x,A,!1),A!==2){if(dv&&!L){x.errorRecoveryDisabledLanes|=v,Qr|=v,f=4;break t}v=Ws,Ws=f,v!==null&&bv(v)}f=A}if(v=!1,f!==2)continue}}if(f===1){Il(i,0),Fn(i,s,0,!0);break}t:{switch(l=i,f){case 0:case 1:throw Error(n(345));case 4:if((s&4194176)===s){Fn(l,s,ds,!kn);break t}break;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(n(329))}if(l.finishedWork=a,l.finishedLanes=s,(s&62914560)===s&&(v=gv+300-Fi(),10<v)){if(Fn(l,s,ds,!kn),of(l,0)!==0)break t;l.timeoutHandle=b_($S.bind(null,l,a,Ws,Yf,pv,s,ds,Qr,Bl,kn,2,-0,0),v);break t}$S(l,a,Ws,Yf,pv,s,ds,Qr,Bl,kn,0,-0,0)}}break}while(!0);Zs(i)}function bv(i){Ws===null?Ws=i:Ws.push.apply(Ws,i)}function $S(i,s,a,l,f,v,A,x,L,z,Q,tt,q){var Y=s.subtreeFlags;if((Y&8192||(Y&16785408)===16785408)&&(ih={stylesheets:null,count:0,unsuspend:ux},IS(s),s=dx(),s!==null)){i.cancelPendingCommit=s(s_.bind(null,i,a,l,f,A,x,L,1,tt,q)),Fn(i,v,A,!z);return}s_(i,a,l,f,A,x,L,Q,tt,q)}function MC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],v=f.getSnapshot;f=f.value;try{if(!Bi(v(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fn(i,s,a,l){s&=~fv,s&=~Qr,i.suspendedLanes|=s,i.pingedLanes&=~s,l&&(i.warmLanes|=s),l=i.expirationTimes;for(var f=s;0<f;){var v=31-Hi(f),A=1<<v;l[v]=-1,f&=~A}a!==0&&hb(i,a,s)}function Qf(){return(ue&6)===0?(Wu(0),!1):!0}function Av(){if(zt!==null){if(se===0)var i=zt.return;else i=zt,Rn=Vr=null,Cm(i),Rl=null,Du=0,i=zt;for(;i!==null;)YS(i.alternate,i),i=i.return;zt=null}}function Il(i,s){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,KC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Av(),ie=i,zt=a=Ha(i.current,null),jt=s,se=0,ji=null,kn=!1,Hl=fu(i,s),dv=!1,Bl=ds=fv=Qr=Ba=me=0,Ws=Ku=null,pv=!1,(s&8)!==0&&(s|=s&32);var l=i.entangledLanes;if(l!==0)for(i=i.entanglements,l&=s;0<l;){var f=31-Hi(l),v=1<<f;s|=i[f],l&=~v}return Pn=s,bf(),a}function WS(i,s){Nt=null,O.H=$s,s===Mu?(s=dA(),se=3):s===cA?(s=dA(),se=4):se=s===uS?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ji=s,zt===null&&(me=1,Bf(i,as(s,i.current)))}function ZS(){var i=O.H;return O.H=$s,i===null?$s:i}function JS(){var i=O.A;return O.A=xC,i}function Sv(){me=4,kn||(jt&4194176)!==jt&&ls.current!==null||(Hl=!0),(Ba&134217727)===0&&(Qr&134217727)===0||ie===null||Fn(ie,jt,ds,!1)}function _v(i,s,a){var l=ue;ue|=2;var f=ZS(),v=JS();(ie!==i||jt!==s)&&(Yf=null,Il(i,s)),s=!1;var A=me;t:do try{if(se!==0&&zt!==null){var x=zt,L=ji;switch(se){case 8:Av(),A=6;break t;case 3:case 2:case 6:ls.current===null&&(s=!0);var z=se;if(se=0,ji=null,Ul(i,x,L,z),a&&Hl){A=0;break t}break;default:z=se,se=0,ji=null,Ul(i,x,L,z)}}LC(),A=me;break}catch(Q){WS(i,Q)}while(!0);return s&&i.shellSuspendCounter++,Rn=Vr=null,ue=l,O.H=f,O.A=v,zt===null&&(ie=null,jt=0,bf()),A}function LC(){for(;zt!==null;)t_(zt)}function DC(i,s){var a=ue;ue|=2;var l=ZS(),f=JS();ie!==i||jt!==s?(Yf=null,Xf=Fi()+500,Il(i,s)):Hl=fu(i,s);t:do try{if(se!==0&&zt!==null){s=zt;var v=ji;e:switch(se){case 1:se=0,ji=null,Ul(i,s,v,1);break;case 2:if(uA(v)){se=0,ji=null,e_(s);break}s=function(){se===2&&ie===i&&(se=7),Zs(i)},v.then(s,s);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:uA(v)?(se=0,ji=null,e_(s)):(se=0,ji=null,Ul(i,s,v,7));break;case 5:var A=null;switch(zt.tag){case 26:A=zt.memoizedState;case 5:case 27:var x=zt;if(!A||L_(A)){se=0,ji=null;var L=x.sibling;if(L!==null)zt=L;else{var z=x.return;z!==null?(zt=z,$f(z)):zt=null}break e}}se=0,ji=null,Ul(i,s,v,5);break;case 6:se=0,ji=null,Ul(i,s,v,6);break;case 8:Av(),me=6;break t;default:throw Error(n(462))}}OC();break}catch(Q){WS(i,Q)}while(!0);return Rn=Vr=null,O.H=l,O.A=f,ue=a,zt!==null?0:(ie=null,jt=0,bf(),me)}function OC(){for(;zt!==null&&!ae();)t_(zt)}function t_(i){var s=_S(i.alternate,i,Pn);i.memoizedProps=i.pendingProps,s===null?$f(i):zt=s}function e_(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=mS(a,s,s.pendingProps,s.type,void 0,jt);break;case 11:s=mS(a,s,s.pendingProps,s.type.render,s.ref,jt);break;case 5:Cm(s);default:YS(a,s),s=zt=GS(s,Pn),s=_S(a,s,Pn)}i.memoizedProps=i.pendingProps,s===null?$f(i):zt=s}function Ul(i,s,a,l){Rn=Vr=null,Cm(s),Rl=null,Du=0;var f=s.return;try{if(AC(i,f,s,a,jt)){me=1,Bf(i,as(a,i.current)),zt=null;return}}catch(v){if(f!==null)throw zt=f,v;me=1,Bf(i,as(a,i.current)),zt=null;return}s.flags&32768?(Gt||l===1?i=!0:Hl||(jt&536870912)!==0?i=!1:(kn=i=!0,(l===2||l===3||l===6)&&(l=ls.current,l!==null&&l.tag===13&&(l.flags|=16384))),i_(s,i)):$f(s)}function $f(i){var s=i;do{if((s.flags&32768)!==0){i_(s,kn);return}i=s.return;var a=TC(s.alternate,s,Pn);if(a!==null){zt=a;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=i}while(s!==null);me===0&&(me=5)}function i_(i,s){do{var a=CC(i.alternate,i);if(a!==null){a.flags&=32767,zt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){zt=i;return}zt=i=a}while(i!==null);me=6,zt=null}function s_(i,s,a,l,f,v,A,x,L,z){var Q=O.T,tt=st.p;try{st.p=2,O.T=null,NC(i,s,a,l,tt,f,v,A,x,L,z)}finally{O.T=Q,st.p=tt}}function NC(i,s,a,l,f,v,A,x){do jl();while($r!==null);if((ue&6)!==0)throw Error(n(327));var L=i.finishedWork;if(l=i.finishedLanes,L===null)return null;if(i.finishedWork=null,i.finishedLanes=0,L===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var z=L.lanes|L.childLanes;if(z|=hm,hT(i,l,z,v,A,x),i===ie&&(zt=ie=null,jt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||Kf||(Kf=!0,mv=z,vv=a,zC(nf,function(){return jl(),null})),a=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||a?(a=O.T,O.T=null,v=st.p,st.p=2,A=ue,ue|=4,_C(i,L),zS(L,i),sC(kv,i.containerInfo),lp=!!Nv,kv=Nv=null,i.current=L,NS(i,L.alternate,L),An(),ue=A,st.p=v,O.T=a):i.current=L,Kf?(Kf=!1,$r=i,Qu=l):n_(i,z),z=i.pendingLanes,z===0&&(Ia=null),rT(L.stateNode),Zs(i),s!==null)for(f=i.onRecoverableError,L=0;L<s.length;L++)z=s[L],f(z.value,{componentStack:z.stack});return(Qu&3)!==0&&jl(),z=i.pendingLanes,(l&4194218)!==0&&(z&42)!==0?i===yv?$u++:($u=0,yv=i):$u=0,Wu(0),null}function n_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Nu(s)))}function jl(){if($r!==null){var i=$r,s=mv;mv=0;var a=fb(Qu),l=O.T,f=st.p;try{if(st.p=32>a?32:a,O.T=null,$r===null)var v=!1;else{a=vv,vv=null;var A=$r,x=Qu;if($r=null,Qu=0,(ue&6)!==0)throw Error(n(331));var L=ue;if(ue|=4,jS(A.current),BS(A,A.current,x,a),ue=L,Wu(0,!1),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(du,A)}catch{}v=!0}return v}finally{st.p=f,O.T=l,n_(i,s)}}return!1}function a_(i,s,a){s=as(a,s),s=Im(i.stateNode,s,2),i=ka(i,s,2),i!==null&&(pu(i,2),Zs(i))}function ee(i,s,a){if(i.tag===3)a_(i,i,a);else for(;s!==null;){if(s.tag===3){a_(s,i,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ia===null||!Ia.has(l))){i=as(a,i),a=lS(2),l=ka(s,a,2),l!==null&&(cS(a,l,s,i),pu(l,2),Zs(l));break}}s=s.return}}function Ev(i,s,a){var l=i.pingCache;if(l===null){l=i.pingCache=new RC;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(dv=!0,f.add(a),i=kC.bind(null,i,s,a),s.then(i,i))}function kC(i,s,a){var l=i.pingCache;l!==null&&l.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ie===i&&(jt&a)===a&&(me===4||me===3&&(jt&62914560)===jt&&300>Fi()-gv?(ue&2)===0&&Il(i,0):fv|=a,Bl===jt&&(Bl=0)),Zs(i)}function r_(i,s){s===0&&(s=ub()),i=Ca(i,s),i!==null&&(pu(i,s),Zs(i))}function PC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),r_(i,a)}function FC(i,s){var a=0;switch(i.tag){case 13:var l=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=i.stateNode;break;case 22:l=i.stateNode._retryCache;break;default:throw Error(n(314))}l!==null&&l.delete(s),r_(i,a)}function zC(i,s){return _a(i,s)}var Wf=null,ql=null,wv=!1,Zf=!1,Tv=!1,Wr=0;function Zs(i){i!==ql&&i.next===null&&(ql===null?Wf=ql=i:ql=ql.next=i),Zf=!0,wv||(wv=!0,BC(HC))}function Wu(i,s){if(!Tv&&Zf){Tv=!0;do for(var a=!1,l=Wf;l!==null;){if(i!==0){var f=l.pendingLanes;if(f===0)var v=0;else{var A=l.suspendedLanes,x=l.pingedLanes;v=(1<<31-Hi(42|i)+1)-1,v&=f&~(A&~x),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(a=!0,c_(l,v))}else v=jt,v=of(l,l===ie?v:0),(v&3)===0||fu(l,v)||(a=!0,c_(l,v));l=l.next}while(a);Tv=!1}}function HC(){Zf=wv=!1;var i=0;Wr!==0&&(YC()&&(i=Wr),Wr=0);for(var s=Fi(),a=null,l=Wf;l!==null;){var f=l.next,v=o_(l,s);v===0?(l.next=null,a===null?Wf=f:a.next=f,f===null&&(ql=a)):(a=l,(i!==0||(v&3)!==0)&&(Zf=!0)),l=f}Wu(i)}function o_(i,s){for(var a=i.suspendedLanes,l=i.pingedLanes,f=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-Hi(v),x=1<<A,L=f[A];L===-1?((x&a)===0||(x&l)!==0)&&(f[A]=uT(x,s)):L<=s&&(i.expiredLanes|=x),v&=~x}if(s=ie,a=jt,a=of(i,i===s?a:0),l=i.callbackNode,a===0||i===s&&se===2||i.cancelPendingCommit!==null)return l!==null&&l!==null&&qt(l),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||fu(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(l!==null&&qt(l),fb(a)){case 2:case 8:a=ob;break;case 32:a=nf;break;case 268435456:a=lb;break;default:a=nf}return l=l_.bind(null,i),a=_a(a,l),i.callbackPriority=s,i.callbackNode=a,s}return l!==null&&l!==null&&qt(l),i.callbackPriority=2,i.callbackNode=null,2}function l_(i,s){var a=i.callbackNode;if(jl()&&i.callbackNode!==a)return null;var l=jt;return l=of(i,i===ie?l:0),l===0?null:(QS(i,l,s),o_(i,Fi()),i.callbackNode!=null&&i.callbackNode===a?l_.bind(null,i):null)}function c_(i,s){if(jl())return null;QS(i,s,!0)}function BC(i){QC(function(){(ue&6)!==0?_a(sf,i):i()})}function Cv(){return Wr===0&&(Wr=cb()),Wr}function u_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:df(""+i)}function h_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function IC(i,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var v=u_((f[Ti]||null).action),A=l.submitter;A&&(s=(s=A[Ti]||null)?u_(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var x=new mf("action","action",null,l,f);i.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wr!==0){var L=A?h_(f,A):new FormData(f);Pm(a,{pending:!0,data:L,method:f.method,action:v},null,L)}}else typeof v=="function"&&(x.preventDefault(),L=A?h_(f,A):new FormData(f),Pm(a,{pending:!0,data:L,method:f.method,action:v},v,L))},currentTarget:f}]})}}for(var xv=0;xv<sA.length;xv++){var Rv=sA[xv],UC=Rv.toLowerCase(),jC=Rv[0].toUpperCase()+Rv.slice(1);xs(UC,"on"+jC)}xs(Zb,"onAnimationEnd"),xs(Jb,"onAnimationIteration"),xs(tA,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(aC,"onTransitionRun"),xs(rC,"onTransitionStart"),xs(oC,"onTransitionCancel"),xs(eA,"onTransitionEnd"),ml("onMouseEnter",["mouseout","mouseover"]),ml("onMouseLeave",["mouseout","mouseover"]),ml("onPointerEnter",["pointerout","pointerover"]),ml("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zu));function d_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var l=i[a],f=l.event;l=l.listeners;t:{var v=void 0;if(s)for(var A=l.length-1;0<=A;A--){var x=l[A],L=x.instance,z=x.currentTarget;if(x=x.listener,L!==v&&f.isPropagationStopped())break t;v=x,f.currentTarget=z;try{v(f)}catch(Q){Hf(Q)}f.currentTarget=null,v=L}else for(A=0;A<l.length;A++){if(x=l[A],L=x.instance,z=x.currentTarget,x=x.listener,L!==v&&f.isPropagationStopped())break t;v=x,f.currentTarget=z;try{v(f)}catch(Q){Hf(Q)}f.currentTarget=null,v=L}}}}function Bt(i,s){var a=s[Gg];a===void 0&&(a=s[Gg]=new Set);var l=i+"__bubble";a.has(l)||(f_(s,i,2,!1),a.add(l))}function Mv(i,s,a){var l=0;s&&(l|=4),f_(a,i,l,s)}var Jf="_reactListening"+Math.random().toString(36).slice(2);function Lv(i){if(!i[Jf]){i[Jf]=!0,mb.forEach(function(a){a!=="selectionchange"&&(qC.has(a)||Mv(a,!1,i),Mv(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Jf]||(s[Jf]=!0,Mv("selectionchange",!1,s))}}function f_(i,s,a,l){switch(F_(s)){case 2:var f=gx;break;case 8:f=mx;break;default:f=qv}a=f.bind(null,s,a,i),f=void 0,!Zg||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function Dv(i,s,a,l,f){var v=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var A=l.tag;if(A===3||A===4){var x=l.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(A===4)for(A=l.return;A!==null;){var L=A.tag;if((L===3||L===4)&&(L=A.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;A=A.return}for(;x!==null;){if(A=Dr(x),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){l=v=A;continue t}x=x.parentNode}}l=l.return}Rb(function(){var z=v,Q=$g(a),tt=[];t:{var q=iA.get(i);if(q!==void 0){var Y=mf,vt=i;switch(i){case"keypress":if(pf(a)===0)break t;case"keydown":case"keyup":Y=FT;break;case"focusin":vt="focus",Y=im;break;case"focusout":vt="blur",Y=im;break;case"beforeblur":case"afterblur":Y=im;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=wT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=BT;break;case Zb:case Jb:case tA:Y=xT;break;case eA:Y=UT;break;case"scroll":case"scrollend":Y=_T;break;case"wheel":Y=qT;break;case"copy":case"cut":case"paste":Y=MT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Nb;break;case"toggle":case"beforetoggle":Y=VT}var xt=(s&4)!==0,ve=!xt&&(i==="scroll"||i==="scrollend"),I=xt?q!==null?q+"Capture":null:q;xt=[];for(var F=z,j;F!==null;){var W=F;if(j=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||j===null||I===null||(W=vu(F,I),W!=null&&xt.push(Ju(F,W,j))),ve)break;F=F.return}0<xt.length&&(q=new Y(q,vt,null,a,Q),tt.push({event:q,listeners:xt}))}}if((s&7)===0){t:{if(q=i==="mouseover"||i==="pointerover",Y=i==="mouseout"||i==="pointerout",q&&a!==Qg&&(vt=a.relatedTarget||a.fromElement)&&(Dr(vt)||vt[fl]))break t;if((Y||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(vt=a.relatedTarget||a.toElement,Y=z,vt=vt?Dr(vt):null,vt!==null&&(ve=J(vt),xt=vt.tag,vt!==ve||xt!==5&&xt!==27&&xt!==6)&&(vt=null)):(Y=null,vt=z),Y!==vt)){if(xt=Db,W="onMouseLeave",I="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(xt=Nb,W="onPointerLeave",I="onPointerEnter",F="pointer"),ve=Y==null?q:mu(Y),j=vt==null?q:mu(vt),q=new xt(W,F+"leave",Y,a,Q),q.target=ve,q.relatedTarget=j,W=null,Dr(Q)===z&&(xt=new xt(I,F+"enter",vt,a,Q),xt.target=j,xt.relatedTarget=ve,W=xt),ve=W,Y&&vt)e:{for(xt=Y,I=vt,F=0,j=xt;j;j=Gl(j))F++;for(j=0,W=I;W;W=Gl(W))j++;for(;0<F-j;)xt=Gl(xt),F--;for(;0<j-F;)I=Gl(I),j--;for(;F--;){if(xt===I||I!==null&&xt===I.alternate)break e;xt=Gl(xt),I=Gl(I)}xt=null}else xt=null;Y!==null&&p_(tt,q,Y,xt,!1),vt!==null&&ve!==null&&p_(tt,ve,vt,xt,!0)}}t:{if(q=z?mu(z):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var pt=Ub;else if(Bb(q))if(jb)pt=eC;else{pt=JT;var Pt=ZT}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Kg(z.elementType)&&(pt=Ub):pt=tC;if(pt&&(pt=pt(i,z))){Ib(tt,pt,a,Q);break t}Pt&&Pt(i,q,z),i==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&Yg(q,"number",q.value)}switch(Pt=z?mu(z):window,i){case"focusin":(Bb(Pt)||Pt.contentEditable==="true")&&(_l=Pt,lm=z,Tu=null);break;case"focusout":Tu=lm=_l=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,$b(tt,a,Q);break;case"selectionchange":if(nC)break;case"keydown":case"keyup":$b(tt,a,Q)}var bt;if(nm)t:{switch(i){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Sl?zb(i,a)&&(_t="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(kb&&a.locale!=="ko"&&(Sl||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Sl&&(bt=Mb()):(Ta=Q,Jg="value"in Ta?Ta.value:Ta.textContent,Sl=!0)),Pt=tp(z,_t),0<Pt.length&&(_t=new Ob(_t,i,null,a,Q),tt.push({event:_t,listeners:Pt}),bt?_t.data=bt:(bt=Hb(a),bt!==null&&(_t.data=bt)))),(bt=YT?KT(i,a):QT(i,a))&&(_t=tp(z,"onBeforeInput"),0<_t.length&&(Pt=new Ob("onBeforeInput","beforeinput",null,a,Q),tt.push({event:Pt,listeners:_t}),Pt.data=bt)),IC(tt,i,z,a,Q)}d_(tt,s)})}function Ju(i,s,a){return{instance:i,listener:s,currentTarget:a}}function tp(i,s){for(var a=s+"Capture",l=[];i!==null;){var f=i,v=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||v===null||(f=vu(i,a),f!=null&&l.unshift(Ju(i,f,v)),f=vu(i,s),f!=null&&l.push(Ju(i,f,v))),i=i.return}return l}function Gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function p_(i,s,a,l,f){for(var v=s._reactName,A=[];a!==null&&a!==l;){var x=a,L=x.alternate,z=x.stateNode;if(x=x.tag,L!==null&&L===l)break;x!==5&&x!==26&&x!==27||z===null||(L=z,f?(z=vu(a,v),z!=null&&A.unshift(Ju(a,z,L))):f||(z=vu(a,v),z!=null&&A.push(Ju(a,z,L)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var GC=/\r\n?/g,VC=/\u0000|\uFFFD/g;function g_(i){return(typeof i=="string"?i:""+i).replace(GC,`
`).replace(VC,"")}function m_(i,s){return s=g_(s),g_(i)===s}function ep(){}function Zt(i,s,a,l,f,v){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||yl(i,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&yl(i,""+l);break;case"className":cf(i,"class",l);break;case"tabIndex":cf(i,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cf(i,a,l);break;case"style":Cb(i,l,v);break;case"data":if(s!=="object"){cf(i,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=df(""+l),i.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&Zt(i,s,"name",f.name,f,null),Zt(i,s,"formEncType",f.formEncType,f,null),Zt(i,s,"formMethod",f.formMethod,f,null),Zt(i,s,"formTarget",f.formTarget,f,null)):(Zt(i,s,"encType",f.encType,f,null),Zt(i,s,"method",f.method,f,null),Zt(i,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=df(""+l),i.setAttribute(a,l);break;case"onClick":l!=null&&(i.onclick=ep);break;case"onScroll":l!=null&&Bt("scroll",i);break;case"onScrollEnd":l!=null&&Bt("scrollend",i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(n(60));i.innerHTML=a}}break;case"multiple":i.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":i.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){i.removeAttribute("xlink:href");break}a=df(""+l),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""+l):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":l===!0?i.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,l):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?i.setAttribute(a,l):i.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?i.removeAttribute(a):i.setAttribute(a,l);break;case"popover":Bt("beforetoggle",i),Bt("toggle",i),lf(i,"popover",l);break;case"xlinkActuate":_n(i,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":_n(i,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":_n(i,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":_n(i,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":_n(i,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":_n(i,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":_n(i,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":_n(i,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":_n(i,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":lf(i,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=AT.get(a)||a,lf(i,a,l))}}function Ov(i,s,a,l,f,v){switch(a){case"style":Cb(i,l,v);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(n(60));i.innerHTML=a}}break;case"children":typeof l=="string"?yl(i,l):(typeof l=="number"||typeof l=="bigint")&&yl(i,""+l);break;case"onScroll":l!=null&&Bt("scroll",i);break;case"onScrollEnd":l!=null&&Bt("scrollend",i);break;case"onClick":l!=null&&(i.onclick=ep);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vb.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),v=i[Ti]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,f),typeof l=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,l,f);break t}a in i?i[a]=l:l===!0?i.setAttribute(a,""):lf(i,a,l)}}}function We(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",i),Bt("load",i);var l=!1,f=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Zt(i,s,v,A,a,null)}}f&&Zt(i,s,"srcSet",a.srcSet,a,null),l&&Zt(i,s,"src",a.src,a,null);return;case"input":Bt("invalid",i);var x=v=A=f=null,L=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":A=Q;break;case"checked":L=Q;break;case"defaultChecked":z=Q;break;case"value":v=Q;break;case"defaultValue":x=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,s));break;default:Zt(i,s,l,Q,a,null)}}_b(i,v,x,L,z,A,f,!1),uf(i);return;case"select":Bt("invalid",i),l=A=v=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":v=x;break;case"defaultValue":A=x;break;case"multiple":l=x;default:Zt(i,s,f,x,a,null)}s=v,a=A,i.multiple=!!l,s!=null?vl(i,!!l,s,!1):a!=null&&vl(i,!!l,a,!0);return;case"textarea":Bt("invalid",i),v=f=l=null;for(A in a)if(a.hasOwnProperty(A)&&(x=a[A],x!=null))switch(A){case"value":l=x;break;case"defaultValue":f=x;break;case"children":v=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:Zt(i,s,A,x,a,null)}wb(i,l,f,v),uf(i);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"selected":i.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(i,s,L,l,a,null)}return;case"dialog":Bt("cancel",i),Bt("close",i);break;case"iframe":case"object":Bt("load",i);break;case"video":case"audio":for(l=0;l<Zu.length;l++)Bt(Zu[l],i);break;case"image":Bt("error",i),Bt("load",i);break;case"details":Bt("toggle",i);break;case"embed":case"source":case"link":Bt("error",i),Bt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Zt(i,s,z,l,a,null)}return;default:if(Kg(s)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Ov(i,s,Q,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&Zt(i,s,x,l,a,null))}function XC(i,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,v=null,A=null,x=null,L=null,z=null,Q=null;for(Y in a){var tt=a[Y];if(a.hasOwnProperty(Y)&&tt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":L=tt;default:l.hasOwnProperty(Y)||Zt(i,s,Y,null,l,tt)}}for(var q in l){var Y=l[q];if(tt=a[q],l.hasOwnProperty(q)&&(Y!=null||tt!=null))switch(q){case"type":v=Y;break;case"name":f=Y;break;case"checked":z=Y;break;case"defaultChecked":Q=Y;break;case"value":A=Y;break;case"defaultValue":x=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,s));break;default:Y!==tt&&Zt(i,s,q,Y,l,tt)}}Xg(i,A,x,L,z,Q,v,f);return;case"select":Y=A=x=q=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":Y=L;default:l.hasOwnProperty(v)||Zt(i,s,v,null,l,L)}for(f in l)if(v=l[f],L=a[f],l.hasOwnProperty(f)&&(v!=null||L!=null))switch(f){case"value":q=v;break;case"defaultValue":x=v;break;case"multiple":A=v;default:v!==L&&Zt(i,s,f,v,l,L)}s=x,a=A,l=Y,q!=null?vl(i,!!a,q,!1):!!l!=!!a&&(s!=null?vl(i,!!a,s,!0):vl(i,!!a,a?[]:"",!1));return;case"textarea":Y=q=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Zt(i,s,x,null,l,f)}for(A in l)if(f=l[A],v=a[A],l.hasOwnProperty(A)&&(f!=null||v!=null))switch(A){case"value":q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(n(91));break;default:f!==v&&Zt(i,s,A,f,l,v)}Eb(i,q,Y);return;case"option":for(var vt in a)if(q=a[vt],a.hasOwnProperty(vt)&&q!=null&&!l.hasOwnProperty(vt))switch(vt){case"selected":i.selected=!1;break;default:Zt(i,s,vt,null,l,q)}for(L in l)if(q=l[L],Y=a[L],l.hasOwnProperty(L)&&q!==Y&&(q!=null||Y!=null))switch(L){case"selected":i.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Zt(i,s,L,q,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in a)q=a[xt],a.hasOwnProperty(xt)&&q!=null&&!l.hasOwnProperty(xt)&&Zt(i,s,xt,null,l,q);for(z in l)if(q=l[z],Y=a[z],l.hasOwnProperty(z)&&q!==Y&&(q!=null||Y!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:Zt(i,s,z,q,l,Y)}return;default:if(Kg(s)){for(var ve in a)q=a[ve],a.hasOwnProperty(ve)&&q!==void 0&&!l.hasOwnProperty(ve)&&Ov(i,s,ve,void 0,l,q);for(Q in l)q=l[Q],Y=a[Q],!l.hasOwnProperty(Q)||q===Y||q===void 0&&Y===void 0||Ov(i,s,Q,q,l,Y);return}}for(var I in a)q=a[I],a.hasOwnProperty(I)&&q!=null&&!l.hasOwnProperty(I)&&Zt(i,s,I,null,l,q);for(tt in l)q=l[tt],Y=a[tt],!l.hasOwnProperty(tt)||q===Y||q==null&&Y==null||Zt(i,s,tt,q,l,Y)}var Nv=null,kv=null;function ip(i){return i.nodeType===9?i:i.ownerDocument}function v_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Pv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Fv=null;function YC(){var i=window.event;return i&&i.type==="popstate"?i===Fv?!1:(Fv=i,!0):(Fv=null,!1)}var b_=typeof setTimeout=="function"?setTimeout:void 0,KC=typeof clearTimeout=="function"?clearTimeout:void 0,A_=typeof Promise=="function"?Promise:void 0,QC=typeof queueMicrotask=="function"?queueMicrotask:typeof A_<"u"?function(i){return A_.resolve(null).then(i).catch($C)}:b_;function $C(i){setTimeout(function(){throw i})}function zv(i,s){var a=s,l=0;do{var f=a.nextSibling;if(i.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(l===0){i.removeChild(f),oh(s);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=f}while(a);oh(s)}function Hv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hv(a),Vg(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function WC(i,s,a,l){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(l){if(!i[gu])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==f.rel||i.getAttribute("href")!==(f.href==null?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Ls(i.nextSibling),i===null)break}return null}function ZC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ls(i.nextSibling),i===null))return null;return i}function Ls(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}function S_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function __(i,s,a){switch(s=ip(a),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}var fs=new Map,E_=new Set;function sp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var zn=st.d;st.d={f:JC,r:tx,D:ex,C:ix,L:sx,m:nx,X:rx,S:ax,M:ox};function JC(){var i=zn.f(),s=Qf();return i||s}function tx(i){var s=pl(i);s!==null&&s.tag===5&&s.type==="form"?$A(s):zn.r(i)}var Vl=typeof document>"u"?null:document;function w_(i,s,a){var l=Vl;if(l&&typeof s=="string"&&s){var f=ss(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),E_.has(f)||(E_.add(f),i={rel:i,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),We(s,"link",i),Ie(s),l.head.appendChild(s)))}}function ex(i){zn.D(i),w_("dns-prefetch",i,null)}function ix(i,s){zn.C(i,s),w_("preconnect",i,s)}function sx(i,s,a){zn.L(i,s,a);var l=Vl;if(l&&i&&s){var f='link[rel="preload"][as="'+ss(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ss(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ss(a.imageSizes)+'"]')):f+='[href="'+ss(i)+'"]';var v=f;switch(s){case"style":v=Xl(i);break;case"script":v=Yl(i)}fs.has(v)||(i=K({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),fs.set(v,i),l.querySelector(f)!==null||s==="style"&&l.querySelector(th(v))||s==="script"&&l.querySelector(eh(v))||(s=l.createElement("link"),We(s,"link",i),Ie(s),l.head.appendChild(s)))}}function nx(i,s){zn.m(i,s);var a=Vl;if(a&&i){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ss(l)+'"][href="'+ss(i)+'"]',v=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Yl(i)}if(!fs.has(v)&&(i=K({rel:"modulepreload",href:i},s),fs.set(v,i),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(eh(v)))return}l=a.createElement("link"),We(l,"link",i),Ie(l),a.head.appendChild(l)}}}function ax(i,s,a){zn.S(i,s,a);var l=Vl;if(l&&i){var f=gl(l).hoistableStyles,v=Xl(i);s=s||"default";var A=f.get(v);if(!A){var x={loading:0,preload:null};if(A=l.querySelector(th(v)))x.loading=5;else{i=K({rel:"stylesheet",href:i,"data-precedence":s},a),(a=fs.get(v))&&Bv(i,a);var L=A=l.createElement("link");Ie(L),We(L,"link",i),L._p=new Promise(function(z,Q){L.onload=z,L.onerror=Q}),L.addEventListener("load",function(){x.loading|=1}),L.addEventListener("error",function(){x.loading|=2}),x.loading|=4,np(A,s,l)}A={type:"stylesheet",instance:A,count:1,state:x},f.set(v,A)}}}function rx(i,s){zn.X(i,s);var a=Vl;if(a&&i){var l=gl(a).hoistableScripts,f=Yl(i),v=l.get(f);v||(v=a.querySelector(eh(f)),v||(i=K({src:i,async:!0},s),(s=fs.get(f))&&Iv(i,s),v=a.createElement("script"),Ie(v),We(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(f,v))}}function ox(i,s){zn.M(i,s);var a=Vl;if(a&&i){var l=gl(a).hoistableScripts,f=Yl(i),v=l.get(f);v||(v=a.querySelector(eh(f)),v||(i=K({src:i,async:!0,type:"module"},s),(s=fs.get(f))&&Iv(i,s),v=a.createElement("script"),Ie(v),We(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(f,v))}}function T_(i,s,a,l){var f=(f=pi.current)?sp(f):null;if(!f)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Xl(a.href),a=gl(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Xl(a.href);var v=gl(f).hoistableStyles,A=v.get(i);if(A||(f=f.ownerDocument||f,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=f.querySelector(th(i)))&&!v._p&&(A.instance=v,A.state.loading=5),fs.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},fs.set(i,a),v||lx(f,i,a,A.state))),s&&l===null)throw Error(n(528,""));return A}if(s&&l!==null)throw Error(n(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yl(a),a=gl(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Xl(i){return'href="'+ss(i)+'"'}function th(i){return'link[rel="stylesheet"]['+i+"]"}function C_(i){return K({},i,{"data-precedence":i.precedence,precedence:null})}function lx(i,s,a,l){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),We(s,"link",a),Ie(s),i.head.appendChild(s))}function Yl(i){return'[src="'+ss(i)+'"]'}function eh(i){return"script[async]"+i}function x_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=i.querySelector('style[data-href~="'+ss(a.href)+'"]');if(l)return s.instance=l,Ie(l),l;var f=K({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(i.ownerDocument||i).createElement("style"),Ie(l),We(l,"style",f),np(l,a.precedence,i),s.instance=l;case"stylesheet":f=Xl(a.href);var v=i.querySelector(th(f));if(v)return s.state.loading|=4,s.instance=v,Ie(v),v;l=C_(a),(f=fs.get(f))&&Bv(l,f),v=(i.ownerDocument||i).createElement("link"),Ie(v);var A=v;return A._p=new Promise(function(x,L){A.onload=x,A.onerror=L}),We(v,"link",l),s.state.loading|=4,np(v,a.precedence,i),s.instance=v;case"script":return v=Yl(a.src),(f=i.querySelector(eh(v)))?(s.instance=f,Ie(f),f):(l=a,(f=fs.get(v))&&(l=K({},a),Iv(l,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ie(f),We(f,"link",l),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,np(l,a.precedence,i));return s.instance}function np(i,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,v=f,A=0;A<l.length;A++){var x=l[A];if(x.dataset.precedence===s)v=x;else if(v!==f)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Bv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Iv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var ap=null;function R_(i,s,a){if(ap===null){var l=new Map,f=ap=new Map;f.set(a,l)}else f=ap,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(i))return l;for(l.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var v=a[f];if(!(v[gu]||v[si]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=i+A;var x=l.get(A);x?x.push(v):l.set(A,[v])}}return l}function M_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function cx(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function L_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ih=null;function ux(){}function hx(i,s,a){if(ih===null)throw Error(n(475));var l=ih;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Xl(a.href),v=i.querySelector(th(f));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(l.count++,l=rp.bind(l),i.then(l,l)),s.state.loading|=4,s.instance=v,Ie(v);return}v=i.ownerDocument||i,a=C_(a),(f=fs.get(f))&&Bv(a,f),v=v.createElement("link"),Ie(v);var A=v;A._p=new Promise(function(x,L){A.onload=x,A.onerror=L}),We(v,"link",a),s.instance=v}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=rp.bind(l),i.addEventListener("load",s),i.addEventListener("error",s))}}function dx(){if(ih===null)throw Error(n(475));var i=ih;return i.stylesheets&&i.count===0&&Uv(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&Uv(i,i.stylesheets),i.unsuspend){var l=i.unsuspend;i.unsuspend=null,l()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function rp(){if(this.count--,this.count===0){if(this.stylesheets)Uv(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var op=null;function Uv(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,op=new Map,s.forEach(fx,i),op=null,rp.call(i))}function fx(i,s){if(!(s.state.loading&4)){var a=op.get(i);if(a)var l=a.get(null);else{a=new Map,op.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<f.length;v++){var A=f[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),l=A)}l&&a.set(null,l)}f=s.instance,A=f.getAttribute("data-precedence"),v=a.get(A)||l,v===l&&a.set(null,f),a.set(A,f),this.count++,l=rp.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),v?v.parentNode.insertBefore(f,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var sh={$$typeof:S,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function px(i,s,a,l,f,v,A,x){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qg(0),this.hiddenUpdates=qg(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function D_(i,s,a,l,f,v,A,x,L,z,Q,tt){return i=new px(i,s,a,A,x,L,z,tt),s=1,v===!0&&(s|=24),v=hs(3,null,null,s),i.current=v,v.stateNode=i,s=bm(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:l,isDehydrated:a,cache:s},Jm(v),i}function O_(i){return i?(i=Tl,i):Tl}function N_(i,s,a,l,f,v){f=O_(f),l.context===null?l.context=f:l.pendingContext=f,l=Na(s),l.payload={element:a},v=v===void 0?null:v,v!==null&&(l.callback=v),a=ka(i,l,s),a!==null&&(vi(a,i,s),Iu(a,i,s))}function k_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function jv(i,s){k_(i,s),(i=i.alternate)&&k_(i,s)}function P_(i){if(i.tag===13){var s=Ca(i,67108864);s!==null&&vi(s,i,67108864),jv(i,67108864)}}var lp=!0;function gx(i,s,a,l){var f=O.T;O.T=null;var v=st.p;try{st.p=2,qv(i,s,a,l)}finally{st.p=v,O.T=f}}function mx(i,s,a,l){var f=O.T;O.T=null;var v=st.p;try{st.p=8,qv(i,s,a,l)}finally{st.p=v,O.T=f}}function qv(i,s,a,l){if(lp){var f=Gv(l);if(f===null)Dv(i,s,l,cp,a),z_(i,l);else if(yx(f,i,s,a,l))l.stopPropagation();else if(z_(i,l),s&4&&-1<vx.indexOf(i)){for(;f!==null;){var v=pl(f);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Lr(v.pendingLanes);if(A!==0){var x=v;for(x.pendingLanes|=2,x.entangledLanes|=2;A;){var L=1<<31-Hi(A);x.entanglements[1]|=L,A&=~L}Zs(v),(ue&6)===0&&(Xf=Fi()+500,Wu(0))}}break;case 13:x=Ca(v,2),x!==null&&vi(x,v,2),Qf(),jv(v,2)}if(v=Gv(l),v===null&&Dv(i,s,l,cp,a),v===f)break;f=v}f!==null&&l.stopPropagation()}else Dv(i,s,l,null,a)}}function Gv(i){return i=$g(i),Vv(i)}var cp=null;function Vv(i){if(cp=null,i=Dr(i),i!==null){var s=J(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=St(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return cp=i,null}function F_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jg()){case sf:return 2;case ob:return 8;case nf:case sT:return 32;case lb:return 268435456;default:return 32}default:return 32}}var Xv=!1,Ua=null,ja=null,qa=null,nh=new Map,ah=new Map,Ga=[],vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z_(i,s){switch(i){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":nh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(s.pointerId)}}function rh(i,s,a,l,f,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:v,targetContainers:[f]},s!==null&&(s=pl(s),s!==null&&P_(s)),i):(i.eventSystemFlags|=l,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function yx(i,s,a,l,f){switch(s){case"focusin":return Ua=rh(Ua,i,s,a,l,f),!0;case"dragenter":return ja=rh(ja,i,s,a,l,f),!0;case"mouseover":return qa=rh(qa,i,s,a,l,f),!0;case"pointerover":var v=f.pointerId;return nh.set(v,rh(nh.get(v)||null,i,s,a,l,f)),!0;case"gotpointercapture":return v=f.pointerId,ah.set(v,rh(ah.get(v)||null,i,s,a,l,f)),!0}return!1}function H_(i){var s=Dr(i.target);if(s!==null){var a=J(s);if(a!==null){if(s=a.tag,s===13){if(s=St(a),s!==null){i.blockedOn=s,dT(i.priority,function(){if(a.tag===13){var l=qi(),f=Ca(a,l);f!==null&&vi(f,a,l),jv(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function up(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Gv(i.nativeEvent);if(a===null){a=i.nativeEvent;var l=new a.constructor(a.type,a);Qg=l,a.target.dispatchEvent(l),Qg=null}else return s=pl(a),s!==null&&P_(s),i.blockedOn=a,!1;s.shift()}return!0}function B_(i,s,a){up(i)&&a.delete(s)}function bx(){Xv=!1,Ua!==null&&up(Ua)&&(Ua=null),ja!==null&&up(ja)&&(ja=null),qa!==null&&up(qa)&&(qa=null),nh.forEach(B_),ah.forEach(B_)}function hp(i,s){i.blockedOn===s&&(i.blockedOn=null,Xv||(Xv=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,bx)))}var dp=null;function I_(i){dp!==i&&(dp=i,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){dp===i&&(dp=null);for(var s=0;s<i.length;s+=3){var a=i[s],l=i[s+1],f=i[s+2];if(typeof l!="function"){if(Vv(l||a)===null)continue;break}var v=pl(a);v!==null&&(i.splice(s,3),s-=3,Pm(v,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function oh(i){function s(L){return hp(L,i)}Ua!==null&&hp(Ua,i),ja!==null&&hp(ja,i),qa!==null&&hp(qa,i),nh.forEach(s),ah.forEach(s);for(var a=0;a<Ga.length;a++){var l=Ga[a];l.blockedOn===i&&(l.blockedOn=null)}for(;0<Ga.length&&(a=Ga[0],a.blockedOn===null);)H_(a),a.blockedOn===null&&Ga.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],v=a[l+1],A=f[Ti]||null;if(typeof v=="function")A||I_(a);else if(A){var x=null;if(v&&v.hasAttribute("formAction")){if(f=v,A=v[Ti]||null)x=A.formAction;else if(Vv(f)!==null)continue}else x=A.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),I_(a)}}}function Yv(i){this._internalRoot=i}fp.prototype.render=Yv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var a=s.current,l=qi();N_(a,l,i,s,null,null)},fp.prototype.unmount=Yv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;i.tag===0&&jl(),N_(i.current,2,null,i,null,null),Qf(),s[fl]=null}};function fp(i){this._internalRoot=i}fp.prototype.unstable_scheduleHydration=function(i){if(i){var s=pb();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Ga.length&&s!==0&&s<Ga[a].priority;a++);Ga.splice(a,0,i),a===0&&H_(i)}};var U_=e.version;if(U_!=="19.0.0")throw Error(n(527,U_,"19.0.0"));st.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=V(s),i=i!==null?at(i):null,i=i===null?null:i.stateNode,i};var Ax={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:O,findFiberByHostInstance:Dr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pp.isDisabled&&pp.supportsFiber)try{du=pp.inject(Ax),zi=pp}catch{}}return dh.createRoot=function(i,s){if(!r(i))throw Error(n(299));var a=!1,l="",f=nS,v=aS,A=rS,x=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=D_(i,1,!1,null,null,a,l,f,v,A,x,null),i[fl]=s.current,Lv(i.nodeType===8?i.parentNode:i),new Yv(s)},dh.hydrateRoot=function(i,s,a){if(!r(i))throw Error(n(299));var l=!1,f="",v=nS,A=aS,x=rS,L=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(L=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),s=D_(i,1,!0,s,a??null,l,f,v,A,x,L,z),s.context=O_(null),a=s.current,l=qi(),f=Na(l),f.callback=null,ka(a,f,l),s.current.lanes=l,pu(s,l),Zs(s),i[fl]=s.current,Lv(i),new fp(s)},dh.version="19.0.0",dh}var ME;function fD(){if(ME)return gy.exports;ME=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(e){console.error(e)}}return d(),gy.exports=dD(),gy.exports}var pD=fD();const gD=wx(pD),mD=d=>ut.jsx("button",{...d,children:d.children}),vD=iD(mD),yD=d=>ut.jsx(vD,{preload:"intent",...d}),bD=()=>ut.jsxs("div",{children:[ut.jsx("h1",{children:"Pagina non trovata"}),ut.jsx(yD,{to:"/",children:"Torna alla home"})]}),Ug=OL()({component:()=>ut.jsx(ut.Fragment,{children:ut.jsx(ib,{})}),notFoundComponent:()=>ut.jsx(bD,{data:!0})}),AD=()=>ao(()=>import("./quiz-DveEP1Pv.js"),__vite__mapDeps([0,1])),tT=eb("/quiz")({component:sb(AD,"component",()=>tT.ssr),beforeLoad:({context:d})=>{if(!d.quizState.filePath)throw jw({to:"/"})}}),SD=()=>ao(()=>import("./dashboard-CdQUwAwS.js"),__vite__mapDeps([2,1])),eT=eb("/dashboard")({component:sb(SD,"component",()=>eT.ssr),beforeLoad:({context:d})=>{if(!d.quizState.filePath)throw jw({to:"/"})}}),_D=()=>ao(()=>import("./index-BAnbzTGv.js"),[]),iT=eb("/")({component:sb(_D,"component",()=>iT.ssr)}),ED=tT.update({id:"/quiz",path:"/quiz",getParentRoute:()=>Ug}),wD=eT.update({id:"/dashboard",path:"/dashboard",getParentRoute:()=>Ug}),TD=iT.update({id:"/",path:"/",getParentRoute:()=>Ug}),CD={IndexRoute:TD,DashboardRoute:wD,QuizRoute:ED},xD=Ug._addFileChildren(CD)._addFileTypes(),RD=WM(),MD=aD({routeTree:xD,history:RD,context:{quizState:void 0,dispatch:void 0}}),LE=document.getElementById("root");LE.innerHTML||gD.createRoot(LE).render(ut.jsx(Et.StrictMode,{children:ut.jsx(cD,{})}));export{yD as B,Ka as Q,bn as a,$w as b,Rx as c,DD as f,ut as j,Et as r,KM as u};
