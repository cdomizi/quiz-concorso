import{u as p,j as t,f as m,a as b,b as j,Q as h}from"./index-DKzEv__3.js";import{u as w}from"./useRedirect-DCg5YG1u.js";function S({index:e,onClick:i}){const{quizState:{questions:a,submitted:d}}=p(),n=m(e),r=a[e].answer,s=a[e].selectedAnswer,o={answered:"answered",correct:"correct",wrong:"wrong"};function c(){return d?s===r?o.correct:o.wrong:s?o.answered:""}return t.jsx("button",{className:`dashboard-question-button ${c()}`,type:"button",onClick:()=>void i(e),children:n.toString()})}function g(){const{quizState:{questions:e}}=p(),i=(e==null?void 0:e.length)||50,a=(e==null?void 0:e.filter(l=>l.selectedAnswer===l.answer).length)||0,d=i*2,n=a*2,s=n>=70,o=s?"Superato":"Fallito",c=`${a.toString()} / ${i.toString()}`;return t.jsxs("div",{children:[t.jsx("hr",{}),t.jsxs("h2",{className:s?"success":"wrong",children:["Test ",o]}),t.jsx("p",{children:t.jsxs("b",{children:["Punteggio: ",n," / ",d]})}),t.jsxs("p",{children:["Risposte esatte: ",c]})]})}function f(){const e=b(),i=j(),{quizState:{filePath:a,title:d,questions:n,submitted:r},dispatch:s}=p(),o=w({destination:"/",condition:!a});o&&o();async function c(u){s({type:h.setStep,payload:u}),await i({to:"/quiz"})}function l(){s({type:h.setSubmitted})}async function x(){s({type:h.eraseState}),await e.invalidate(),await i({to:"/"})}return t.jsxs("div",{children:[t.jsx("h1",{children:d}),t.jsx("p",{children:"Concorso ordinario 2023 - Scuola secondaria di I e II grado"}),r&&t.jsx(g,{}),t.jsx("button",{type:"button",disabled:r,onClick:()=>{c(0)},children:"Inizia"}),t.jsx("button",{type:"button",onClick:l,disabled:r,children:"Termina"}),t.jsx("button",{type:"button",onClick:()=>{x()},children:"Esci"}),t.jsx("div",{children:n==null?void 0:n.map(u=>t.jsx(S,{index:u.index,onClick:c},u.index))})]})}const v=f;export{v as component};
